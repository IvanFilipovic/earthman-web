import{e as I,f as N,_ as L}from"#entry";import{_ as V,u as W}from"./CiYSQXAz.js";import{_ as D}from"./wm0FsEjJ.js";import O from"./C1jAaNN0.js";import{C as R,ad as U,b as h,D as F,q as M,k as Y,F as a,a3 as o,N as m,Y as k,T as G,X as c,J as f,L as j,a6 as J,a8 as X,ac as H,a7 as K,a4 as Q,n as Z}from"./Cvp-EZ-T.js";import{g as u}from"./DKtf60Sy.js";import{S as T}from"./Duwiz9RP.js";import{S as tt}from"./CZpAVE0J.js";import{u as et}from"./CxXnesoB.js";import"./DHhpbDuF.js";const ot={class:"collections-page"},nt={key:"loading",class:"fixed inset-0 flex items-center justify-center bg-background_color z-40"},st={key:"content",id:"smooth-wrapper"},rt={id:"smooth-content"},lt={class:"slide__content"},it={class:"slide__content-inner"},at={class:"slide__title"},ct={class:"slide__title-line"},ut={class:"line__inner"},dt={class:"slide__cta"},_t=["onClick"],mt=R({__name:"index",async setup(ft){let p,b,_=null;try{_=([p,b]=U(()=>I(()=>import("./Duwiz9RP.js").then(t=>t.a),[],import.meta.url)),p=await p,b(),p).ScrollSmoother}catch{}u.registerPlugin(T,tt),_&&u.registerPlugin(_);const C=N(),q=h(null),w=h(!1),y=h(!0),d=h([]);let v=null,S=null;const{getTransformedUrl:$}=W();function E(t){if(!t)return"";const i=typeof window<"u"&&window.innerWidth<=768?800:1920;return $(t,i,{quality:85,format:"auto"})}function z(t){const e=document.querySelector(`.slide:nth-child(${t+1})`);e&&u.to(window,{duration:1.2,scrollTo:{y:e,offsetY:0},ease:"power2.inOut"})}function A(){const t=document.querySelector(".slide:nth-child(1)");t&&u.to(window,{duration:1.2,scrollTo:{y:t,offsetY:0},ease:"power2.inOut"})}async function B(){try{y.value=!0;const t=await $fetch(`${C.public.apiBase}/public/collections/`);d.value=t||[]}catch(t){console.error("Failed to fetch collections:",t),d.value=[]}finally{y.value=!1}}function P(){Z(()=>{const t=document.querySelector("#smooth-wrapper"),e=document.querySelector("#smooth-content"),i=document.querySelectorAll(".slide");if(!t||!e||i.length===0){console.error("Elements not found for GSAP initialization");return}S=u.context(()=>{if(_)try{v=_.create({smooth:1.5,effects:!0,normalizeScroll:!0,smoothTouch:.2,wrapper:"#smooth-wrapper",content:"#smooth-content"})}catch(n){console.error("ScrollSmoother error:",n)}i.forEach((n,s)=>{const r=u.timeline({scrollTrigger:{trigger:n,start:"top 60%",end:"bottom 40%",onEnter:()=>{w.value=s%2===0},onEnterBack:()=>{w.value=s%2===0}}}),l=n.querySelector(".line__inner"),g=n.querySelector(".btn"),x=n.querySelector(".slide__scroll-btn");l&&r.from(l,{y:120,duration:1.4,ease:"power4.out"}),g&&r.from(g,{y:80,opacity:0,duration:1.2,ease:"power4.out"},.2),x&&r.from(x,{y:40,opacity:0,duration:1,ease:"power4.out"},.3)}),i.forEach(n=>{const s=n.querySelector(".slide__bg");s&&u.fromTo(s,{y:"-20vh",scale:1.2},{y:"20vh",scale:1,ease:"none",scrollTrigger:{trigger:n,scrub:!0,start:"top bottom",end:"bottom top"}})})})})}F(async()=>{await B()}),M(()=>{S?.revert(),S=null,v?.kill?.(),T.getAll().forEach(t=>t.kill())});{const t=Y(()=>v);et(t)}return(t,e)=>{const i=V,n=D,s=O;return c(),a("div",ot,[o("div",{ref_key:"navWrap",ref:q,class:"fixed top-0 left-0 w-full z-50"},[m(i,{dark:!0})],512),m(G,{name:"fade",mode:"out-in",onAfterEnter:P},{default:k(()=>[f(y)?(c(),a("div",nt,[...e[1]||(e[1]=[o("p",{class:"text-text_color text-xl"},"Loading collections...",-1)])])):(c(),a("div",st,[o("div",rt,[(c(!0),a(j,null,J(f(d),(r,l)=>(c(),a("section",{key:r.id||l,class:X(["slide",`slide--${l%2+1}`])},[o("div",{class:"slide__bg",style:H({backgroundImage:`url(${E(r.element_one_image)})`})},[...e[2]||(e[2]=[o("div",{class:"slide__overlay"},null,-1)])],4),o("div",lt,[o("div",it,[o("h2",at,[o("span",ct,[o("span",ut,Q(r.name),1)])]),o("div",dt,[m(n,{to:`/collections/${encodeURIComponent(r.slug)}`,class:"btn btn--secondary"},{default:k(()=>[...e[3]||(e[3]=[o("span",{class:"btn__text"},"View Story",-1),o("span",{class:"btn__fill"},null,-1)])]),_:1},8,["to"])])]),l<f(d).length-1?(c(),a("button",{key:0,type:"button",class:"slide__scroll-btn",onClick:g=>z(l+1)},[e[4]||(e[4]=o("span",{class:"slide__scroll-line"},null,-1)),m(s,{name:"lucide:chevron-down",class:"slide__scroll-icon"})],8,_t)):l===f(d).length-1&&f(d).length>1?(c(),a("button",{key:1,type:"button",class:"slide__scroll-btn",onClick:e[0]||(e[0]=g=>A())},[m(s,{name:"lucide:chevron-up",class:"slide__scroll-icon"}),e[5]||(e[5]=o("span",{class:"slide__scroll-line"},null,-1))])):K("",!0)])],2))),128))])]))]),_:1})])}}}),Tt=L(mt,[["__scopeId","data-v-f2511fcf"]]);export{Tt as default};
