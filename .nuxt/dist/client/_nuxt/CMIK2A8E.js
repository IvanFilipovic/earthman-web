import{d as z,f as B,_ as N}from"#entry";import{_ as I}from"./hCr4fjmv.js";import{_ as L}from"./C5QjP5iV.js";import V from"./ChDEDsbd.js";import{C as D,ac as R,b as h,D as W,q as F,k as O,F as i,a2 as o,N as p,J as u,X as x,T as G,W as a,L as U,a5 as Y,a6 as j,ab as J,a7 as M,a3 as X,n as H}from"./DHOatR1P.js";import{g as c}from"./DKtf60Sy.js";import{S as T}from"./Duwiz9RP.js";import{S as K}from"./CZpAVE0J.js";import{u as Q}from"./nJuUi0cI.js";import"./CeFVBsem.js";const Z={class:"collections-page"},tt={key:"loading",class:"fixed inset-0 flex items-center justify-center bg-background_color z-40"},et={key:"content",id:"smooth-wrapper"},ot={id:"smooth-content"},nt={class:"slide__content"},st={class:"slide__content-inner"},lt={class:"slide__title"},rt={class:"slide__title-line"},it={class:"line__inner"},at={class:"slide__cta"},ct=["onClick"],_t=D({__name:"index",async setup(ut){let f,k,d=null;try{d=([f,k]=R(()=>z(()=>import("./Duwiz9RP.js").then(t=>t.a),[],import.meta.url)),f=await f,k(),f).ScrollSmoother}catch{}c.registerPlugin(T,K),d&&c.registerPlugin(d);const C=B(),$=h(null),y=h(!1),v=h(!0),_=h([]);let b=null,S=null;function q(t){const e=document.querySelector(`.slide:nth-child(${t+1})`);e&&c.to(window,{duration:1.2,scrollTo:{y:e,offsetY:0},ease:"power2.inOut"})}function E(){const t=document.querySelector(".slide:nth-child(1)");t&&c.to(window,{duration:1.2,scrollTo:{y:t,offsetY:0},ease:"power2.inOut"})}async function A(){try{v.value=!0;const t=await $fetch(`${C.public.apiBase}/public/collections/`);_.value=t||[]}catch(t){console.error("Failed to fetch collections:",t),_.value=[]}finally{v.value=!1}}function P(){H(()=>{const t=document.querySelector("#smooth-wrapper"),e=document.querySelector("#smooth-content"),m=document.querySelectorAll(".slide");if(!t||!e||m.length===0){console.error("Elements not found for GSAP initialization");return}S=c.context(()=>{if(d)try{b=d.create({smooth:1.5,effects:!0,normalizeScroll:!0,smoothTouch:.2,wrapper:"#smooth-wrapper",content:"#smooth-content"})}catch(n){console.error("ScrollSmoother error:",n)}m.forEach((n,s)=>{const l=c.timeline({scrollTrigger:{trigger:n,start:"top 60%",end:"bottom 40%",onEnter:()=>{y.value=s%2===0},onEnterBack:()=>{y.value=s%2===0}}}),r=n.querySelector(".line__inner"),g=n.querySelector(".btn"),w=n.querySelector(".slide__scroll-btn");r&&l.from(r,{y:120,duration:1.4,ease:"power4.out"}),g&&l.from(g,{y:80,opacity:0,duration:1.2,ease:"power4.out"},.2),w&&l.from(w,{y:40,opacity:0,duration:1,ease:"power4.out"},.3)}),m.forEach(n=>{const s=n.querySelector(".slide__bg");s&&c.fromTo(s,{y:"-20vh",scale:1.2},{y:"20vh",scale:1,ease:"none",scrollTrigger:{trigger:n,scrub:!0,start:"top bottom",end:"bottom top"}})})})})}W(async()=>{await A()}),F(()=>{S?.revert(),S=null,b?.kill?.(),T.getAll().forEach(t=>t.kill())});{const t=O(()=>b);Q(t)}return(t,e)=>{const m=I,n=L,s=V;return a(),i("div",Z,[o("div",{ref_key:"navWrap",ref:$,class:"fixed top-0 left-0 w-full z-50"},[p(m,{dark:u(y)},null,8,["dark"])],512),p(G,{name:"fade",mode:"out-in",onAfterEnter:P},{default:x(()=>[u(v)?(a(),i("div",tt,[...e[1]||(e[1]=[o("p",{class:"text-text_color text-xl"},"Loading collections...",-1)])])):(a(),i("div",et,[o("div",ot,[(a(!0),i(U,null,Y(u(_),(l,r)=>(a(),i("section",{key:l.id||r,class:j(["slide",`slide--${r%2+1}`])},[o("div",{class:"slide__bg",style:J({backgroundImage:`url(${l.element_one_image})`})},[...e[2]||(e[2]=[o("div",{class:"slide__overlay"},null,-1)])],4),o("div",nt,[o("div",st,[o("h2",lt,[o("span",rt,[o("span",it,X(l.name),1)])]),o("div",at,[p(n,{to:`/collections/${encodeURIComponent(l.slug)}`,class:"btn btn--secondary"},{default:x(()=>[...e[3]||(e[3]=[o("span",{class:"btn__text"},"View Story",-1),o("span",{class:"btn__fill"},null,-1)])]),_:1},8,["to"])])]),r<u(_).length-1?(a(),i("button",{key:0,type:"button",class:"slide__scroll-btn",onClick:g=>q(r+1)},[e[4]||(e[4]=o("span",{class:"slide__scroll-line"},null,-1)),p(s,{name:"lucide:chevron-down",class:"slide__scroll-icon"})],8,ct)):r===u(_).length-1&&u(_).length>1?(a(),i("button",{key:1,type:"button",class:"slide__scroll-btn",onClick:e[0]||(e[0]=g=>E())},[p(s,{name:"lucide:chevron-up",class:"slide__scroll-icon"}),e[5]||(e[5]=o("span",{class:"slide__scroll-line"},null,-1))])):M("",!0)])],2))),128))])]))]),_:1})])}}}),kt=N(_t,[["__scopeId","data-v-b0f2d0b8"]]);export{kt as default};
