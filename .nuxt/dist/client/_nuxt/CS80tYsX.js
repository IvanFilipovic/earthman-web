import{e as z,f as B,_ as N}from"#entry";import{_ as I}from"./C1kAkoeJ.js";import{_ as L}from"./RyNHXVQh.js";import V from"./Coo3-VcT.js";import{C as D,ad as R,b as h,D as F,q as O,k as W,F as i,a3 as o,N as m,Y as k,T as Y,X as c,J as p,L as G,a6 as U,a8 as j,ac as J,a7 as M,a4 as X,n as H}from"./S8-AOUyP.js";import{g as a}from"./DKtf60Sy.js";import{S as T}from"./Duwiz9RP.js";import{S as K}from"./CZpAVE0J.js";import{u as Q}from"./CLkBgmcd.js";import"./CyZbsNYg.js";const Z={class:"collections-page"},tt={key:"loading",class:"fixed inset-0 flex items-center justify-center bg-background_color z-40"},et={key:"content",id:"smooth-wrapper"},ot={id:"smooth-content"},nt={class:"slide__content"},st={class:"slide__content-inner"},lt={class:"slide__title"},rt={class:"slide__title-line"},it={class:"line__inner"},ct={class:"slide__cta"},at=["onClick"],_t=D({__name:"index",async setup(ut){let f,b,u=null;try{u=([f,b]=R(()=>z(()=>import("./Duwiz9RP.js").then(t=>t.a),[],import.meta.url)),f=await f,b(),f).ScrollSmoother}catch{}a.registerPlugin(T,K),u&&a.registerPlugin(u);const C=B(),$=h(null),w=h(!1),y=h(!0),_=h([]);let v=null,S=null;function q(t){const e=document.querySelector(`.slide:nth-child(${t+1})`);e&&a.to(window,{duration:1.2,scrollTo:{y:e,offsetY:0},ease:"power2.inOut"})}function E(){const t=document.querySelector(".slide:nth-child(1)");t&&a.to(window,{duration:1.2,scrollTo:{y:t,offsetY:0},ease:"power2.inOut"})}async function A(){try{y.value=!0;const t=await $fetch(`${C.public.apiBase}/public/collections/`);_.value=t||[]}catch(t){console.error("Failed to fetch collections:",t),_.value=[]}finally{y.value=!1}}function P(){H(()=>{const t=document.querySelector("#smooth-wrapper"),e=document.querySelector("#smooth-content"),d=document.querySelectorAll(".slide");if(!t||!e||d.length===0){console.error("Elements not found for GSAP initialization");return}S=a.context(()=>{if(u)try{v=u.create({smooth:1.5,effects:!0,normalizeScroll:!0,smoothTouch:.2,wrapper:"#smooth-wrapper",content:"#smooth-content"})}catch(n){console.error("ScrollSmoother error:",n)}d.forEach((n,s)=>{const l=a.timeline({scrollTrigger:{trigger:n,start:"top 60%",end:"bottom 40%",onEnter:()=>{w.value=s%2===0},onEnterBack:()=>{w.value=s%2===0}}}),r=n.querySelector(".line__inner"),g=n.querySelector(".btn"),x=n.querySelector(".slide__scroll-btn");r&&l.from(r,{y:120,duration:1.4,ease:"power4.out"}),g&&l.from(g,{y:80,opacity:0,duration:1.2,ease:"power4.out"},.2),x&&l.from(x,{y:40,opacity:0,duration:1,ease:"power4.out"},.3)}),d.forEach(n=>{const s=n.querySelector(".slide__bg");s&&a.fromTo(s,{y:"-20vh",scale:1.2},{y:"20vh",scale:1,ease:"none",scrollTrigger:{trigger:n,scrub:!0,start:"top bottom",end:"bottom top"}})})})})}F(async()=>{await A()}),O(()=>{S?.revert(),S=null,v?.kill?.(),T.getAll().forEach(t=>t.kill())});{const t=W(()=>v);Q(t)}return(t,e)=>{const d=I,n=L,s=V;return c(),i("div",Z,[o("div",{ref_key:"navWrap",ref:$,class:"fixed top-0 left-0 w-full z-50"},[m(d,{dark:!0})],512),m(Y,{name:"fade",mode:"out-in",onAfterEnter:P},{default:k(()=>[p(y)?(c(),i("div",tt,[...e[1]||(e[1]=[o("p",{class:"text-text_color text-xl"},"Loading collections...",-1)])])):(c(),i("div",et,[o("div",ot,[(c(!0),i(G,null,U(p(_),(l,r)=>(c(),i("section",{key:l.id||r,class:j(["slide",`slide--${r%2+1}`])},[o("div",{class:"slide__bg",style:J({backgroundImage:`url(${l.element_one_image})`})},[...e[2]||(e[2]=[o("div",{class:"slide__overlay"},null,-1)])],4),o("div",nt,[o("div",st,[o("h2",lt,[o("span",rt,[o("span",it,X(l.name),1)])]),o("div",ct,[m(n,{to:`/collections/${encodeURIComponent(l.slug)}`,class:"btn btn--secondary"},{default:k(()=>[...e[3]||(e[3]=[o("span",{class:"btn__text"},"View Story",-1),o("span",{class:"btn__fill"},null,-1)])]),_:1},8,["to"])])]),r<p(_).length-1?(c(),i("button",{key:0,type:"button",class:"slide__scroll-btn",onClick:g=>q(r+1)},[e[4]||(e[4]=o("span",{class:"slide__scroll-line"},null,-1)),m(s,{name:"lucide:chevron-down",class:"slide__scroll-icon"})],8,at)):r===p(_).length-1&&p(_).length>1?(c(),i("button",{key:1,type:"button",class:"slide__scroll-btn",onClick:e[0]||(e[0]=g=>E())},[m(s,{name:"lucide:chevron-up",class:"slide__scroll-icon"}),e[5]||(e[5]=o("span",{class:"slide__scroll-line"},null,-1))])):M("",!0)])],2))),128))])]))]),_:1})])}}}),wt=N(_t,[["__scopeId","data-v-d56a53c3"]]);export{wt as default};
