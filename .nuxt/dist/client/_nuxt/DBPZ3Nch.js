import{_ as T}from"./D_8HQ_QA.js";import V from"./DaP3Ytd5.js";import{_ as F,g as E,r as z,z as v,c as r,o as c,F as k,h as $,j as B,a as s,i as R,v as H,t as x,n as C,b as L,y as O,x as W,l as G,a6 as q,e as J}from"#entry";import{u as D}from"./BcFdsnAY.js";import"./B1nRzeEK.js";import"./z-NzXbmE.js";const K={class:"overflow-y-auto pt-8 md:px-8 mt-6"},Q={key:0,class:"pb-10 md:pb-18"},U={class:"relative overflow-hidden"},X=["onClick","src","alt"],Y={class:"absolute top-3 right-3 text-[10px] md:text-xs tracking-widest bg-background_color/80 px-2 py-1"},Z={class:"pt-3 md:pt-4 text-left"},ee={class:"uppercase tracking-wider text-sm font-normal truncate"},te={class:"mt-1 flex items-center gap-2"},se=["onMouseenter","onMouseleave"],oe=["src","alt","onClick"],ne={key:0,class:"text-[10px] md:text-xs"},le={class:"mt-1 text-xs font-light"},ae={key:1,class:"py-6 md:py-14"},ce={class:"max-w-none md:max-w-7xl"},re={class:"uppercase tracking-wider text-xs md:text-sm mb-3"},ie={class:"flex flex-col max-w"},ue={__name:"CollectionShopListing",props:{products:{type:Array,default:()=>[]},collection:{type:Object,default:()=>({})}},setup(S){const i=S,m=E(),p=z(null),f=z({});function _(e,n){return f.value[e.slug]===n.variant_slug}function u(e,n){p.value=e.slug,e.currentImage=n.avatar_image,f.value[e.slug]=n.variant_slug}function y(e){e.currentImage=e.defaultImage||e.link_image,f.value[e.slug]=null,p.value=null}function h(e,n){!e||!n||m.push(`/product/${e}/${n}`)}function j(e=[]){return e.slice(0,2)}function b(e=[]){return Math.max(0,e.length-2)}const w=v(()=>{const e=i.collection||{},n=[e.element_one,e.element_two,e.element_three,e.element_four].filter(Boolean);return n.length?n:[""]}),I=v(()=>{const e=[...i.products],n=[];let d=0,o=0;const l=[{type:"grid",count:3},{type:"text"},{type:"grid",count:2},{type:"grid",count:3},{type:"text"},{type:"grid",count:2},{type:"text"},{type:"grid",count:3}];let t=0;for(;d<e.length;){const a=l[t];if(a.type==="grid"){if(d>=e.length)break;const g=e.slice(d,d+a.count);if(!g.length)break;n.push({type:"grid",count:a.count,items:g}),d+=g.length}else a.type==="text"&&d<e.length&&(n.push({type:"text",heading:A(o),text:w.value[o%w.value.length]}),o++);t=(t+1)%l.length}return n});function M(e=""){return e.split(new RegExp("(?<=[.!?])\\s+|\\n+")).filter(Boolean)}function A(e){const n=i.collection?.name||"Collection";return e===0?`${n}`:`${n} — ${e+1}`}return(e,n)=>{const d=V;return c(),r("section",K,[(c(!0),r(k,null,$(I.value,(o,l)=>(c(),r("div",{key:l},[o.type==="grid"?(c(),r("div",Q,[s("div",{class:C(["grid gap-x-8 md:gap-x-12 gap-y-16 md:gap-y-14",o.count===3?"grid-cols-2 md:grid-cols-3":"grid-cols-2 md:grid-cols-2"])},[(c(!0),r(k,null,$(o.items,t=>(c(),r("article",{key:t.slug,class:"group cursor-pointer"},[s("div",U,[s("img",{onClick:a=>h(t.slug,t.colors?.[0]?.variant_slug),src:t.currentImage||t.link_image,alt:t.alt_text||t.name,class:"w-full h-full object-cover",loading:"lazy"},null,8,X),R(s("span",Y,"VIEW",512),[[H,p.value===t.slug]])]),s("div",Z,[s("h3",ee,x(t.name),1),s("div",te,[(c(!0),r(k,null,$(j(t.colors),(a,g)=>(c(),r("div",{key:a.variant_slug||g,class:"relative",onMouseenter:N=>u(t,a),onMouseleave:N=>y(t)},[s("img",{src:a.avatar_image,alt:a.color,class:"h-8 w-8 object-cover border border-project_black/40",loading:"lazy",onClick:N=>h(t.slug,a.variant_slug)},null,8,oe),s("div",{class:C(["absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color",_(t,a)?"opacity-100":"opacity-0"])},[L(d,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto"})],2)],40,se))),128)),b(t.colors)>0?(c(),r("span",ne,"+"+x(b(t.colors)),1)):B("",!0)]),s("p",le,"€"+x(parseFloat(t.price).toFixed(2)),1)])]))),128))],2)])):o.type==="text"?(c(),r("div",ae,[s("div",ce,[s("h4",re,x(o.heading),1),s("div",ie,[(c(!0),r(k,null,$(M(o.text),(t,a)=>(c(),r("span",{key:a,class:"px-3 py-1 my-1 text-sm md:text-base leading-relaxed tracking-wide max-w-4xl bg-text_color text-background_color"},x(t),1))),128))])])])):B("",!0)]))),128))])}}},de=F(ue,[["__scopeId","data-v-46120738"]]),pe={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-8 py-6 gap-6 border-b border-text_color/30"},_e={class:"w-full md:w-1/2 flex flex-col"},ge={class:"flex gap-3 justify-end w-full"},me={class:"flex items-center gap-3"},xe={class:"text-md uppercase tracking-widest space-x-2 text-background_color px-4"},ve={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-8 pt-1 gap-6"},fe={class:"flex justify-end w-full"},he={class:"flex items-center"},P="http://127.0.0.1:8000",ye=48,be={__name:"[...slug]",async setup(S){let i,m;const p=O(),f=W(),_=v(()=>String(p.params.slug)),u=z(p.query.gender==="male"?"male":"female");G(()=>p.query.gender,o=>{const l=o==="male"?"male":"female";u.value!==l&&(u.value=l)},{immediate:!0});function y(o){u.value!==o&&(u.value=o,f.replace({query:{...p.query,gender:o}}))}function h(o){return["pl-8 py-1 text-sm text-text_color",u.value===o?"font-bold":"bg-background_color"].join(" ")}const{data:j,pending:b}=([i,m]=q(()=>D(()=>`collection:${_.value}`,()=>$fetch(`${P}/public/collections/${_.value}/`),"$TvI3f2lA28")),i=await i,m(),i),{data:w,pending:I,refresh:M}=([i,m]=q(async()=>D(()=>`products-all:${_.value}:${u.value}`,async()=>{let o=`${P}/public/products-all/?page=1&page_size=${ye}&collection=${_.value}&gender=${u.value}`;const l=[];for(;o;){const t=await $fetch(o);Array.isArray(t?.results)&&l.push(...t.results),o=t?.next||null}return l},{watch:[_,u]})),i=await i,m(),i),A=v(()=>b.value||I.value),e=v(()=>j.value||{}),n=v(()=>w.value||[]);function d(){window.scrollTo({top:0,behavior:"smooth"})}return(o,l)=>{const t=T,a=de;return c(),r("section",null,[s("div",pe,[l[2]||(l[2]=s("div",{class:"w-full md:w-1/2"},[s("div",{class:"image bg-cover bg-center bg-transparent h-40 flex justify-center max-w-[100%]"})],-1)),s("div",_e,[L(t,{dark:!1}),s("div",ge,[s("div",me,[s("nav",xe,[s("p",null,x(e.value.name),1)])])])])]),s("div",ve,[s("div",fe,[s("div",he,[s("button",{class:C(h("female")),onClick:l[0]||(l[0]=g=>y("female"))},"WOMAN",2),s("button",{class:C(h("male")),onClick:l[1]||(l[1]=g=>y("male"))},"MAN",2)])])]),!A.value&&n.value.length?(c(),J(a,{key:0,products:n.value,collection:e.value,onCtaClick:d},null,8,["products","collection"])):B("",!0)])}}},Ae=F(be,[["__scopeId","data-v-5ff3aa35"]]);export{Ae as default};
