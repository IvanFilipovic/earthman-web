import{_ as E}from"./CroF-h7C.js";import H from"./CyiZNxQb.js";import{_ as W,g as L,r as S,z as w,c as r,o as l,F as b,h as k,j,a as s,i as P,v as T,n as $,t as f,b as A,y as R,x as F,l as O,a6 as D,e as G,C as J}from"#entry";import{u as V}from"./DbdCp0al.js";import"./WnQEzyIa.js";import"./j5A_PzG0.js";const K={class:"overflow-y-auto pt-8"},Q={key:0,class:"pb-10"},U={class:"grid grid-cols-2 md:grid-cols-4 gap-x-4 md:gap-x-8 lg:gap-x-24 gap-y-8"},X={class:"relative overflow-hidden"},Y=["onMouseenter","onClick","src","alt"],Z=["onClick"],ee={class:"pt-3 md:pt-4 text-left"},te={class:"text-xs tracking-wider font-extralight"},oe={class:"uppercase tracking-wider text-sm font-normal truncate py-1"},se={class:"mt-1 flex items-center gap-2"},ne=["onMouseenter","onMouseleave"],le=["src","alt","onClick"],ae={key:0,class:"text-[10px] md:text-xs"},re={class:"col-span-2 flex flex-col justify-center"},ce={class:"uppercase tracking-wider text-xs md:text-sm mb-3"},ue={class:"flex flex-col"},ie={key:1,class:"pb-10"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-x-4 md:gap-x-8 lg:gap-x-24 gap-y-8"},ge={class:"relative overflow-hidden"},pe=["onMouseenter","onClick","src","alt"],_e=["onClick"],ve={class:"pt-3 md:pt-4 text-left"},xe={class:"text-xs tracking-wider font-extralight"},he={class:"uppercase tracking-wider text-sm font-normal truncate py-1"},fe={class:"mt-1 flex items-center gap-2"},me=["onMouseenter","onMouseleave"],ye=["onMouseenter","src","alt","onClick"],be={key:0,class:"text-[10px] md:text-xs"},ke={__name:"CollectionShopListing",props:{products:{type:Array,default:()=>[]},collection:{type:Object,default:()=>({})}},setup(q){const d=q,m=L(),c=S(null),v=S({});function M(o,n){return v.value[o.slug]===n.variant_slug}function x(o,n){c.value=o.slug,o.currentImage=n.avatar_image,v.value[o.slug]=n.variant_slug}function p(o){o.currentImage=o.defaultImage||o.link_image,v.value[o.slug]=null,c.value=null}function _(o,n){!o||!n||m.push(`/product/${o}/${n}`)}function C(o=[]){return o.slice(0,2)}function y(o=[]){return Math.max(0,o.length-2)}const I=w(()=>{const o=d.collection||{},n=[o.element_one,o.element_two,o.element_three,o.element_four].filter(Boolean);return n.length?n:[""]}),z=w(()=>{const o=[...d.products],n=o.filter(u=>u.hot===!0),h=o.filter(u=>!u.hot),g=[];let a=0,e=0,t=0;for(;e<h.length||t<n.length;){const u=h.slice(e,e+2);u.length>0&&(g.push({type:"gridWithText",items:u,text:I.value[a%I.value.length],heading:N(a)}),e+=u.length,a++);const i=n.slice(t,t+2);i.length>0&&(g.push({type:"gridHot",items:i}),t+=i.length)}return g});function B(o=""){return o.split(new RegExp("(?<=[.!?])\\s+|\\n+")).filter(Boolean)}function N(o){const n=d.collection?.name||"Collection";return o===0?n:`${n} â€” ${o+1}`}return(o,n)=>{const h=H;return l(),r("section",K,[(l(!0),r(b,null,k(z.value,(g,a)=>(l(),r("div",{key:a},[g.type==="gridWithText"?(l(),r("div",Q,[s("div",U,[(l(!0),r(b,null,k(g.items,e=>(l(),r("article",{key:e.slug,class:"group cursor-pointer md:col-span-1"},[s("div",X,[s("img",{onMouseenter:t=>c.value=e.slug,onMouseleave:n[0]||(n[0]=t=>c.value=null),onClick:t=>_(e.slug,e.colors?.[0]?.variant_slug),src:e.currentImage||e.link_image,alt:e.alt_text||e.name,class:"w-full h-full object-cover border border-text_color/30",loading:"lazy"},null,40,Y),P(s("button",{class:$(["absolute top-4 left-4 bg-text_color text-background_color tracking-wider text-xs font-light w-auto px-2 mx-auto opacity-0 transition-opacity duration-200",{"opacity-100":c.value===e.slug}]),onClick:t=>_(e.slug,e.colors?.[0]?.variant_slug)}," VIEW ",10,Z),[[T,c.value===e.slug]])]),s("div",ee,[s("p",te,f(e.category),1),s("h3",oe,f(e.name),1),s("div",se,[(l(!0),r(b,null,k(C(e.colors),(t,u)=>(l(),r("div",{key:t.variant_slug||u,class:"relative",onMouseenter:i=>x(e,t),onMouseleave:i=>p(e)},[s("img",{src:t.avatar_image,alt:t.color,class:"h-8 w-8 object-cover border border-project_black/40",loading:"lazy",onClick:i=>_(e.slug,t.variant_slug)},null,8,le),s("div",{class:$(["absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color",M(e,t)?"opacity-100":"opacity-0"])},[A(h,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto"})],2)],40,ne))),128)),y(e.colors)>0?(l(),r("span",ae,"+"+f(y(e.colors)),1)):j("",!0)])])]))),128)),s("div",re,[s("h4",ce,f(g.heading),1),s("div",ue,[(l(!0),r(b,null,k(B(g.text),(e,t)=>(l(),r("span",{key:t,class:"px-3 py-1 my-1 text-sm md:text-base leading-relaxed tracking-wide max-w-4xl bg-text_color text-background_color"},f(e),1))),128))])])])])):g.type==="gridHot"?(l(),r("div",ie,[s("div",de,[(l(!0),r(b,null,k(g.items,e=>(l(),r("article",{key:e.slug,class:"group cursor-pointer"},[s("div",ge,[s("img",{onMouseenter:t=>c.value=e.slug,onMouseleave:n[1]||(n[1]=t=>c.value=null),onClick:t=>_(e.slug,e.colors?.[0]?.variant_slug),src:e.currentImage||e.link_image,alt:e.alt_text||e.name,class:"w-full h-full object-cover border border-text_color/30",loading:"lazy"},null,40,pe),P(s("button",{class:$(["absolute top-4 left-4 bg-text_color text-background_color tracking-wider text-xs font-light w-auto px-2 mx-auto opacity-0 transition-opacity duration-200",{"opacity-100":c.value===e.slug}]),onClick:t=>_(e.slug,e.colors?.[0]?.variant_slug)}," VIEW ",10,_e),[[T,c.value===e.slug]])]),s("div",ve,[s("p",xe,f(e.category),1),s("h3",he,f(e.name),1),s("div",fe,[(l(!0),r(b,null,k(C(e.colors),(t,u)=>(l(),r("div",{key:t.variant_slug||u,class:"relative",onMouseenter:i=>x(e,t),onMouseleave:i=>p(e)},[s("img",{onMouseenter:i=>c.value=e.slug,onMouseleave:n[2]||(n[2]=i=>c.value=null),src:t.avatar_image,alt:t.color,class:"h-8 w-8 object-cover border border-project_black/40",loading:"lazy",onClick:i=>_(e.slug,t.variant_slug)},null,40,ye),s("div",{class:$(["absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color",M(e,t)?"opacity-100":"opacity-0"])},[A(h,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto"})],2)],40,me))),128)),y(e.colors)>0?(l(),r("span",be,"+"+f(y(e.colors)),1)):j("",!0)])])]))),128))])])):j("",!0)]))),128))])}}},we=W(ke,[["__scopeId","data-v-8c136fba"]]),$e={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 pt-4 gap-6"},Ce={class:"flex justify-start w-full"},Me={class:"flex items-center"},Ie=48,je={__name:"[...slug]",async setup(q){let d,m;const c=J(),v=R(),M=F(),x=w(()=>String(v.params.slug)),p=S(v.query.gender==="male"?"male":"female");O(()=>v.query.gender,a=>{const e=a==="male"?"male":"female";p.value!==e&&(p.value=e)},{immediate:!0});function _(a){p.value!==a&&(p.value=a,M.replace({query:{...v.query,gender:a}}))}function C(a){return["pr-8 py-1 text-sm text-text_color",p.value===a?"font-bold":"bg-background_color"].join(" ")}const{data:y,pending:I}=([d,m]=D(()=>V(()=>`collection:${x.value}`,()=>$fetch(`${c.public.apiBase}/public/collections/${x.value}/`),"$TvI3f2lA28")),d=await d,m(),d),{data:z,pending:B,refresh:N}=([d,m]=D(async()=>V(()=>`products-all:${x.value}:${p.value}`,async()=>{let a=`${c.public.apiBase}/public/products-all/?page=1&page_size=${Ie}&collection=${x.value}&gender=${p.value}`;const e=[];for(;a;){const t=await $fetch(a);Array.isArray(t?.results)&&e.push(...t.results),a=t?.next||null}return e},{watch:[x,p]})),d=await d,m(),d),o=w(()=>I.value||B.value),n=w(()=>y.value||{}),h=w(()=>z.value||[]);function g(){window.scrollTo({top:0,behavior:"smooth"})}return(a,e)=>{const t=E,u=we;return l(),r("section",null,[A(t,{dark:!1}),s("div",$e,[s("div",Ce,[s("div",Me,[s("button",{class:$(C("female")),onClick:e[0]||(e[0]=i=>_("female"))},"WOMAN",2),s("button",{class:$(C("male")),onClick:e[1]||(e[1]=i=>_("male"))},"MAN",2)])])]),!o.value&&h.value.length?(l(),G(u,{key:0,class:"mt-2 md:mt-6 px-4 md:px-8",products:h.value,collection:n.value,onCtaClick:g},null,8,["products","collection"])):j("",!0)])}}},Pe=W(je,[["__scopeId","data-v-b28a0b9c"]]);export{Pe as default};
