import{_ as P}from"./DeTpEGno.js";import R from"./Bgd9iGY4.js";import{_ as F,g as T,r as z,z as v,c,o as a,F as $,h as C,j as S,a as s,i as V,v as E,t as f,n as j,b as L,y as H,x as O,l as W,a6 as q,e as G,C as J}from"#entry";import{u as D}from"./CRqZwjru.js";import"./BEOIw1i4.js";import"./oMAzNrXO.js";const K={class:"overflow-y-auto pt-8 md:px-8 mt-6"},Q={key:0,class:"pb-10 md:pb-18"},U={class:"relative overflow-hidden"},X=["onClick","src","alt"],Y={class:"absolute top-3 right-3 text-[10px] md:text-xs tracking-widest bg-background_color/80 px-2 py-1"},Z={class:"pt-3 md:pt-4 text-left"},ee={class:"uppercase tracking-wider text-sm font-normal truncate"},te={class:"mt-1 flex items-center gap-2"},se=["onMouseenter","onMouseleave"],oe=["src","alt","onClick"],ne={key:0,class:"text-[10px] md:text-xs"},le={class:"mt-1 text-xs font-light"},ae={key:1,class:"py-6 md:py-14"},ce={class:"max-w-none md:max-w-7xl"},re={class:"uppercase tracking-wider text-xs md:text-sm mb-3"},ie={class:"flex flex-col max-w"},ue={__name:"CollectionShopListing",props:{products:{type:Array,default:()=>[]},collection:{type:Object,default:()=>({})}},setup(M){const r=M,m=T(),x=z(null),p=z({});function B(t,o){return p.value[t.slug]===o.variant_slug}function _(t,o){x.value=t.slug,t.currentImage=o.avatar_image,p.value[t.slug]=o.variant_slug}function d(t){t.currentImage=t.defaultImage||t.link_image,p.value[t.slug]=null,x.value=null}function h(t,o){!t||!o||m.push(`/product/${t}/${o}`)}function y(t=[]){return t.slice(0,2)}function b(t=[]){return Math.max(0,t.length-2)}const w=v(()=>{const t=r.collection||{},o=[t.element_one,t.element_two,t.element_three,t.element_four].filter(Boolean);return o.length?o:[""]}),I=v(()=>{const t=[...r.products],o=[];let u=0,i=0;const l=[{type:"grid",count:3},{type:"text"},{type:"grid",count:2},{type:"grid",count:3},{type:"text"},{type:"grid",count:2},{type:"text"},{type:"grid",count:3}];let e=0;for(;u<t.length;){const n=l[e];if(n.type==="grid"){if(u>=t.length)break;const g=t.slice(u,u+n.count);if(!g.length)break;o.push({type:"grid",count:n.count,items:g}),u+=g.length}else n.type==="text"&&u<t.length&&(o.push({type:"text",heading:N(i),text:w.value[i%w.value.length]}),i++);e=(e+1)%l.length}return o});function A(t=""){return t.split(new RegExp("(?<=[.!?])\\s+|\\n+")).filter(Boolean)}function N(t){const o=r.collection?.name||"Collection";return t===0?`${o}`:`${o} — ${t+1}`}return(t,o)=>{const u=R;return a(),c("section",K,[(a(!0),c($,null,C(I.value,(i,l)=>(a(),c("div",{key:l},[i.type==="grid"?(a(),c("div",Q,[s("div",{class:j(["grid gap-x-8 md:gap-x-12 gap-y-16 md:gap-y-14",i.count===3?"grid-cols-2 md:grid-cols-3":"grid-cols-2 md:grid-cols-2"])},[(a(!0),c($,null,C(i.items,e=>(a(),c("article",{key:e.slug,class:"group cursor-pointer"},[s("div",U,[s("img",{onClick:n=>h(e.slug,e.colors?.[0]?.variant_slug),src:e.currentImage||e.link_image,alt:e.alt_text||e.name,class:"w-full h-full object-cover",loading:"lazy"},null,8,X),V(s("span",Y,"VIEW",512),[[E,x.value===e.slug]])]),s("div",Z,[s("h3",ee,f(e.name),1),s("div",te,[(a(!0),c($,null,C(y(e.colors),(n,g)=>(a(),c("div",{key:n.variant_slug||g,class:"relative",onMouseenter:k=>_(e,n),onMouseleave:k=>d(e)},[s("img",{src:n.avatar_image,alt:n.color,class:"h-8 w-8 object-cover border border-project_black/40",loading:"lazy",onClick:k=>h(e.slug,n.variant_slug)},null,8,oe),s("div",{class:j(["absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color",B(e,n)?"opacity-100":"opacity-0"])},[L(u,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto"})],2)],40,se))),128)),b(e.colors)>0?(a(),c("span",ne,"+"+f(b(e.colors)),1)):S("",!0)]),s("p",le,"€"+f(parseFloat(e.price).toFixed(2)),1)])]))),128))],2)])):i.type==="text"?(a(),c("div",ae,[s("div",ce,[s("h4",re,f(i.heading),1),s("div",ie,[(a(!0),c($,null,C(A(i.text),(e,n)=>(a(),c("span",{key:n,class:"px-3 py-1 my-1 text-sm md:text-base leading-relaxed tracking-wide max-w-4xl bg-text_color text-background_color"},f(e),1))),128))])])])):S("",!0)]))),128))])}}},de=F(ue,[["__scopeId","data-v-46120738"]]),pe={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-8 py-6 gap-6 border-b border-text_color/30"},_e={class:"w-full md:w-1/2 flex flex-col"},ge={class:"flex gap-3 justify-end w-full"},me={class:"flex items-center gap-3"},xe={class:"text-md uppercase tracking-widest space-x-2 text-background_color px-4"},fe={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-8 pt-1 gap-6"},ve={class:"flex justify-end w-full"},he={class:"flex items-center"},ye=48,be={__name:"[...slug]",async setup(M){let r,m;const x=J(),p=H(),B=O(),_=v(()=>String(p.params.slug)),d=z(p.query.gender==="male"?"male":"female");W(()=>p.query.gender,l=>{const e=l==="male"?"male":"female";d.value!==e&&(d.value=e)},{immediate:!0});function h(l){d.value!==l&&(d.value=l,B.replace({query:{...p.query,gender:l}}))}function y(l){return["pl-8 py-1 text-sm text-text_color",d.value===l?"font-bold":"bg-background_color"].join(" ")}const{data:b,pending:w}=([r,m]=q(()=>D(()=>`collection:${_.value}`,()=>$fetch(`${x.public.apiBase}/public/collections/${_.value}/`),"$TvI3f2lA28")),r=await r,m(),r),{data:I,pending:A,refresh:N}=([r,m]=q(async()=>D(()=>`products-all:${_.value}:${d.value}`,async()=>{let l=`${x.public.apiBase}/public/products-all/?page=1&page_size=${ye}&collection=${_.value}&gender=${d.value}`;const e=[];for(;l;){const n=await $fetch(l);Array.isArray(n?.results)&&e.push(...n.results),l=n?.next||null}return e},{watch:[_,d]})),r=await r,m(),r),t=v(()=>w.value||A.value),o=v(()=>b.value||{}),u=v(()=>I.value||[]);function i(){window.scrollTo({top:0,behavior:"smooth"})}return(l,e)=>{const n=P,g=de;return a(),c("section",null,[s("div",pe,[e[2]||(e[2]=s("div",{class:"w-full md:w-1/2"},[s("div",{class:"image bg-cover bg-center bg-transparent h-40 flex justify-center max-w-[100%]"})],-1)),s("div",_e,[L(n,{dark:!1}),s("div",ge,[s("div",me,[s("nav",xe,[s("p",null,f(o.value.name),1)])])])])]),s("div",fe,[s("div",ve,[s("div",he,[s("button",{class:j(y("female")),onClick:e[0]||(e[0]=k=>h("female"))},"WOMAN",2),s("button",{class:j(y("male")),onClick:e[1]||(e[1]=k=>h("male"))},"MAN",2)])])]),!t.value&&u.value.length?(a(),G(g,{key:0,products:u.value,collection:o.value,onCtaClick:i},null,8,["products","collection"])):S("",!0)])}}},Ie=F(be,[["__scopeId","data-v-8e8a51fd"]]);export{Ie as default};
