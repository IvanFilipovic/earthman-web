import{d as z,f as B,_ as I}from"#entry";import{_ as P}from"./Bf9gXHVU.js";import{_ as N}from"./bnelyH8B.js";import V from"./Cayf0jz7.js";import{u as L,aa as D,b as p,v as G,o as R,y as a,a0 as t,L as f,G as g,V as w,T as U,U as i,I as W,a3 as F,a7 as O,a9 as j,a4 as M,a1 as Y,D as H}from"./C_FQlwfs.js";import{g as c}from"./DKtf60Sy.js";import{S as T}from"./Duwiz9RP.js";import{S as J}from"./CZpAVE0J.js";import"./D1fZegAR.js";const K={class:"collections-page"},Q={key:"loading",class:"fixed inset-0 flex items-center justify-center bg-background_color z-40"},X={key:"content",id:"smooth-wrapper"},Z={id:"smooth-content"},tt={class:"slide__content"},et={class:"slide__content-inner"},ot={class:"slide__title"},nt={class:"slide__title-line"},st={class:"line__inner"},rt={class:"slide__cta"},lt=["onClick"],at=L({__name:"index",async setup(it){let d,b,_=null;try{_=([d,b]=D(()=>z(()=>import("./Duwiz9RP.js").then(o=>o.a),[],import.meta.url)),d=await d,b(),d).ScrollSmoother}catch{}c.registerPlugin(T,J),_&&c.registerPlugin(_);const C=B(),E=p(null),h=p(!1),y=p(!0),m=p([]);let x=null,v=null;function $(o){const e=document.querySelector(`.slide:nth-child(${o+1})`);e&&c.to(window,{duration:1.2,scrollTo:{y:e,offsetY:0},ease:"power2.inOut"})}async function q(){try{y.value=!0;const o=await $fetch(`${C.public.apiBase}/public/collections/`);m.value=o||[]}catch(o){console.error("Failed to fetch collections:",o),m.value=[]}finally{y.value=!1}}function A(){H(()=>{const o=document.querySelector("#smooth-wrapper"),e=document.querySelector("#smooth-content"),u=document.querySelectorAll(".slide");if(!o||!e||u.length===0){console.error("Elements not found for GSAP initialization");return}v=c.context(()=>{if(_)try{x=_.create({smooth:1.5,effects:!0,normalizeScroll:!0,smoothTouch:.2,wrapper:"#smooth-wrapper",content:"#smooth-content"})}catch(n){console.error("ScrollSmoother error:",n)}u.forEach((n,r)=>{const s=c.timeline({scrollTrigger:{trigger:n,start:"top 60%",end:"bottom 40%",onEnter:()=>{h.value=r%2===0},onEnterBack:()=>{h.value=r%2===0}}}),l=n.querySelector(".line__inner"),S=n.querySelector(".btn"),k=n.querySelector(".slide__scroll-btn");l&&s.from(l,{y:120,duration:1.4,ease:"power4.out"}),S&&s.from(S,{y:80,opacity:0,duration:1.2,ease:"power4.out"},.2),k&&s.from(k,{y:40,opacity:0,duration:1,ease:"power4.out"},.3)}),u.forEach(n=>{const r=n.querySelector(".slide__bg");r&&c.fromTo(r,{y:"-20vh",scale:1.2},{y:"20vh",scale:1,ease:"none",scrollTrigger:{trigger:n,scrub:!0,start:"top bottom",end:"bottom top"}})})})})}return G(async()=>{await q()}),R(()=>{v?.revert(),v=null,x?.kill?.(),T.getAll().forEach(o=>o.kill())}),(o,e)=>{const u=P,n=N,r=V;return i(),a("div",K,[t("div",{ref_key:"navWrap",ref:E,class:"fixed top-0 left-0 w-full z-50"},[f(u,{dark:g(h)},null,8,["dark"])],512),f(U,{name:"fade",mode:"out-in",onAfterEnter:A},{default:w(()=>[g(y)?(i(),a("div",Q,[...e[0]||(e[0]=[t("p",{class:"text-text_color text-xl"},"Loading collections...",-1)])])):(i(),a("div",X,[t("div",Z,[(i(!0),a(W,null,F(g(m),(s,l)=>(i(),a("section",{key:s.id||l,class:O(["slide",`slide--${l%2+1}`])},[t("div",{class:"slide__bg",style:j({backgroundImage:`url(${s.element_one_image})`})},[...e[1]||(e[1]=[t("div",{class:"slide__overlay"},null,-1)])],4),t("div",tt,[t("div",et,[t("h2",ot,[t("span",nt,[t("span",st,Y(s.name),1)])]),t("div",rt,[f(n,{to:`/collections/${encodeURIComponent(s.slug)}`,class:"btn btn--secondary"},{default:w(()=>[...e[2]||(e[2]=[t("span",{class:"btn__text"},"View Story",-1),t("span",{class:"btn__fill"},null,-1)])]),_:1},8,["to"])])]),l<g(m).length-1?(i(),a("button",{key:0,type:"button",class:"slide__scroll-btn",onClick:S=>$(l+1)},[e[3]||(e[3]=t("span",{class:"slide__scroll-line"},null,-1)),f(r,{name:"lucide:chevron-down",class:"slide__scroll-icon"})],8,lt)):M("",!0)])],2))),128))])]))]),_:1})])}}}),yt=I(at,[["__scopeId","data-v-2e72a592"]]);export{yt as default};
