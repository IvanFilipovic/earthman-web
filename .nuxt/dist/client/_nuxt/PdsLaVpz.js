import{i as se,n as fe,P as Q,N as L,E as re,q as Pe,a as $e,b as Se,w as Ve,c as Ce,h as Ne,d as H,T as te,e as Fe,_ as Ee,u as Ie}from"./CBhFnRZX.js";import{_ as Te}from"./BlJWFypG.js";import{C as Z,k as I,D as ae,M as _e,b as B,p as ne,y as z,L as X,G as ye,i as ie,W as Re,Y as f,J as u,X as y,a3 as e,N as p,V as D,T,F as b,a7 as R,a4 as v,a8 as M,r as Ae,a6 as ce,a5 as pe,a9 as De,aa as Be}from"./DY7e6STM.js";import{p as be,_ as Oe,h as xe,f as je,n as me}from"#entry";import{F as A,E as Ue,a as qe}from"./CtbGHddI.js";import Ge from"./mbTednRk.js";import{i as J,o as c,A as de,f as le,u as oe,a as Y,l as Le,b as ee,N as ve,t as He,c as W}from"./CeOnvSk8.js";import{s as ze}from"./SAGV2Mk_.js";var Ke=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(Ke||{});let ge=Symbol("PopoverContext");function ue(a){let N=ie(ge,null);if(N===null){let w=new Error(`<${a} /> is missing a parent <${we.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(w,ue),w}return N}let Ye=Symbol("PopoverGroupContext");function he(){return ie(Ye,null)}let ke=Symbol("PopoverPanelContext");function Qe(){return ie(ke,null)}let we=Z({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(a,{slots:N,attrs:w,expose:P}){var C;let $=B(null);P({el:$,$el:$});let n=B(1),i=B(null),O=B(null),F=B(null),m=B(null),t=I(()=>se($)),l=I(()=>{var o,r;if(!c(i)||!c(m))return!1;for(let K of document.querySelectorAll("body > *"))if(Number(K?.contains(c(i)))^Number(K?.contains(c(m))))return!0;let d=re(),h=d.indexOf(c(i)),j=(h+d.length-1)%d.length,U=(h+1)%d.length,k=d[j],V=d[U];return!((o=c(m))!=null&&o.contains(k))&&!((r=c(m))!=null&&r.contains(V))}),s={popoverState:n,buttonId:B(null),panelId:B(null),panel:m,button:i,isPortalled:l,beforePanelSentinel:O,afterPanelSentinel:F,togglePopover(){n.value=W(n.value,{0:1,1:0})},closePopover(){n.value!==1&&(n.value=1)},close(o){s.closePopover();let r=o?o instanceof HTMLElement?o:o.value instanceof HTMLElement?c(o):c(s.button):c(s.button);r?.focus()}};ye(ge,s),He(I(()=>W(n.value,{0:ee.Open,1:ee.Closed})));let S={buttonId:s.buttonId,panelId:s.panelId,close(){s.closePopover()}},E=he(),q=E?.registerPopover,[G,x]=Pe(),g=$e({mainTreeNodeRef:E?.mainTreeNodeRef,portals:G,defaultContainers:[i,m]});function _(){var o,r,d,h;return(h=E?.isFocusWithinPopoverGroup())!=null?h:((o=t.value)==null?void 0:o.activeElement)&&(((r=c(i))==null?void 0:r.contains(t.value.activeElement))||((d=c(m))==null?void 0:d.contains(t.value.activeElement)))}return ne(()=>q?.(S)),Se((C=t.value)==null?void 0:C.defaultView,"focus",o=>{var r,d;o.target!==window&&o.target instanceof HTMLElement&&n.value===0&&(_()||i&&m&&(g.contains(o.target)||(r=c(s.beforePanelSentinel))!=null&&r.contains(o.target)||(d=c(s.afterPanelSentinel))!=null&&d.contains(o.target)||s.closePopover()))},!0),Ve(g.resolveContainers,(o,r)=>{var d;s.closePopover(),Ce(r,Ne.Loose)||(o.preventDefault(),(d=c(i))==null||d.focus())},I(()=>n.value===0)),()=>{let o={open:n.value===0,close:s.close};return z(X,[z(x,{},()=>de({theirProps:{...a,...w},ourProps:{ref:$},slot:o,slots:N,attrs:w,name:"Popover"})),z(g.MainTreeNode)])}}}),We=Z({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(a,{attrs:N,slots:w,expose:P}){var C;let $=(C=a.id)!=null?C:`headlessui-popover-button-${J()}`,n=ue("PopoverButton"),i=I(()=>se(n.button));P({el:n.button,$el:n.button}),ae(()=>{n.buttonId.value=$}),_e(()=>{n.buttonId.value=null});let O=he(),F=O?.closeOthers,m=Qe(),t=I(()=>m===null?!1:m.value===n.panelId.value),l=B(null),s=`headlessui-focus-sentinel-${J()}`;t.value||ne(()=>{n.button.value=c(l)});let S=ze(I(()=>({as:a.as,type:N.type})),l);function E(o){var r,d,h,j,U;if(t.value){if(n.popoverState.value===1)return;switch(o.key){case Y.Space:case Y.Enter:o.preventDefault(),(d=(r=o.target).click)==null||d.call(r),n.closePopover(),(h=c(n.button))==null||h.focus();break}}else switch(o.key){case Y.Space:case Y.Enter:o.preventDefault(),o.stopPropagation(),n.popoverState.value===1&&F?.(n.buttonId.value),n.togglePopover();break;case Y.Escape:if(n.popoverState.value!==0)return F?.(n.buttonId.value);if(!c(n.button)||(j=i.value)!=null&&j.activeElement&&!((U=c(n.button))!=null&&U.contains(i.value.activeElement)))return;o.preventDefault(),o.stopPropagation(),n.closePopover();break}}function q(o){t.value||o.key===Y.Space&&o.preventDefault()}function G(o){var r,d;a.disabled||(t.value?(n.closePopover(),(r=c(n.button))==null||r.focus()):(o.preventDefault(),o.stopPropagation(),n.popoverState.value===1&&F?.(n.buttonId.value),n.togglePopover(),(d=c(n.button))==null||d.focus()))}function x(o){o.preventDefault(),o.stopPropagation()}let g=fe();function _(){let o=c(n.panel);if(!o)return;function r(){W(g.value,{[H.Forwards]:()=>Q(o,L.First),[H.Backwards]:()=>Q(o,L.Last)})===te.Error&&Q(re().filter(d=>d.dataset.headlessuiFocusGuard!=="true"),W(g.value,{[H.Forwards]:L.Next,[H.Backwards]:L.Previous}),{relativeTo:c(n.button)})}r()}return()=>{let o=n.popoverState.value===0,r={open:o},{...d}=a,h=t.value?{ref:l,type:S.value,onKeydown:E,onClick:G}:{ref:l,id:$,type:S.value,"aria-expanded":n.popoverState.value===0,"aria-controls":c(n.panel)?n.panelId.value:void 0,disabled:a.disabled?!0:void 0,onKeydown:E,onKeyup:q,onClick:G,onMousedown:x};return z(X,[de({ourProps:h,theirProps:{...N,...d},slot:r,attrs:N,slots:w,name:"PopoverButton"}),o&&!t.value&&n.isPortalled.value&&z(le,{id:s,features:oe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:_})])}}}),Je=Z({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(a,{attrs:N,slots:w,expose:P}){var C;let $=(C=a.id)!=null?C:`headlessui-popover-panel-${J()}`,{focus:n}=a,i=ue("PopoverPanel"),O=I(()=>se(i.panel)),F=`headlessui-focus-sentinel-before-${J()}`,m=`headlessui-focus-sentinel-after-${J()}`;P({el:i.panel,$el:i.panel}),ae(()=>{i.panelId.value=$}),_e(()=>{i.panelId.value=null}),ye(ke,i.panelId),ne(()=>{var x,g;if(!n||i.popoverState.value!==0||!i.panel)return;let _=(x=O.value)==null?void 0:x.activeElement;(g=c(i.panel))!=null&&g.contains(_)||Q(c(i.panel),L.First)});let t=Le(),l=I(()=>t!==null?(t.value&ee.Open)===ee.Open:i.popoverState.value===0);function s(x){var g,_;switch(x.key){case Y.Escape:if(i.popoverState.value!==0||!c(i.panel)||O.value&&!((g=c(i.panel))!=null&&g.contains(O.value.activeElement)))return;x.preventDefault(),x.stopPropagation(),i.closePopover(),(_=c(i.button))==null||_.focus();break}}function S(x){var g,_,o,r,d;let h=x.relatedTarget;h&&c(i.panel)&&((g=c(i.panel))!=null&&g.contains(h)||(i.closePopover(),((o=(_=c(i.beforePanelSentinel))==null?void 0:_.contains)!=null&&o.call(_,h)||(d=(r=c(i.afterPanelSentinel))==null?void 0:r.contains)!=null&&d.call(r,h))&&h.focus({preventScroll:!0})))}let E=fe();function q(){let x=c(i.panel);if(!x)return;function g(){W(E.value,{[H.Forwards]:()=>{var _;Q(x,L.First)===te.Error&&((_=c(i.afterPanelSentinel))==null||_.focus())},[H.Backwards]:()=>{var _;(_=c(i.button))==null||_.focus({preventScroll:!0})}})}g()}function G(){let x=c(i.panel);if(!x)return;function g(){W(E.value,{[H.Forwards]:()=>{let _=c(i.button),o=c(i.panel);if(!_)return;let r=re(),d=r.indexOf(_),h=r.slice(0,d+1),j=[...r.slice(d+1),...h];for(let U of j.slice())if(U.dataset.headlessuiFocusGuard==="true"||o!=null&&o.contains(U)){let k=j.indexOf(U);k!==-1&&j.splice(k,1)}Q(j,L.First,{sorted:!1})},[H.Backwards]:()=>{var _;Q(x,L.Previous)===te.Error&&((_=c(i.button))==null||_.focus())}})}g()}return()=>{let x={open:i.popoverState.value===0,close:i.close},{focus:g,..._}=a,o={ref:i.panel,id:$,onKeydown:s,onFocusout:n&&i.popoverState.value===0?S:void 0,tabIndex:-1};return de({ourProps:o,theirProps:{...N,..._},attrs:N,slot:x,slots:{...w,default:(...r)=>{var d;return[z(X,[l.value&&i.isPortalled.value&&z(le,{id:F,ref:i.beforePanelSentinel,features:oe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:q}),(d=w.default)==null?void 0:d.call(w,...r),l.value&&i.isPortalled.value&&z(le,{id:m,ref:i.afterPanelSentinel,features:oe.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:G})])]}},features:ve.RenderStrategy|ve.Static,visible:l.value,name:"PopoverPanel"})}}});const Xe=be("/logo/stripe.png"),Ze=be("/logo/paypal.png"),Me={class:"space-y-8"},et={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},tt={class:"md:col-span-2"},lt={id:"email-error",class:"mt-1 h-4 overflow-hidden"},ot={key:0,class:"text-xs text-error_text_color leading-4"},st={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},rt={id:"firstName-error",class:"mt-1 h-4 overflow-hidden"},at={key:0,class:"text-xs text-error_text_color leading-4"},nt={id:"lastName-error",class:"mt-1 h-4 overflow-hidden"},it={key:0,class:"text-xs text-error_text_color leading-4"},dt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ut={class:"md:col-span-2"},ct={id:"address-error",class:"mt-1 h-4 overflow-hidden"},pt={key:0,class:"text-xs text-error_text_color leading-4"},mt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},vt={id:"postal_code-error",class:"mt-1 h-4 overflow-hidden"},ft={key:0,class:"text-xs text-error_text_color leading-4"},_t={id:"city-error",class:"mt-1 h-4 overflow-hidden"},yt={key:0,class:"text-xs text-error_text_color leading-4"},bt={class:"grid grid-cols-1 gap-6"},xt={id:"country-error",class:"mt-1 h-4 overflow-hidden"},gt={key:0,class:"text-xs text-error_text_color leading-4"},ht={id:"phone_number-error",class:"mt-1 h-4 overflow-hidden"},kt={key:0,class:"text-xs text-error_text_color leading-4"},wt={class:"space-y-8 mt-10"},Pt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$t={class:"md:col-span-2"},St={id:"delivery_address-error",class:"mt-1 h-4 overflow-hidden"},Vt={key:0,class:"text-xs text-error_text_color leading-4"},Ct={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Nt={id:"delivery_postal_code-error",class:"mt-1 h-4 overflow-hidden"},Ft={key:0,class:"text-xs text-error_text_color leading-4"},Et={id:"delivery_city-error",class:"mt-1 h-4 overflow-hidden"},It={key:0,class:"text-xs text-error_text_color leading-4"},Tt={class:"space-y-6 mt-10"},Rt={class:"flex flex-col md:flex-row gap-3"},At={class:"flex-1 cursor-pointer"},Dt={class:"flex-1 cursor-pointer"},Bt={class:"space-y-4 pt-2"},Ot={class:"flex items-start gap-3 text-sm cursor-pointer"},jt={class:"flex items-start gap-3 text-sm cursor-pointer"},Ut={class:"mt-1 h-4 overflow-hidden"},qt={key:0,class:"text-xs text-error_text_color leading-4"},Gt={class:"pt-6"},Lt=["disabled"],Ht={class:"btn__text"},zt={class:"mt-3 h-5 overflow-hidden"},Kt={key:0,class:"text-sm text-error_text_color"},Yt=Z({__name:"CheckoutForm",props:{formValues:{},selectedPaymentMethod:{},submitting:{type:Boolean},errorMsg:{},isSubmitDisabled:{type:Boolean}},emits:["submit","selectPayment"],setup(a,{emit:N}){const w=N;function P(m,t){return l=>{const S=String(l??"");return!S||!S.trim()?`${m} is required`:t&&S.length>t?`${m} must be less than ${t+1} characters`:!0}}function C(m){const t=String(m??"");return!t||!t.trim()?"Email is required":/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i.test(t)?!0:"Please enter a valid email address"}function $(m){const t=String(m??"");return!t||!t.trim()?"Phone number is required":/^[+()\-.\s\d]{7,20}$/.test(t)?!0:"Please enter a valid phone number (+, digits, spaces, (), -)"}function n(m="Postal code"){return t=>{const l=String(t??"");return!l||!l.trim()?`${m} is required`:/^[A-Za-z0-9\s\-]{3,10}$/.test(l)?!0:`${m} looks invalid`}}function i(m){return m?!0:"You must accept the Privacy Policy"}function O(){w("submit")}function F(m){w("selectPayment",m)}return(m,t)=>(y(),Re(u(qe),{class:"w-full",onSubmit:O},{default:f(()=>[e("div",Me,[t[24]||(t[24]=e("h3",{class:"text-base uppercase tracking-widest py-2 -mx-4 px-4 md:-mx-8 md:px-8 bg-text_color text-background_color"}," Billing ",-1)),e("div",et,[e("div",tt,[t[15]||(t[15]=e("label",{for:"email",class:"block text-xs uppercase tracking-widest mb-2"},"E-mail",-1)),p(u(A),{id:"email",name:"email",type:"email",rules:C,modelValue:a.formValues.email,"onUpdate:modelValue":t[0]||(t[0]=l=>a.formValues.email=l)},{default:f(({field:l,errorMessage:s})=>[e("input",D(l,{class:["input",{"border-error_text_color":s}],"aria-describedby":"email-error"}),null,16),e("div",lt,[p(T,{name:"fade-error"},{default:f(()=>[s?(y(),b("p",ot,v(s),1)):R("",!0)]),_:2},1024)])]),_:1},8,["modelValue"])])]),e("div",st,[e("div",null,[t[16]||(t[16]=e("label",{for:"firstName",class:"block text-xs uppercase tracking-widest mb-2"},"Name",-1)),p(u(A),{id:"firstName",name:"firstName",rules:P("Name",50),modelValue:a.formValues.firstName,"onUpdate:modelValue":t[1]||(t[1]=l=>a.formValues.firstName=l)},{default:f(({field:l,errorMessage:s})=>[e("input",D(l,{type:"text",class:["input",{"border-error_text_color":s}],maxlength:"50","aria-describedby":"firstName-error"}),null,16),e("div",rt,[p(T,{name:"fade-error"},{default:f(()=>[s?(y(),b("p",at,v(s),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])]),e("div",null,[t[17]||(t[17]=e("label",{for:"lastName",class:"block text-xs uppercase tracking-widest mb-2"},"Surname",-1)),p(u(A),{id:"lastName",name:"lastName",rules:P("Surname",50),modelValue:a.formValues.lastName,"onUpdate:modelValue":t[2]||(t[2]=l=>a.formValues.lastName=l)},{default:f(({field:l,errorMessage:s})=>[e("input",D(l,{type:"text",class:["input",{"border-error_text_color":s}],maxlength:"50","aria-describedby":"lastName-error"}),null,16),e("div",nt,[p(T,{name:"fade-error"},{default:f(()=>[s?(y(),b("p",it,v(s),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])])]),e("div",dt,[e("div",ut,[t[18]||(t[18]=e("label",{for:"address",class:"block text-xs uppercase tracking-widest mb-2"},"Address",-1)),p(u(A),{id:"address",name:"address",rules:P("Address",120),modelValue:a.formValues.address,"onUpdate:modelValue":t[3]||(t[3]=l=>a.formValues.address=l)},{default:f(({field:l,errorMessage:s})=>[e("input",D(l,{type:"text",class:["input",{"border-error_text_color":s}],maxlength:"120",placeholder:"Street, number","aria-describedby":"address-error"}),null,16),e("div",ct,[p(T,{name:"fade-error"},{default:f(()=>[s?(y(),b("p",pt,v(s),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])])]),e("div",mt,[e("div",null,[t[19]||(t[19]=e("label",{for:"postal_code",class:"block text-xs uppercase tracking-widest mb-2"},"Post code",-1)),p(u(A),{id:"postal_code",name:"postal_code",rules:n("Post code"),modelValue:a.formValues.postal_code,"onUpdate:modelValue":t[4]||(t[4]=l=>a.formValues.postal_code=l)},{default:f(({field:l,errorMessage:s})=>[e("input",D(l,{class:["input",{"border-error_text_color":s}],inputmode:"numeric",maxlength:"10","aria-describedby":"postal_code-error"}),null,16),e("div",vt,[p(T,{name:"fade-error"},{default:f(()=>[s?(y(),b("p",ft,v(s),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])]),e("div",null,[t[20]||(t[20]=e("label",{for:"city",class:"block text-xs uppercase tracking-widest mb-2"},"Town / City",-1)),p(u(A),{id:"city",name:"city",rules:P("City",60),modelValue:a.formValues.city,"onUpdate:modelValue":t[5]||(t[5]=l=>a.formValues.city=l)},{default:f(({field:l,errorMessage:s})=>[e("input",D(l,{type:"text",class:["input",{"border-error_text_color":s}],maxlength:"60","aria-describedby":"city-error"}),null,16),e("div",_t,[p(T,{name:"fade-error"},{default:f(()=>[s?(y(),b("p",yt,v(s),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])])]),e("div",bt,[e("div",null,[t[22]||(t[22]=e("label",{for:"country",class:"block text-xs uppercase tracking-widest mb-2"},"Country / Region",-1)),p(u(A),{id:"country",name:"country",rules:P("Country"),modelValue:a.formValues.country,"onUpdate:modelValue":t[6]||(t[6]=l=>a.formValues.country=l)},{default:f(({field:l,errorMessage:s})=>[e("select",D(l,{class:["input",{"border-error_text_color":s}],"aria-describedby":"country-error"}),[...t[21]||(t[21]=[e("option",{value:""},"Select country",-1),e("option",{value:"Croatia"},"Croatia",-1),e("option",{value:"Slovenia"},"Slovenia",-1),e("option",{value:"Austria"},"Austria",-1),e("option",{value:"Germany"},"Germany",-1),e("option",{value:"Italy"},"Italy",-1)])],16),e("div",xt,[p(T,{name:"fade-error"},{default:f(()=>[s?(y(),b("p",gt,v(s),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])]),e("div",null,[t[23]||(t[23]=e("label",{for:"phone_number",class:"block text-xs uppercase tracking-widest mb-2"},"Telephone",-1)),p(u(A),{id:"phone_number",name:"phone_number",rules:$,modelValue:a.formValues.phone_number,"onUpdate:modelValue":t[7]||(t[7]=l=>a.formValues.phone_number=l)},{default:f(({field:l,errorMessage:s})=>[e("input",D(l,{type:"tel",class:["input",{"border-error_text_color":s}],maxlength:"20","aria-describedby":"phone_number-error"}),null,16),e("div",ht,[p(T,{name:"fade-error"},{default:f(()=>[s?(y(),b("p",kt,v(s),1)):R("",!0)]),_:2},1024)])]),_:1},8,["modelValue"])])])]),e("div",wt,[t[28]||(t[28]=e("h3",{class:"text-base uppercase tracking-widest py-2 -mx-4 px-4 md:-mx-8 md:px-8 bg-text_color text-background_color"}," Delivery ",-1)),e("div",Pt,[e("div",$t,[t[25]||(t[25]=e("label",{for:"delivery_address",class:"block text-xs uppercase tracking-widest mb-2"},"Delivery Address",-1)),p(u(A),{id:"delivery_address",name:"delivery_address",rules:P("Delivery address",120),modelValue:a.formValues.delivery_address,"onUpdate:modelValue":t[8]||(t[8]=l=>a.formValues.delivery_address=l)},{default:f(({field:l,errorMessage:s})=>[e("input",D(l,{type:"text",class:["input",{"border-error_text_color":s}],maxlength:"120",placeholder:"Street, number","aria-describedby":"delivery_address-error"}),null,16),e("div",St,[p(T,{name:"fade-error"},{default:f(()=>[s?(y(),b("p",Vt,v(s),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])])]),e("div",Ct,[e("div",null,[t[26]||(t[26]=e("label",{for:"delivery_postal_code",class:"block text-xs uppercase tracking-widest mb-2"},"Delivery Post code",-1)),p(u(A),{id:"delivery_postal_code",name:"delivery_postal_code",rules:n("Delivery post code"),modelValue:a.formValues.delivery_postal_code,"onUpdate:modelValue":t[9]||(t[9]=l=>a.formValues.delivery_postal_code=l)},{default:f(({field:l,errorMessage:s})=>[e("input",D(l,{class:["input",{"border-error_text_color":s}],inputmode:"numeric",maxlength:"10","aria-describedby":"delivery_postal_code-error"}),null,16),e("div",Nt,[p(T,{name:"fade-error"},{default:f(()=>[s?(y(),b("p",Ft,v(s),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])]),e("div",null,[t[27]||(t[27]=e("label",{for:"delivery_city",class:"block text-xs uppercase tracking-widest mb-2"},"Delivery City",-1)),p(u(A),{id:"delivery_city",name:"delivery_city",rules:P("Delivery city",60),modelValue:a.formValues.delivery_city,"onUpdate:modelValue":t[10]||(t[10]=l=>a.formValues.delivery_city=l)},{default:f(({field:l,errorMessage:s})=>[e("input",D(l,{type:"text",class:["input",{"border-error_text_color":s}],maxlength:"60","aria-describedby":"delivery_city-error"}),null,16),e("div",Et,[p(T,{name:"fade-error"},{default:f(()=>[s?(y(),b("p",It,v(s),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])])])]),e("div",Tt,[t[33]||(t[33]=e("h3",{class:"text-base uppercase tracking-widest py-2 -mx-4 px-4 md:-mx-8 md:px-8 bg-text_color text-background_color"}," Payment ",-1)),e("div",Rt,[e("label",At,[e("input",{type:"radio",name:"payment",value:"card",class:"sr-only peer",onChange:t[11]||(t[11]=l=>F("card"))},null,32),e("div",{class:M(["px-4 py-3 border text-sm uppercase transition-colors flex items-center gap-2 peer-checked:border-text_color peer-checked:bg-text_color/50 peer-checked:font-medium peer-checked:text-background_color hover:border-text_color/50",a.selectedPaymentMethod==="card"?"border-text_color bg-text_color/5 font-medium":"border-text_color/30"])},[...t[29]||(t[29]=[e("img",{src:Xe,alt:"Card Payment",class:"w-5 h-5 object-contain"},null,-1),e("span",null,"Card",-1)])],2)]),e("label",Dt,[e("input",{type:"radio",name:"payment",value:"paypal",class:"sr-only peer",onChange:t[12]||(t[12]=l=>F("paypal"))},null,32),e("div",{class:M(["px-4 py-3 border text-sm uppercase transition-colors flex items-center gap-2 peer-checked:border-text_color peer-checked:bg-text_color/50 peer-checked:font-medium peer-checked:text-background_color hover:border-text_color/50",a.selectedPaymentMethod==="paypal"?"border-text_color bg-text_color/5 font-medium":"border-text_color/30"])},[...t[30]||(t[30]=[e("img",{src:Ze,alt:"PayPal",class:"w-5 h-5 object-contain"},null,-1),e("span",null,"PayPal",-1)])],2)])]),e("div",Bt,[e("label",Ot,[p(u(A),{name:"newsletter",type:"checkbox",value:!0,"unchecked-value":!1,modelValue:a.formValues.newsletter,"onUpdate:modelValue":t[13]||(t[13]=l=>a.formValues.newsletter=l),class:"mt-0.5"},null,8,["modelValue"]),t[31]||(t[31]=e("span",null,"I want to receive personalised commercial communications by email.",-1))]),e("label",jt,[p(u(A),{name:"privacyAccepted",type:"checkbox",value:!0,"unchecked-value":!1,rules:i,modelValue:a.formValues.privacyAccepted,"onUpdate:modelValue":t[14]||(t[14]=l=>a.formValues.privacyAccepted=l),class:"mt-0.5"},null,8,["modelValue"]),t[32]||(t[32]=e("span",null,[e("a",{href:"#",class:"underline hover:no-underline"}," I have read and understand the Privacy and Cookies Policy. ")],-1))]),e("div",Ut,[p(u(Ue),{name:"privacyAccepted"},{default:f(({message:l})=>[p(T,{name:"fade-error"},{default:f(()=>[l?(y(),b("p",qt,v(l),1)):R("",!0)]),_:2},1024)]),_:1})])])]),e("div",Gt,[e("button",{type:"submit",class:M(["w-full btn",a.isSubmitDisabled?"btn--disabled":"btn--primary"]),disabled:a.isSubmitDisabled},[e("span",Ht,v(a.submitting?"Placing Order…":"Place Order"),1),t[34]||(t[34]=e("span",{class:"btn__fill"},null,-1))],10,Lt),e("div",zt,[p(T,{name:"fade-error"},{default:f(()=>[a.errorMsg?(y(),b("p",Kt,v(a.errorMsg),1)):R("",!0)]),_:1})])])]),_:1}))}}),Qt=Oe(Yt,[["__scopeId","data-v-fd7f1d70"]]);function Wt(){const a=xe("cart_session_id");return{sessionId:I(()=>a.value)}}const Jt={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 pt-4 gap-6"},Xt={class:"flex justify-start w-full"},Zt={class:"flex items-center py-1 text-xs md:text-sm text-text_color uppercase tracking-widest","aria-label":"Breadcrumb"},Mt={class:"hidden md:flex flex-col md:flex-row py-8 md:px-8 mt-6 md:gap-x-16"},el={class:"w-full mt-10 md:mt-0"},tl={class:"space-y-5"},ll={key:0,class:"grid grid-cols-1 gap-y-4"},ol=["alt"],sl={class:"flex-1"},rl={class:"text-sm md:text-base leading-tight tracking-wider px-3"},al={class:"text-xs mt-1 tracking-wider px-3"},nl={class:"text-xs mt-1 tracking-wider px-3"},il={class:"text-right"},dl={class:"text-sm md:text-base"},ul={key:0,class:"space-x-1"},cl={class:"font-semibold"},pl={class:"line-through text-xs"},ml={key:1},vl=["disabled","onClick"],fl={key:1,class:"text-sm opacity-70"},_l={class:"space-y-2 text-sm border-t border-text_color/30 pt-4"},yl={class:"flex justify-between"},bl={class:"flex justify-between"},xl={key:0},gl={key:1},hl={class:"flex justify-between font-medium text-base pt-2"},kl={class:"md:hidden pb-10 max-w-screen-md mx-auto px-4 md:px-8 pt-4 gap-6"},wl={class:"border-t border-b border-text_color/30 bg-background_color text-text_color rounded-sm"},Pl={class:"flex items-center justify-between py-4"},$l={class:"text-sm uppercase tracking-widest"},Sl={class:"text-base font-medium"},Vl={class:"pb-4 text-sm space-y-1"},Cl={class:"flex justify-between"},Nl={class:"flex justify-between"},Fl={key:0},El={key:1},Il={class:"uppercase tracking-widest"},Tl={class:"max-h-80 overflow-y-auto divide-y divide-text_color/30"},Rl=["alt"],Al={class:"flex-1 min-w-0"},Dl={class:"text-sm leading-tight line-clamp-2"},Bl={class:"mt-1 text-xs opacity-70"},Ol={class:"mt-1 text-xs opacity-70"},jl={class:"mt-2 text-sm"},Ul={key:0,class:"space-x-1"},ql={class:"font-medium"},Gl={class:"line-through text-xs"},Ll={key:1},Hl=["disabled","onClick","aria-label"],zl=200,Kl=12.99,lo=Z({__name:"checkout",setup(a){const N=je(),w=Fe(),P=B(null),C=B(!1),$=B(""),n=B(""),{getResponsiveImages:i}=Ie();function O(o){return i(o,[500],"12vh")}function F(o){return i(o,[500],"10vh")}const m=I(()=>({items:w.items,cart_total_to_pay:w.totals.toPay})),t=Ae({email:"",firstName:"",lastName:"",address:"",postal_code:"",city:"",country:"",phone_number:"",delivery_address:"",delivery_postal_code:"",delivery_city:"",privacyAccepted:!1,newsletter:!1});Wt();const l=o=>Number.isInteger(o)?o.toString():o.toFixed(2),s=I(()=>w.merchandiseTotal),S=I(()=>s.value>=zl?0:Kl),E=I(()=>s.value+S.value),q=I(()=>m.value.items.length===0||C.value||!n.value?!0:!!!(t.email?.trim()&&t.firstName?.trim()&&t.lastName?.trim()&&t.address?.trim()&&t.postal_code?.trim()&&t.city?.trim()&&t.country?.trim()&&t.phone_number?.trim()&&t.delivery_address?.trim()&&t.delivery_postal_code?.trim()&&t.delivery_city?.trim()&&t.privacyAccepted));function G(o){n.value=o}function x(o){return o.product_variant_slug??o.product_slug??""}async function g(o){const r=x(o);if(!(!r||P.value)){P.value=r;try{await w.removeFromCart({...o,product_slug:o.product_slug??r})}catch(d){console.error("Failed to remove item:",d)}finally{P.value=null}}}async function _(){if($.value="",m.value.items.length===0){$.value="Your cart is empty.";return}if(!n.value){$.value="Please select a payment method.";return}try{C.value=!0;const o=xe("cart_session_id"),r={email:t.email,country:t.country,address:t.address,city:t.city,postal_code:t.postal_code,phone_number:t.phone_number,delivery_address:t.delivery_address,delivery_city:t.delivery_city,delivery_postal_code:t.delivery_postal_code,payment_method:n.value,shipping_cost:S.value,session_id:o.value},d=await $fetch(`${N.public.apiBase}/api/orders/create/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:r});d.payment_method==="card"&&d.client_secret?await me({path:"/payment/card",query:{ref:d.order_reference,clientSecret:d.client_secret,amount:d.total_price}}):d.payment_method==="paypal"&&d.paypal_approval_url?window.location.href=d.paypal_approval_url:await me({path:"/thank-you",query:{ref:d.order_reference,total:d.total_price}})}catch(o){console.error("Order error:",o),$.value=o?.data?.detail||"Could not create order. Please try again."}finally{C.value=!1}}return ae(async()=>{await w.fetchCart()}),(o,r)=>{const d=Ee,h=Te,j=Qt,U=Ge;return y(),b("section",null,[p(d,{dark:!1}),e("div",Jt,[e("div",Xt,[e("nav",Zt,[p(h,{to:"/",class:"hover:underline pr-2"},{default:f(()=>[...r[0]||(r[0]=[pe("HOME",-1)])]),_:1}),r[2]||(r[2]=e("span",{class:"pr-2","aria-hidden":"true"},"/",-1)),p(h,{to:"/shop",class:"hover:underline pr-2"},{default:f(()=>[...r[1]||(r[1]=[pe("SHOP",-1)])]),_:1}),r[3]||(r[3]=e("span",{class:"pr-2","aria-hidden":"true"},"/",-1)),r[4]||(r[4]=e("span",{class:"pr-2","aria-current":"page"},"CHECKOUT",-1))])])]),e("div",Mt,[p(j,{"form-values":u(t),"selected-payment-method":u(n),submitting:u(C),"error-msg":u($),"is-submit-disabled":u(q),onSubmit:_,onSelectPayment:G},null,8,["form-values","selected-payment-method","submitting","error-msg","is-submit-disabled"]),e("aside",el,[e("div",tl,[r[9]||(r[9]=e("h2",{class:"uppercase tracking-widest text-sm"},"Order Summary",-1)),u(m).items.length?(y(),b("div",ll,[(y(!0),b(X,null,ce(u(m).items,(k,V)=>(y(),b("div",{key:V,class:"flex gap-4"},[e("img",D({ref_for:!0},O(k.avatar_image),{alt:k.product,class:"object-cover border",loading:"lazy"}),null,16,ol),e("div",sl,[e("div",rl,v(k.product),1),e("div",al,"Size: "+v(k.size),1),e("div",nl,"Quantity: "+v(k.quantity),1)]),e("div",il,[e("div",dl,[k.unit_price_discounted!==k.unit_price_original?(y(),b("span",ul,[e("span",cl,"€"+v(k.unit_price_discounted),1),e("span",pl,"€"+v(k.unit_price_original),1)])):(y(),b("span",ml,"€"+v(k.unit_price_original),1))]),e("button",{type:"button",class:"mt-3 text-xs uppercase tracking-widest border-b border-text_color/30 hover:border-text_color transition-colors disabled:opacity-50",disabled:u(P)===x(k),onClick:K=>g(k)},v(u(P)===x(k)?"Removing...":"Remove item"),9,vl)])]))),128))])):(y(),b("div",fl,"Your cart is empty.")),e("div",_l,[e("div",yl,[r[5]||(r[5]=e("span",null,"Subtotal",-1)),e("span",null,"€"+v(l(u(s))),1)]),e("div",bl,[r[6]||(r[6]=e("span",null,"Shipping",-1)),u(S)===0?(y(),b("span",xl,"€0 (Free)")):(y(),b("span",gl,"€"+v(l(u(S))),1))]),e("div",hl,[r[7]||(r[7]=e("span",null,"Total",-1)),e("span",null,"€"+v(l(u(E))),1)]),r[8]||(r[8]=e("p",{class:"text-xs opacity-70"}," Prices include VAT, excluding any import duties. ",-1))])])])]),e("div",kl,[e("div",wl,[e("div",Pl,[e("div",$l," Cart ("+v(u(m).items.length)+") ",1),e("div",Sl," €"+v(l(u(E))),1)]),e("div",Vl,[e("div",Cl,[r[10]||(r[10]=e("span",null,"Subtotal",-1)),e("span",null,"€"+v(l(u(s))),1)]),e("div",Nl,[r[11]||(r[11]=e("span",null,"Shipping",-1)),u(S)===0?(y(),b("span",Fl,"€0 (Free)")):(y(),b("span",El,"€"+v(l(u(S))),1))])]),p(u(we),{class:"block"},{default:f(({open:k})=>[p(u(We),{class:"w-full flex items-center justify-between py-4 text-sm border-t border-text_color/20"},{default:f(()=>[e("span",Il," Items ("+v(u(m).items.length)+") ",1),p(U,{name:"lucide:chevron-down",class:M(["w-4 h-4 transition-transform duration-150",k?"rotate-180":""])},null,8,["class"])]),_:2},1024),p(T,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:f(()=>[De(p(u(Je),{static:""},{default:f(()=>[e("div",Tl,[(y(!0),b(X,null,ce(u(m).items,(V,K)=>(y(),b("div",{key:K,class:"flex gap-3 py-3"},[e("img",D({ref_for:!0},F(V.avatar_image),{alt:V.product,class:"object-cover border",loading:"lazy"}),null,16,Rl),e("div",Al,[e("div",Dl,v(V.product),1),e("div",Bl,"Size: "+v(V.size),1),e("div",Ol,"Qty: "+v(V.quantity),1),e("div",jl,[V.unit_price_discounted!==V.unit_price_original?(y(),b("span",Ul,[e("span",ql,"€"+v(V.unit_price_discounted),1),e("span",Gl,"€"+v(V.unit_price_original),1)])):(y(),b("span",Ll,"€"+v(V.unit_price_original),1))])]),e("button",{type:"button",class:"shrink-0 p-1 hover:bg-text_color/10 rounded-sm h-7 transition-colors disabled:opacity-50",disabled:u(P)===x(V),onClick:Yl=>g(V),"aria-label":`Remove ${V.product}`,title:"Remove"},[p(U,{name:"lucide:x",class:"w-4 h-4"})],8,Hl)]))),128))])]),_:1},512),[[Be,k]])]),_:2},1024)]),_:1})]),p(j,{"form-values":u(t),"selected-payment-method":u(n),submitting:u(C),"error-msg":u($),"is-submit-disabled":u(q),onSubmit:_,onSelectPayment:G},null,8,["form-values","selected-payment-method","submitting","error-msg","is-submit-disabled"])])])}}});export{lo as default};
