import F from"./CyiZNxQb.js";import{r as y,g as R,c as f,o as p,F as z,h as j,a as e,i as P,v as U,n as b,t as h,j as G,b as k,k as D,l as O,e as W,w as M,m as B,p as Y,q as H,s as Q,x as T,y as J,z as K,A as X,B as Z,C as ee,_ as te}from"#entry";import{Y as se,h as oe,G as le,S as ne}from"./j5A_PzG0.js";import{_ as ae}from"./CroF-h7C.js";import"./WnQEzyIa.js";const re={class:"grid grid-cols-2 md:grid-cols-4 overflow-y-auto pt-8 gap-x-4 md:gap-x-8 lg:gap-x-24"},ie={class:"bg-background_color overflow-hidden object-fill"},ce={class:"w-full"},ue=["onMouseenter"],de=["onClick","src","alt"],pe=["onClick"],fe={class:"py-3 text-left"},ge={class:"text-xs tracking-wider font-extralight"},me={class:"uppercase tracking-wider text-[13px] md:text-sm font-normal truncate py-1"},xe={class:"mt-1 flex items-center gap-2"},ve=["onMouseenter","onMouseleave"],_e=["onMouseenter","src","alt","onClick"],ye={key:0,class:"text-[10px] md:text-xs"},be={class:"mt-1 text-xs font-light"},he={__name:"ShopListing",props:{products:{type:Array,default:()=>[]}},setup(_){const g=y(null),A=R(),c=y({});function u(i,d){return c.value[i.slug]===d.variant_slug}function a(i,d){i.currentImage=d.avatar_image,c.value[i.slug]=d.variant_slug}function S(i){i.currentImage=i.defaultImage||i.link_image,c.value[i.slug]=null}function C(i=[]){return Math.max(0,i.length-2)}function V(i=[]){return i.slice(0,2)}function x(i,d){!i||!d||A.push(`/product/${i}/${d}`)}return(i,d)=>{const m=F;return p(),f("div",re,[(p(!0),f(z,null,j(_.products,t=>(p(),f("div",{key:t.slug,class:"col-span-1 cursor-pointer pb-10"},[e("div",ie,[e("div",ce,[e("div",{class:"relative bg-background_color",onMouseenter:n=>g.value=t.slug,onMouseleave:d[0]||(d[0]=n=>g.value=null)},[e("img",{onClick:n=>x(t.slug,t.colors?.[0]?.variant_slug),src:t.currentImage||t.link_image,alt:t.alt_text||t.name,class:"max-w-[100%] h-auto object-cover transition-opacity duration-200 border border-text_color/30",loading:"lazy"},null,8,de),P(e("button",{class:b(["absolute top-4 left-4 bg-text_color text-background_color tracking-wider text-xs font-light w-auto px-2 mx-auto opacity-0 transition-opacity duration-200",{"opacity-100":g.value===t.slug}]),onClick:n=>x(t.slug,t.colors?.[0]?.variant_slug)}," VIEW ",10,pe),[[U,g.value===t.slug]])],40,ue),e("div",fe,[e("p",ge,h(t.category),1),e("h3",me,h(t.name),1),e("div",xe,[(p(!0),f(z,null,j(V(t.colors),n=>(p(),f("div",{key:n.variant_slug,class:"relative group",onMouseenter:l=>a(t,n),onMouseleave:l=>S(t)},[e("img",{onMouseenter:l=>g.value=t.slug,onMouseleave:d[1]||(d[1]=l=>g.value=null),src:n.avatar_image,alt:n.color,class:"h-8 w-8 object-cover",loading:"lazy",onClick:l=>x(t.slug,n.variant_slug)},null,40,_e),e("div",{class:b(["absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color",u(t,n)?"opacity-100":"opacity-0"])},[k(m,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto"})],2)],40,ve))),128)),C(t.colors)>0?(p(),f("span",ye,"+"+h(C(t.colors)),1)):G("",!0)]),e("p",be,"â‚¬"+h(parseFloat(t.price).toFixed(2)),1)])])])]))),128))])}}},ke={"data-aos":"fade-left","data-aos-duration":"400","data-aos-easing":"ease-in-out",class:"fixed inset-y-0 right-0 flex max-w-full"},we={class:"flex items-center justify-between px-6 py-4 border-b border-text_color/30"},Ce={class:"flex-1 overflow-auto px-6 py-6 space-y-8"},$e={class:"pt-2"},ze={class:"mt-3 flex flex-wrap gap-2 justify-end"},je=["onClick"],Ae={class:"mt-3 flex flex-wrap gap-2 justify-end"},Se=["onClick"],Ve={class:"mt-3 flex flex-wrap gap-2 justify-end"},Me=["onClick"],Be={class:"mt-3 flex flex-col gap-2"},Oe=["value"],Ie={class:"flex flex-row my-auto justify-end"},Fe={class:"my-auto text-sm text-text_color px-8"},Pe=["title"],Ee={__name:"FilterPanel",props:{open:{type:Boolean,default:!1},facets:{type:Object,default:()=>({collections:[],categories:[],sizes:[],colors:[]})},modelValue:{type:Object,default:()=>({collections:[],categories:[],sizes:[],colors:[]})}},emits:["update:open","update:modelValue"],setup(_,{emit:g}){const A=_,c=g;function u(n={}){return{collections:Array.isArray(n.collections)?[...n.collections]:[],categories:Array.isArray(n.categories)?[...n.categories]:[],sizes:Array.isArray(n.sizes)?[...n.sizes]:[],colors:Array.isArray(n.colors)?[...n.colors]:[]}}const a=D(u(A.modelValue));O(()=>A.modelValue,n=>{Object.assign(a,u(n))},{deep:!0});function S(){c("update:modelValue",u(a)),c("update:open",!1)}function C(){Object.assign(a,{collections:[],categories:[],sizes:[],colors:[]}),c("update:modelValue",u(a)),c("update:open",!1)}function V(){Object.assign(a,{collections:[]}),c("update:modelValue",u(a))}function x(){Object.assign(a,{categories:[]}),c("update:modelValue",u(a))}function i(){Object.assign(a,{sizes:[]}),c("update:modelValue",u(a))}function d(){Object.assign(a,{colors:[]}),c("update:modelValue",u(a))}function m(n,l){const w=new Set(a[n]);w.has(l)?w.delete(l):w.add(l),a[n]=[...w]}function t(n){return["px-3 py-1 text-sm text-text-color",n?"font-bold":"bg-backgroun_color"]}return(n,l)=>{const w=F;return p(),W(B(ne),{show:_.open},{default:M(()=>[k(B(se),{class:"relative z-50",onClose:l[2]||(l[2]=r=>n.$emit("update:open",!1))},{default:M(()=>[l[9]||(l[9]=e("div",{class:"fixed inset-0 bg-text_color/30","aria-hidden":"true"},null,-1)),e("div",ke,[k(B(oe),{leave:"transform transition ease-in duration-150","leave-from":"translate-x-0","leave-to":"translate-x-full"},{default:M(()=>[k(B(le),{class:"w-screen max-w-md bg-background_color h-full shadow-xl flex flex-col"},{default:M(()=>[e("div",we,[l[3]||(l[3]=e("h2",{class:"uppercase tracking-wider text-md"},"Filters",-1)),e("button",{class:"ml-2 p-1 inline-flex items-center justify-center hover:bg-text_color/10 shrink-0","aria-label":"Close cart",onClick:l[0]||(l[0]=r=>c("update:open",!1))},[k(w,{name:"lucide:x",class:"w-4 h-4"})])]),e("div",Ce,[e("section",$e,[e("div",{class:"flex items-center justify-between"},[l[4]||(l[4]=e("h3",{class:"uppercase text-xs tracking-widest"},"Collection",-1)),e("button",{class:"text-xs underline",onClick:V},"Clear")]),e("div",ze,[(p(!0),f(z,null,j(_.facets.collections,r=>(p(),f("button",{key:`col-${r.slug}`,onClick:$=>m("collections",r.slug),class:b(t(a.collections.includes(r.slug)))},h(r.name),11,je))),128))])]),e("section",null,[e("div",{class:"flex items-center justify-between"},[l[5]||(l[5]=e("h3",{class:"uppercase text-xs tracking-widest"},"Category",-1)),e("button",{class:"text-xs underline",onClick:x},"Clear")]),e("div",Ae,[(p(!0),f(z,null,j(_.facets.categories,r=>(p(),f("button",{key:r.id,onClick:$=>m("categories",r.id),class:b(t(a.categories.includes(r.id)))},h(r.name),11,Se))),128))])]),e("section",null,[e("div",{class:"flex items-center justify-between"},[l[6]||(l[6]=e("h3",{class:"uppercase text-xs tracking-widest"},"Size",-1)),e("button",{class:"text-xs underline",onClick:i},"Clear")]),e("div",Ve,[(p(!0),f(z,null,j(_.facets.sizes,r=>(p(),f("button",{key:r,onClick:$=>m("sizes",r.name),class:b(t(a.sizes.includes(r.name)))},h(r.name),11,Me))),128))])]),e("section",null,[e("div",{class:"flex items-center justify-between"},[l[7]||(l[7]=e("h3",{class:"uppercase text-xs tracking-widest"},"Colour",-1)),e("button",{class:"text-xs underline",onClick:d},"Clear")]),e("div",Be,[(p(!0),f(z,null,j(_.facets.colors,r=>(p(),f("div",{key:r.name,class:"relative"},[P(e("input",{type:"checkbox",value:r.name,"onUpdate:modelValue":l[1]||(l[1]=$=>a.colors=$),class:"absolute inset-0 opacity-0 cursor-pointer"},null,8,Oe),[[Y,a.colors]]),e("div",Ie,[e("p",Fe,h(r.name),1),e("div",{class:b(["w-6 h-6 border cursor-pointer m-1",a.colors.includes(r.name)?"ring-2 ring-text_color":"border-gray-300"]),style:H({backgroundColor:`#${r.image}`}),title:r.name},null,14,Pe)])]))),128))])])]),e("div",{class:"px-6 py-4 border-t border-text_color/30 flex items-center justify-between"},[e("button",{class:"text-sm underline",onClick:C},"Clean filters"),e("button",{class:"secondary-btn sweep-secondary px-4 py-2",onClick:S},[...l[8]||(l[8]=[e("span",{class:"btn-label"},"View results",-1),e("span",{class:"sweep-overlay bg-secondary_button_color","aria-hidden":"true"},null,-1)])])])]),_:1})]),_:1})])]),_:1})]),_:1},8,["show"])}}},qe={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 pt-4 gap-6"},Le={class:"flex justify-between w-full"},Ne={class:"flex items-center"},Re={class:"flex gap-3 justify-end w-full"},Ue={class:"flex items-center gap-3"},Ge=["onClick"],I=12,De=Q({__name:"index",setup(_){const g=ee(),A=T(),c=J(),u=y(c.query.gender==="male"?"male":"female");O(()=>c.query.gender,o=>{const s=o==="male"?"male":"female";u.value!==s&&(u.value=s)},{immediate:!0});function a(o){u.value!==o&&(u.value=o,A.replace({query:{...c.query,gender:o}}))}function S(o){return["py-1 pr-8 text-sm text-text_color",u.value===o?"font-bold":"bg-background_color"].join(" ")}const C=y([]),V=y(0),x=y(1),i=K(()=>Math.max(1,Math.ceil(V.value/I))),d=y(!1),m=y({collections:[],categories:[],sizes:[],colors:[]}),t=y({collections:[],categories:[],sizes:[],colors:[]});function n(){const o=new URLSearchParams;return o.set("page",String(x.value)),o.set("page_size",String(I)),m.value.collections.forEach(s=>o.append("collection",s.toString())),m.value.categories.forEach(s=>o.append("category",s.toString())),m.value.sizes.forEach(s=>o.append("size",s)),m.value.colors.forEach(s=>o.append("color",s)),o.set("gender",u.value),o.toString().replace(/\+/g,"%20")}async function l(){try{const o=await $fetch(`${g.public.apiBase}/public/categories/`);t.value.categories=Array.isArray(o)?o:[]}catch{t.value.categories=[]}}async function w(){try{const o=await $fetch(`${g.public.apiBase}/public/sizes/`);t.value.sizes=Array.isArray(o)?o:[]}catch{t.value.sizes=[]}}async function r(){try{const o=await $fetch(`${g.public.apiBase}/public/colors/`);t.value.colors=Array.isArray(o)?o.map(s=>({name:s.name,image:s.image})):[]}catch{t.value.colors=[]}}async function $(){const o=await $fetch(`${g.public.apiBase}/public/products-all/?${n()}`);V.value=o.count,C.value=o.results.map(s=>({...s,defaultImage:s.link_image,currentImage:s.link_image}))}async function E(){try{const o=await $fetch(`${g.public.apiBase}/public/collections/`);t.value.collections=Array.isArray(o)?o.map(s=>({name:s.name,slug:s.slug})):[]}catch{t.value.collections=[]}}return O(m,()=>{x.value!==1&&(x.value=1)},{deep:!0}),O([m,x,u,c],$),X(async()=>{await Promise.all([l(),r(),w(),E()]),await $()}),(o,s)=>{const q=he,L=Ee,N=Z;return p(),f("section",null,[k(ae,{dark:!1}),e("div",qe,[e("div",Le,[e("div",Ne,[e("button",{class:b(S("female")),onClick:s[0]||(s[0]=v=>a("female"))},"WOMAN",2),e("button",{class:b(S("male")),onClick:s[1]||(s[1]=v=>a("male"))},"MAN",2)]),e("div",Re,[e("div",Ue,[s[5]||(s[5]=e("span",{class:"uppercase text-xs tracking-widest ml-4"},"Page",-1)),(p(!0),f(z,null,j(i.value,v=>(p(),f("button",{key:v,class:b([v===x.value?"underline":"opacity-60","text-sm uppercase tracking-widest"]),onClick:We=>x.value=v},h(v),11,Ge))),128)),e("button",{class:"text-md uppercase tracking-widest",onClick:s[2]||(s[2]=v=>d.value=!0)},"Filters")])])])]),k(q,{class:"mt-2 md:mt-6 px-4 md:px-8",products:C.value},null,8,["products"]),k(N,null,{default:M(()=>[k(L,{open:d.value,modelValue:m.value,"onUpdate:modelValue":s[3]||(s[3]=v=>m.value=v),facets:t.value,"onUpdate:open":s[4]||(s[4]=v=>d.value=v)},null,8,["open","modelValue","facets"])]),_:1})])}}}),Ke=te(De,[["__scopeId","data-v-34258e90"]]);export{Ke as default};
