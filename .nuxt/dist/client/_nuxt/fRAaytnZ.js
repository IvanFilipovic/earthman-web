import{b as J,c as X,_ as ce,d as ue,e as de,f as pe}from"#entry";import{Y as fe,G as ge,V as ve,_ as me}from"./Bf9gXHVU.js";import{u as D,y as u,U as a,I as z,a3 as A,a0 as o,b as k,H as ee,v as te,D as Q,A as q,o as oe,a4 as H,a5 as se,a6 as ye,G as d,a7 as I,a1 as P,L as S,r as _e,Q as W,V as G,a2 as he,a8 as xe,a9 as be,aa as we,d as ke}from"./C_FQlwfs.js";import ne from"./Cayf0jz7.js";import{y as Ce}from"./DpJYeJpL.js";/* empty css        */import{h as Y,S as $e}from"./D1fZegAR.js";import{g as U}from"./DKtf60Sy.js";import{S as K}from"./Duwiz9RP.js";import"./bnelyH8B.js";const Se={class:"grid grid-cols-2 md:grid-cols-4 overflow-y-auto pt-8 gap-x-4 md:gap-x-8 lg:gap-x-24"},ze=D({__name:"ShopListingskeleton",props:{count:{default:12},animate:{type:Boolean,default:!0}},setup(b){const p={backgroundColor:"#c6c5c5",borderColor:"#c6c5c5"};return(E,h)=>(a(),u("div",Se,[(a(!0),u(z,null,A(b.count,v=>(a(),u("div",{key:v,class:"col-span-1 pb-10 animate-pulse"},[o("div",{class:"overflow-hidden"},[o("div",{class:"w-full border",style:p},[o("div",{class:"w-full h-[275.73] md:h-[407.35px] lg:h-[568.723px] aspect-[3/4]",style:p})])]),o("div",{class:"py-3"},[o("div",{class:"h-3 w-24",style:p}),o("div",{class:"mt-2 h-4 w-3/4",style:p}),o("div",{class:"mt-3 flex items-center gap-2"},[o("div",{class:"w-7 h-7 md:w-8 md:h-8 rounded",style:p}),o("div",{class:"w-7 h-7 md:w-8 md:h-8 rounded",style:p})]),o("div",{class:"mt-3 h-4 w-16",style:p})])]))),128))]))}}),Ae={class:"grid grid-cols-2 md:grid-cols-4 overflow-y-auto pt-8 gap-x-4 md:gap-x-8 lg:gap-x-24"},je={class:"bg-background_color overflow-hidden object-fill"},Ve={class:"w-full"},Fe=["onMouseenter"],Pe=["src","alt","onClick"],Ee={key:0,class:"block md:hidden"},Me=["src","alt","onClick"],Ie=["onClick"],Be={class:"py-3 text-left"},Le={class:"text-xs tracking-wider font-extralight"},Ne={class:"uppercase tracking-wider text-[13px] md:text-sm font-normal truncate py-1"},Ge={key:0,class:"mt-1 flex items-center gap-2"},Oe=["onMouseenter","onMouseleave"],Re=["src","alt","onClick"],Te={class:"mt-1 text-xs font-light"},qe=D({__name:"ShopListing",props:{products:{}},setup(b){const p=b,E=J(),h=X(),v=k(null),C=k({}),i=k({}),x=k({}),B=k({}),j=ee(()=>{const e=h.query.color;return e?Array.isArray(e)?e.map(s=>m(String(s))):[m(String(e))]:[]});function m(e){return e.toLowerCase().trim().replace(/\s+/g," ")}function $(e){if(j.value.length===0)return!1;const s=m(e.color);return j.value.some(y=>!!(s===y||s.includes(y)||y.includes(s)))}function l(e){if(e.currentImage)return e.currentImage;if(!e.colors||e.colors.length===0)return"";if(j.value.length>0){const s=e.colors.find(y=>$(y));if(s)return s.avatar_image}return e.colors[0].avatar_image}function _(e){if(!(!e.colors||e.colors.length===0)){if(j.value.length>0){const s=e.colors.find(y=>$(y));if(s)return s.variant_slug}return e.colors[0].variant_slug}}function M(e){return parseFloat(e).toFixed(2)}function L(e,s){e&&(i.value[s]=e)}te(()=>{Q(()=>{R()})}),q(()=>p.products,()=>{Q(()=>{O(),R()})},{deep:!0}),oe(()=>{O()});function O(){Object.values(x.value).forEach(e=>{e&&typeof e.destroy=="function"&&e.destroy()}),x.value={}}function R(){p.products.forEach(e=>{if(!e.colors||e.colors.length===0)return;const s=i.value[e.slug];if(!s)return;x.value[e.slug]&&x.value[e.slug].destroy();const y=new Ce(s,{loop:!0,initial:0,slideChanged(n){B.value[e.slug]=n.track.details.rel}});x.value[e.slug]=y,B.value[e.slug]=0})}function T(e,s){return C.value[e.slug]===s}function r(e,s,y){v.value=e.slug,e.currentImage=s.avatar_image,C.value[e.slug]=y}function c(e){e.currentImage=void 0,C.value[e.slug]=null,v.value=null}function w(e,s){!e||!s||E.push(`/product/${e}/${s}`)}return(e,s)=>{const y=ne;return a(),u("div",Ae,[(a(!0),u(z,null,A(b.products,n=>(a(),u("div",{key:n.slug,class:"col-span-1 cursor-pointer pb-10"},[o("div",je,[o("div",Ve,[o("div",{class:"relative bg-background_color",onMouseenter:f=>v.value=n.slug,onMouseleave:s[0]||(s[0]=f=>v.value=null)},[o("img",{src:l(n),alt:n.alt_text||n.name,class:"hidden md:block max-w-[100%] h-auto object-cover transition-opacity duration-200 border border-text_color/30",loading:"lazy",onClick:f=>w(n.slug,_(n))},null,8,Pe),n.colors&&n.colors.length>0?(a(),u("div",Ee,[o("div",{ref_for:!0,ref:f=>L(f,n.slug),class:"keen-slider"},[(a(!0),u(z,null,A(n.colors,(f,N)=>(a(),u("div",{key:N,class:"keen-slider__slide"},[o("img",{src:f.avatar_image,alt:f.color,class:"w-full h-auto object-cover border border-text_color/30",loading:"lazy",onClick:t=>w(n.slug,f.variant_slug)},null,8,Me)]))),128))],512)])):H("",!0),se(o("button",{type:"button",class:I(["absolute top-4 left-4 bg-text_color text-background_color tracking-wider text-xs font-light w-auto px-2 mx-auto opacity-0 transition-opacity duration-200",{"opacity-100":d(v)===n.slug}]),onClick:f=>w(n.slug,_(n))}," VIEW ",10,Ie),[[ye,d(v)===n.slug]])],40,Fe),o("div",Be,[o("p",Le,P(n.category),1),o("h3",Ne,P(n.name),1),n.colors&&n.colors.length>0?(a(),u("div",Ge,[(a(!0),u(z,null,A(n.colors,(f,N)=>(a(),u("div",{key:N,class:"relative group",onMouseenter:t=>r(n,f,N),onMouseleave:t=>c(n)},[o("img",{src:f.avatar_image,alt:f.color,class:"w-7 h-7 md:h-8 md:w-8 object-cover border border-project_black/40 cursor-pointer",loading:"lazy",onClick:t=>w(n.slug,f.variant_slug)},null,8,Re),o("div",{class:I(["absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color",T(n,N)?"opacity-100":"opacity-0"])},[S(y,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto"})],2)],40,Oe))),128))])):H("",!0),o("p",Te,"â‚¬"+P(M(n.price)),1)])])])]))),128))])}}}),De=ce(qe,[["__scopeId","data-v-0894e9c1"]]),Ue={class:"fixed inset-0 overflow-hidden pointer-events-none"},Qe={class:"absolute inset-y-0 right-0 flex max-w-full"},We={class:"flex items-center justify-between px-6 py-4 border-b border-text_color/30"},He={class:"flex-1 overflow-auto px-6 py-6 space-y-8"},Ye={class:"pt-2"},Ke={class:"mt-3 flex flex-wrap gap-2 justify-end"},Ze=["onClick"],Je={class:"pt-2"},Xe={class:"mt-3 flex flex-wrap gap-2 justify-end"},et=["onClick"],tt={class:"mt-3 flex flex-wrap gap-2 justify-end"},ot=["onClick"],st={class:"mt-3 flex flex-wrap gap-2 justify-end"},nt=["onClick"],lt={class:"mt-3 flex flex-col"},rt=["value"],at={class:"flex flex-row my-auto justify-end"},it={class:"my-auto text-sm text-text_color px-8"},ct=["title"],ut=D({__name:"FilterPanel",props:{open:{type:Boolean,default:!1},facets:{default:()=>({collections:[],categories:[],sizes:[],colors:[]})},modelValue:{default:()=>({gender:[],collections:[],categories:[],sizes:[],colors:[]})}},emits:["update:open","update:modelValue"],setup(b,{emit:p}){const E=b,h=p,v=[{label:"WOMAN",value:"female"},{label:"MAN",value:"male"},{label:"KIDS",value:"kids"},{label:"ALL",value:""}];function C(r){return{gender:Array.isArray(r.gender)?[...r.gender]:[],collections:Array.isArray(r.collections)?[...r.collections]:[],categories:Array.isArray(r.categories)?[...r.categories]:[],sizes:Array.isArray(r.sizes)?[...r.sizes]:[],colors:Array.isArray(r.colors)?[...r.colors]:[]}}const i=_e(C(E.modelValue));q(()=>E.modelValue,r=>{Object.assign(i,C(r))},{deep:!0});function x(){h("update:open",!1)}function B(r){i.gender=r?[r]:[]}function j(r){return r?i.gender[0]===r:i.gender.length===0}function m(r,c){const w=i[r],e=w.indexOf(c);e>-1?w.splice(e,1):w.push(c)}function $(r){return["px-3 py-1 text-sm transition-all duration-200",r?"font-bold":"hover:opacity-70"].join(" ")}function l(){i.gender=[]}function _(){i.collections=[]}function M(){i.categories=[]}function L(){i.sizes=[]}function O(){i.colors=[]}function R(){Object.assign(i,{gender:[],collections:[],categories:[],sizes:[],colors:[]}),h("update:modelValue",C(i))}function T(){h("update:modelValue",C(i)),h("update:open",!1)}return(r,c)=>{const w=ne;return a(),W(d($e),{show:b.open,as:"template"},{default:G(()=>[S(d(fe),{class:"relative z-50",onClose:x},{default:G(()=>[S(d(Y),{enter:"transition-opacity ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:G(()=>[o("div",{class:"fixed inset-0 bg-text_color/30 cursor-pointer","aria-hidden":"true",onClick:x})]),_:1}),o("div",Ue,[o("div",Qe,[S(d(Y),{enter:"transform transition ease-out duration-300","enter-from":"translate-x-full","enter-to":"translate-x-0",leave:"transform transition ease-in duration-200","leave-from":"translate-x-0","leave-to":"translate-x-full"},{default:G(()=>[S(d(ge),{class:"w-screen max-w-md bg-background_color h-full shadow-xl flex flex-col pointer-events-auto"},{default:G(()=>[o("div",We,[S(d(ve),{class:"uppercase tracking-wider text-md"},{default:G(()=>[...c[1]||(c[1]=[he(" Filters ",-1)])]),_:1}),o("button",{type:"button",class:"ml-2 p-1 inline-flex items-center justify-center hover:bg-text_color/10 shrink-0 rounded transition-colors duration-200","aria-label":"Close filters",onClick:x},[S(w,{name:"lucide:x",class:"w-4 h-4"})])]),o("div",He,[o("section",Ye,[o("div",{class:"flex items-center justify-between"},[c[2]||(c[2]=o("h3",{class:"uppercase text-xs tracking-widest"},"Gender",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:l}," Clear ")]),o("div",Ke,[(a(),u(z,null,A(v,e=>o("button",{key:e.value||"all",type:"button",onClick:s=>B(e.value),class:I($(j(e.value)))},P(e.label),11,Ze)),64))])]),o("section",Je,[o("div",{class:"flex items-center justify-between"},[c[3]||(c[3]=o("h3",{class:"uppercase text-xs tracking-widest"},"Collection",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:_}," Clear ")]),o("div",Xe,[(a(!0),u(z,null,A(b.facets.collections,e=>(a(),u("button",{key:`col-${e.slug}`,type:"button",onClick:s=>m("collections",e.slug),class:I($(d(i).collections.includes(e.slug)))},P(e.name),11,et))),128))])]),o("section",null,[o("div",{class:"flex items-center justify-between"},[c[4]||(c[4]=o("h3",{class:"uppercase text-xs tracking-widest"},"Category",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:M}," Clear ")]),o("div",tt,[(a(!0),u(z,null,A(b.facets.categories,e=>(a(),u("button",{key:e.id,type:"button",onClick:s=>m("categories",e.id),class:I($(d(i).categories.includes(e.id)))},P(e.name),11,ot))),128))])]),o("section",null,[o("div",{class:"flex items-center justify-between"},[c[5]||(c[5]=o("h3",{class:"uppercase text-xs tracking-widest"},"Size",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:L}," Clear ")]),o("div",st,[(a(!0),u(z,null,A(b.facets.sizes,e=>(a(),u("button",{key:e.name,type:"button",onClick:s=>m("sizes",e.name),class:I($(d(i).sizes.includes(e.name)))},P(e.name),11,nt))),128))])]),o("section",null,[o("div",{class:"flex items-center justify-between"},[c[6]||(c[6]=o("h3",{class:"uppercase text-xs tracking-widest"},"Colour",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:O}," Clear ")]),o("div",lt,[(a(!0),u(z,null,A(b.facets.colors,e=>(a(),u("label",{key:e.name,class:"relative cursor-pointer"},[se(o("input",{type:"checkbox",value:e.name,"onUpdate:modelValue":c[0]||(c[0]=s=>d(i).colors=s),class:"absolute inset-0 opacity-0 cursor-pointer"},null,8,rt),[[xe,d(i).colors]]),o("div",at,[o("p",it,P(e.name),1),o("div",{class:I(["w-6 h-6 border cursor-pointer transition-all duration-200",d(i).colors.includes(e.name)?"ring-2 ring-text_color":"border-gray-300"]),style:be({backgroundColor:`#${e.image}`}),title:e.name},null,14,ct)])]))),128))])])]),o("div",{class:"px-6 py-4 border-t border-text_color/30 flex items-center justify-between gap-3"},[o("button",{type:"button",class:"text-sm underline hover:no-underline transition-all duration-200",onClick:R}," Clear filters "),o("button",{type:"button",class:"btn btn--secondary",onClick:T},[...c[7]||(c[7]=[o("span",{class:"btn__text"},"View results",-1),o("span",{class:"btn__fill"},null,-1)])])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}}}),dt={id:"smooth-wrapper"},pt={id:"smooth-content"},ft={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 pt-4 gap-6"},gt={class:"flex justify-between w-full"},vt={class:"flex gap-3 justify-end w-full"},mt={class:"flex items-center gap-3"},yt=["onClick"],Z=12,jt=D({__name:"index",async setup(b){let p,E,h=null;try{h=([p,E]=we(()=>ue(()=>import("./Duwiz9RP.js").then(t=>t.a),[],import.meta.url)),p=await p,E(),p).ScrollSmoother}catch{}U.registerPlugin(K),h&&U.registerPlugin(h);const v=pe(),C=X(),i=J(),x=k(!0),B=k([]),j=k(0),m=k(1),$=k(!1),l=k({gender:[],collections:[],categories:[],sizes:[],colors:[]}),_=k({collections:[],categories:[],sizes:[],colors:[]});let M=null,L=null;const O=ee(()=>Math.max(1,Math.ceil(j.value/Z)));function R(){const t=C.query;t.page&&(m.value=Number(t.page)||1),t.gender&&(l.value.gender=[String(t.gender)]),t.collection&&(l.value.collections=Array.isArray(t.collection)?t.collection.map(String):[String(t.collection)]),t.category&&(l.value.categories=Array.isArray(t.category)?t.category.map(Number):[Number(t.category)]),t.size&&(l.value.sizes=Array.isArray(t.size)?t.size.map(String):[String(t.size)]),t.color&&(l.value.colors=Array.isArray(t.color)?t.color.map(String):[String(t.color)])}function T(){const t=new URLSearchParams;t.set("page",String(m.value)),t.set("page_size",String(Z)),l.value.collections.forEach(V=>t.append("collection",V)),l.value.categories.forEach(V=>t.append("category",String(V))),l.value.sizes.forEach(V=>t.append("size",V)),l.value.colors.forEach(V=>t.append("color",V));const g=l.value.gender[0];return g&&t.set("gender",g),t}function r(){return T().toString().replace(/\+/g,"%20")}function c(){const t={};m.value>1&&(t.page=String(m.value)),l.value.gender.length>0&&(t.gender=l.value.gender[0]),l.value.collections.length>0&&(t.collection=l.value.collections),l.value.categories.length>0&&(t.category=l.value.categories.map(String)),l.value.sizes.length>0&&(t.size=l.value.sizes),l.value.colors.length>0&&(t.color=l.value.colors),i.replace({query:t})}function w(t){m.value=t,c(),M?M.scrollTo(0,!0,"top top"):window.scrollTo({top:0,behavior:"smooth"})}async function e(){try{const t=await $fetch(`${v.public.apiBase}/public/categories/`);_.value.categories=Array.isArray(t)?t:[]}catch(t){console.error("Failed to fetch categories:",t),_.value.categories=[]}}async function s(){try{const t=await $fetch(`${v.public.apiBase}/public/sizes/`);_.value.sizes=Array.isArray(t)?t:[]}catch(t){console.error("Failed to fetch sizes:",t),_.value.sizes=[]}}async function y(){try{const t=await $fetch(`${v.public.apiBase}/public/colors/`);_.value.colors=Array.isArray(t)?t.map(g=>({name:g.name,image:g.image})):[]}catch(t){console.error("Failed to fetch colors:",t),_.value.colors=[]}}async function n(){try{const t=await $fetch(`${v.public.apiBase}/public/collections/`);_.value.collections=Array.isArray(t)?t.map(g=>({name:g.name,slug:g.slug})):[]}catch(t){console.error("Failed to fetch collections:",t),_.value.collections=[]}}async function f(){try{x.value=!0;const t=await $fetch(`${v.public.apiBase}/public/products-all/?${r()}`);j.value=t.count,B.value=t.results}catch(t){console.error("Failed to fetch products:",t)}finally{x.value=!1}}function N(){L=U.context(()=>{h&&(M=h.create({smooth:1.5,effects:!0,normalizeScroll:!0,smoothTouch:.2,wrapper:"#smooth-wrapper",content:"#smooth-content"}))})}return q(l,()=>{m.value!==1&&(m.value=1),c()},{deep:!0}),q(()=>C.query,()=>{f()}),te(async()=>{R(),await Promise.all([e(),y(),s(),n()]),await f(),Q(()=>{N()})}),oe(()=>{L?.revert(),L=null,M?.kill?.(),K.getAll().forEach(t=>t.kill())}),(t,g)=>{const V=me,le=ze,re=De,ae=ut,ie=de;return a(),u("section",null,[S(V,{dark:!1}),o("div",dt,[o("div",pt,[o("div",ft,[o("div",gt,[o("div",vt,[o("div",mt,[g[3]||(g[3]=o("span",{class:"uppercase text-xs tracking-widest ml-4"},"Page",-1)),(a(!0),u(z,null,A(d(O),F=>(a(),u("button",{key:F,type:"button",class:I([F===d(m)?"underline":"opacity-60","text-sm uppercase tracking-widest"]),onClick:_t=>w(F)},P(F),11,yt))),128)),o("button",{type:"button",class:"text-md uppercase tracking-widest",onClick:g[0]||(g[0]=F=>$.value=!0)}," Filters ")])])])]),d(x)?(a(),W(le,{key:0,class:"mt-2 md:mt-6 px-4 md:px-8",count:8})):(a(),W(re,{key:1,class:"mt-2 md:mt-6 px-4 md:px-8",products:d(B)},null,8,["products"])),S(ie,null,{default:G(()=>[S(ae,{open:d($),modelValue:d(l),"onUpdate:modelValue":g[1]||(g[1]=F=>ke(l)?l.value=F:null),facets:d(_),"onUpdate:open":g[2]||(g[2]=F=>$.value=F)},null,8,["open","modelValue","facets"])]),_:1})])])])}}});export{jt as default};
