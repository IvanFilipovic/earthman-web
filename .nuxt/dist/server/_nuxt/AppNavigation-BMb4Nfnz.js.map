{"version":3,"file":"AppNavigation-BMb4Nfnz.js","sources":["../../../../components/AppNavigation.vue"],"sourcesContent":["<template>\n  <section>\n    <div class=\"hidden md:flex flex-col lg:flex-row w-full\">\n      <div class=\"flex flex-col w-full lg:w-1/2 h-full bg-background_color\">          \n        <div class=\"absolute inset-x-0 top-0 w-1/2\">\n            <AppHeader :dark=\"true\" :navigation=\"false\" />\n        </div>\n      </div>\n      <div class=\"hidden md:flex w-full items-start justify-end lg:w-1/2 px-4 md:px-8 md:py-14 lg:py-24 gap-6 h-full\">\n              <section class=\"flex flex-col justify-end w-full bg-transparent z-50 my-auto\">\n                <div class=\"flex pt-4\">\n                <div class=\"flex flex-row justify-end w-full mx-auto space-x-4 py-4\">\n                  <NuxtLink\n                    to=\"/shop\"\n                    :class=\"[linkColorClass, navWeight('/shop'), 'text-sm my-auto px-4']\"\n                  >\n                    SHOP\n                  </NuxtLink>\n                  <!-- Static links -->\n                  <NuxtLink\n                    to=\"/collections\"\n                    :class=\"[linkColorClass, navWeight('/collections'), 'text-sm my-auto px-4']\"\n                  >PROJECTS</NuxtLink>\n\n                  <NuxtLink\n                    to=\"/about\"\n                    :class=\"[linkColorClass, navWeight('/about'), 'text-sm my-auto px-4']\"\n                  >OUR STORY</NuxtLink>\n\n                  <!-- Cart -->\n                  <ClientOnly>\n                    <NuxtLink\n                      class=\"relative my-auto px-4 cursor-pointer\"\n                      :class=\"[linkColorClass, navWeight('/cart')]\"\n                      @click=\"cartOpen = true\"\n                    >\n                      <Icon name=\"lucide:shopping-cart\" class=\"w-6 h-6\" :class=\"linkColorClass\" />\n                      <span\n                        v-if=\"itemCount > 0\"\n                        class=\"absolute -top-1 -right-1 bg-text_color text-background_color text-[12px] w-4 h-4 flex items-center justify-center\"\n                      >\n                        {{ itemCount }}\n                      </span>\n                    </NuxtLink>\n                  </ClientOnly>\n\n                  <!-- User icon -->\n                  <NuxtLink\n                    to=\"/profile\"\n                    :class=\"[linkColorClass, navWeight('/profile'), 'my-auto font-light pl-4']\"\n                  >\n                    <Icon name=\"lucide:circle-user-round\" class=\"w-6 h-6\" :class=\"linkColorClass\" />\n                  </NuxtLink>\n                  </div>\n                  <ClientOnly>\n                    <CartPanel v-model:open=\"cartOpen\" :dark=\"false\" />\n                    <MobileMenu v-model:open=\"mobileMenuOpen\" :dark=\"false\" />\n                  </ClientOnly>\n                </div>\n              </section>\n      </div>\n    </div>\n    <section class=\"flex md:hidden flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 py-6 gap-6 border-b border-text_color/30\">\n      <div class=\"flex md:hidden items-center justify-between w-full px-2\">\n      <!-- Logo -->\n      <div class=\"w-[60%]\">\n        <NuxtLink to=\"/\" class=\"image bg-cover bg-center bg-transparent h-12 flex justify-start max-w-[100%]\"></NuxtLink>\n      </div>\n\n      <!-- Icons -->\n      <div class=\"flex items-center gap-4\">\n        <!-- Cart -->\n        <ClientOnly>\n          <NuxtLink\n            class=\"relative cursor-pointer\"\n            :class=\"linkColorClass\"\n            @click=\"cartOpen = true\"\n          >\n            <Icon name=\"lucide:shopping-cart\" class=\"w-6 h-6\" :class=\"linkColorClass\" />\n            <span\n              v-if=\"itemCount > 0\"\n              class=\"absolute -top-1 -right-1 bg-text_color text-background_color text-[10px] w-[14px] h-[14px] md:text-[12px] md:w-4 md:h-4 flex items-center justify-center\"\n            >\n              {{ itemCount }}\n            </span>\n          </NuxtLink>\n        </ClientOnly>\n\n        <!-- Hamburger -->\n        <button @click=\"mobileMenuOpen = true\">\n          <Icon name=\"lucide:menu\" class=\"w-7 h-7\" :class=\"linkColorClass\" />\n        </button>\n      </div>\n      </div>\n    </section>\n  </section>\n</template>\n\n\n<script setup lang=\"ts\">\nimport {\n  Menu, MenuButton, MenuItems, MenuItem,\n  TransitionRoot, TransitionChild\n} from '@headlessui/vue'\n\nconst props = defineProps({ dark: { type: Boolean, default: false } })\nconst route = useRoute()\nconst cartOpen = ref(false)\nconst config = useRuntimeConfig()\nconst itemCount = ref(0)\nconst mobileMenuOpen = ref(false)\n\n\n// --- NAV LOGIC ---\nconst isPathActive = (path: string) =>\n  route.path === path || route.path.startsWith(path + '/')\nconst navWeight = (path: string) => (isPathActive(path) ? 'font-bold' : 'font-light')\nconst isShopGender = (g: 'male' | 'female') =>\n  isPathActive('/shop') && route.query.gender === g\nconst linkColorClass = computed(() =>\n  props.dark ? 'text-background_color' : 'text-text_color'\n)\n\n// --- CART LOGIC ---\n\ninterface CartResponse { items: unknown[] }\n\nlet inflight: AbortController | null = null\n\nasync function fetchCart() {\n  // cancel any previous request\n  if (inflight) inflight.abort()\n  inflight = new AbortController()\n\n  try {\n    const res = await $fetch<CartResponse>('/api/private/get/cart', { signal: inflight.signal })\n    itemCount.value = Array.isArray(res?.items) ? res.items.length : 0\n  } catch (err) {\n    console.warn('Cart fetch failed', err)\n  } finally {\n    inflight = null\n  }\n}\n\nconst onCartUpdated = () => fetchCart()\n\nonMounted(() => {\n  fetchCart()\n  window.addEventListener('cart:updated', onCartUpdated)\n})\n\nonBeforeUnmount(() => {\n  window.removeEventListener('cart:updated', onCartUpdated)\n})\n</script>\n<style scoped>\n.image {\nbackground-image: url(\"public/logo/earth-man920.png\");\n}\n</style>\n"],"names":["_unref","_push","_parent","_createVNode"],"mappings":";;;;;;;;;;AAyGA,UAAM,QAAQ;AACd,UAAM,QAAQ,SAAA;AACG,QAAI,KAAK;AAER,QAAI,CAAC;AACA,QAAI,KAAK;AAIhC,UAAM,eAAe,CAAC,SACpB,MAAM,SAAS,QAAQ,MAAM,KAAK,WAAW,OAAO,GAAG;AACzD,UAAM,YAAY,CAAC,SAAkB,aAAa,IAAI,IAAI,cAAc;AAGxE,UAAM,iBAAiB;AAAA,MAAS,MAC9B,MAAM,OAAO,0BAA0B;AAAA,IAAA;;;;;;;;QAnHjB,MAAM;AAAA,QAAO,YAAY;AAAA,MAAA;;;QAQ7B,IAAG;AAAA,QACF,OAAK,CAAGA,MAAA,cAAA,GAAgB,UAAS,OAAA,GAAA,sBAAA;AAAA,MAAA;yBAFpC,CAKW,GAAAC,QAAAC,UAAA,aAAA;;;;;8BAFV,QAED;AAAA,YAAA;AAAA;;;;;QAGE,IAAG;AAAA,QACF,OAAK,CAAGF,MAAA,cAAA,GAAgB,UAAS,cAAA,GAAA,sBAAA;AAAA,MAAA;yBAFpC,CAGoB,GAAAC,QAAAC,UAAA,aAAA;;;;;8BAAnB,UAAQ;AAAA,YAAA;AAAA;;;;;QAGP,IAAG;AAAA,QACF,OAAK,CAAGF,MAAA,cAAA,GAAgB,UAAS,QAAA,GAAA,sBAAA;AAAA,MAAA;yBAFpC,CAGqB,GAAAC,QAAAC,UAAA,aAAA;;;;;8BAApB,WAAS;AAAA,YAAA;AAAA;;;;;;QAqBR,IAAG;AAAA,QACF,OAAK,CAAGF,MAAA,cAAA,GAAgB,UAAS,UAAA,GAAA,yBAAA;AAAA,MAAA;yBAFpC,CAKW,GAAAC,QAAAC,UAAA,aAAA;;;cADH,MAAK;AAAA,cAA2B,OAAK,CAAC,WAAkBF,MAAA,cAAA,CAAc;AAAA,YAAA;;;cAA5EG,YAAgF,iBAAA;AAAA,gBAA1E,MAAK;AAAA,gBAA2B,OAAK,CAAC,WAAkBH,MAAA,cAAA,CAAc;AAAA,cAAA;;;;;;;;;;QAe9E,IAAG;AAAA,QAAI,OAAM;AAAA,MAAA;;;;;QAwBf,MAAK;AAAA,QAAc,OAAK,CAAC,WAAkBA,MAAA,cAAA,CAAc;AAAA,MAAA;;;;;;;;;;;;"}