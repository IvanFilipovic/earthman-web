{"file":"AppNavigation-DbbUjllq.js","mappings":"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","names":["_push","_parent","_ssrRenderAttr","_createVNode","_unref"],"sources":["../../../../stores/cart.ts","../../../../components/AppNavigation.vue"],"sourcesContent":["// stores/cart.ts\nimport { defineStore } from 'pinia'\n\ninterface CartItem {\n  product: string\n  product_slug: string\n  product_variant_slug?: string\n  avatar_image: string\n  size?: string\n  quantity: number\n  unit_price_original: string\n  unit_price_discounted: string\n}\n\ninterface CartData {\n  items: CartItem[]\n  cart_total_to_pay: string\n  cart_total_original_price?: string\n  cart_total_discounted_price?: string\n  cart_total_savings?: string\n}\n\ninterface CartState {\n  items: CartItem[]\n  totals: {\n    toPay: string\n  }\n  loading: boolean\n  lastFetched: number | null\n}\n\nexport const useCartStore = defineStore('cart', {\n  state: (): CartState => ({\n    items: [],\n    totals: {\n      toPay: '0.00'\n    },\n    loading: false,\n    lastFetched: null\n  }),\n\n  getters: {\n    itemCount: (state): number => {\n      return state.items.reduce((sum, item) => sum + item.quantity, 0)\n    },\n\n    getVariantQuantity: (state) => {\n      return (variantSlug: string): number => {\n        const item = state.items.find(i => \n          i.product_slug === variantSlug || i.product_variant_slug === variantSlug\n        )\n        return item?.quantity || 0\n      }\n    },\n\n    merchandiseTotal: (state): number => {\n      return state.items.reduce((sum, item) => {\n        const price = parseFloat(item.unit_price_discounted || item.unit_price_original)\n        return sum + (price * item.quantity)\n      }, 0)\n    },\n\n    hasItems: (state): boolean => {\n      return state.items.length > 0\n    }\n  },\n\n  actions: {\n    async fetchCart(force = false): Promise<void> {\n      const now = Date.now()\n      const CACHE_TIME = 30000 // 30 seconds\n      \n      if (!force && this.lastFetched && (now - this.lastFetched) < CACHE_TIME) {\n        return\n      }\n\n      this.loading = true\n      \n      try {\n        const data = await $fetch<any>('/api/private/get/cart')\n        this.items = data?.items || []\n        this.totals = { toPay: data?.cart_total_to_pay || '0.00' }\n        this.lastFetched = now\n      } catch (error) {\n        console.error('Failed to fetch cart:', error)\n        this.items = []\n        this.totals = { toPay: '0.00' }\n      } finally {\n        this.loading = false\n      }\n    },\n\n    async addToCart(variantSlug: string, quantity: number): Promise<void> {\n      const existingQuantity = this.getVariantQuantity(variantSlug)\n      const totalQuantity = existingQuantity + quantity\n      \n      const existingItem = this.items.find(i => \n        i.product_slug === variantSlug || i.product_variant_slug === variantSlug\n      )\n      const oldQuantity = existingItem?.quantity || 0\n\n      if (existingItem) {\n        existingItem.quantity = totalQuantity\n      }\n\n      const newTotal = this.merchandiseTotal.toFixed(2)\n      this.totals.toPay = newTotal\n\n      try {\n        await $fetch('/api/private/put/cart', {\n          method: 'PUT',\n          headers: { 'Content-Type': 'application/json' },\n          body: {\n            product_slug: variantSlug,\n            quantity: totalQuantity,\n          },\n        })\n\n        if (import.meta.client) {\n          window.dispatchEvent(new CustomEvent('cart:updated', {\n            detail: { source: 'store', variant: variantSlug, quantity: totalQuantity }\n          }))\n        }\n      } catch (error) {\n        if (existingItem) {\n          if (oldQuantity > 0) {\n            existingItem.quantity = oldQuantity\n          } else {\n            const index = this.items.findIndex(i => \n              i.product_slug === variantSlug || i.product_variant_slug === variantSlug\n            )\n            if (index > -1) this.items.splice(index, 1)\n          }\n        }\n        const revertTotal = this.merchandiseTotal.toFixed(2)\n        this.totals.toPay = revertTotal\n        throw error\n      }\n    },\n\n    async removeFromCart(item: CartItem): Promise<void> {\n      const variantSlug = item.product_slug || item.product_variant_slug\n      if (!variantSlug) {\n        console.error('No slug found in item:', item)\n        return\n      }\n      \n      const index = this.items.findIndex(i => \n        i.product_slug === variantSlug || i.product_variant_slug === variantSlug\n      )\n      \n      if (index === -1) return\n\n      const removedItem = this.items.splice(index, 1)[0]\n\n      try {\n        await $fetch(`/api/private/delete/cart?product_slug=${encodeURIComponent(variantSlug)}`, {\n          method: 'DELETE',\n        })\n\n        const newTotal = this.merchandiseTotal.toFixed(2)\n        this.totals.toPay = newTotal\n\n        if (import.meta.client) {\n          window.dispatchEvent(new CustomEvent('cart:updated', {\n            detail: { source: 'store', variant: variantSlug, action: 'remove' }\n          }))\n        }\n      } catch (error) {\n        console.error('‚ùå removeFromCart - Error:', error)\n        this.items.splice(index, 0, removedItem)\n        throw error\n      }\n    },\n\n    async updateQuantity(variantSlug: string, quantity: number): Promise<void> {\n      const item = this.items.find(i => \n        i.product_slug === variantSlug || i.product_variant_slug === variantSlug\n      )\n      if (!item) return\n\n      const oldQuantity = item.quantity\n      item.quantity = quantity\n\n      const newTotal = this.merchandiseTotal.toFixed(2)\n      this.totals.toPay = newTotal\n\n      try {\n        await $fetch('/api/private/put/cart', {\n          method: 'PUT',\n          headers: { 'Content-Type': 'application/json' },\n          body: {\n            product_slug: variantSlug,\n            quantity,\n          },\n        })\n\n        if (import.meta.client) {\n          window.dispatchEvent(new CustomEvent('cart:updated', {\n            detail: { source: 'store', variant: variantSlug, quantity }\n          }))\n        }\n      } catch (error) {\n        item.quantity = oldQuantity\n        const revertTotal = this.merchandiseTotal.toFixed(2)\n        this.totals.toPay = revertTotal\n        throw error\n      }\n    },\n\n    clearCache(): void {\n      this.lastFetched = null\n    },\n\n    async clearCart(): Promise<void> {\n      const itemsBackup = [...this.items]\n      const totalsBackup = { ...this.totals }\n\n      this.items = []\n      this.totals = { toPay: '0.00' }\n\n      try {\n        await $fetch('/api/private/cart/clear', {\n          method: 'DELETE',\n        })\n\n        if (import.meta.client) {\n          window.dispatchEvent(new CustomEvent('cart:updated', {\n            detail: { source: 'store', action: 'clear' }\n          }))\n        }\n      } catch (error) {\n        this.items = itemsBackup\n        this.totals = totalsBackup\n        throw error\n      }\n    }\n  }\n})","<template>\n  <section>\n    <!-- Desktop Navigation -->\n    <div class=\"hidden md:flex flex-col lg:flex-row w-full z-50\">\n      <!-- Logo Section -->\n      <div class=\"flex flex-col w-full lg:w-1/2\">          \n        <div class=\"absolute inset-x-0 top-0 w-1/2 md:px-8\">\n          <NuxtLink\n            to=\"/\"\n            class=\"flex justify-center py-6\"\n          >\n            <img \n              src=\"/logo/earth-man920.png\" \n              alt=\"Earth Man Logo\" \n              class=\"max-w-[100%] h-auto object-contain\" \n            />\n          </NuxtLink>\n        </div>\n      </div>\n\n      <!-- Navigation Links Section -->\n      <div class=\"hidden md:flex w-full items-start justify-end lg:w-1/2 px-4 md:px-8 md:py-14 lg:py-24 gap-6 h-full\">\n        <section class=\"flex flex-col justify-end w-full bg-transparent z-50 my-auto\">\n          <div class=\"flex pt-4\">\n            <div class=\"flex flex-row justify-end w-full mx-auto space-x-4 py-4\">\n              <NuxtLink\n                to=\"/shop\"\n                :class=\"[linkColorClass, getNavWeight('/shop'), 'text-sm my-auto px-4']\"\n              >\n                SHOP\n              </NuxtLink>\n\n              <NuxtLink\n                to=\"/collections\"\n                :class=\"[linkColorClass, getNavWeight('/collections'), 'text-sm my-auto px-4']\"\n              >\n                STORIES\n              </NuxtLink>\n\n              <NuxtLink\n                to=\"/about\"\n                :class=\"[linkColorClass, getNavWeight('/about'), 'text-sm my-auto px-4']\"\n              >\n                ABOUT\n              </NuxtLink>\n\n              <!-- Cart Icon -->\n              <ClientOnly>\n                <button\n                  type=\"button\"\n                  class=\"relative my-auto px-4 cursor-pointer\"\n                  :class=\"[linkColorClass, getNavWeight('/cart')]\"\n                  @click=\"openCart\"\n                  aria-label=\"Open shopping cart\"\n                >\n                  <Icon name=\"lucide:shopping-cart\" class=\"w-6 h-6\" :class=\"linkColorClass\" />\n                  <span\n                    v-if=\"cartStore.itemCount > 0\"\n                    class=\"absolute -top-1 -right-1 bg-text_color text-background_color text-[12px] w-4 h-4 flex items-center justify-center\"\n                    :aria-label=\"`${cartStore.itemCount} items in cart`\"\n                  >\n                    {{ cartStore.itemCount }}\n                  </span>\n                </button>\n              </ClientOnly>\n\n              <!-- User Profile Icon -->\n              <NuxtLink\n                to=\"/profile\"\n                :class=\"[linkColorClass, getNavWeight('/profile'), 'my-auto font-light pl-4']\"\n                aria-label=\"User profile\"\n              >\n                <Icon name=\"lucide:circle-user-round\" class=\"w-6 h-6\" :class=\"linkColorClass\" />\n              </NuxtLink>\n            </div>\n\n            <ClientOnly>\n              <CartPanel v-model:open=\"cartOpen\" />\n              <MobileMenu v-model:open=\"mobileMenuOpen\" />\n            </ClientOnly>\n          </div>\n        </section>\n      </div>\n    </div>\n\n    <!-- Mobile Navigation -->\n    <section class=\"flex md:hidden flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 py-6 gap-6\">\n      <div class=\"flex md:hidden items-center justify-between w-full px-2\">\n        <!-- Mobile Logo -->\n        <div class=\"w-[60%] max-w-[200px]\">\n          <NuxtLink to=\"/\" class=\"block\">\n            <img \n              src=\"/logo/earth-man920.png\" \n              alt=\"Earth Man Logo\" \n              class=\"w-full h-auto max-h-12 object-contain object-left\"\n            />\n          </NuxtLink>\n        </div>\n\n        <!-- Mobile Icons -->\n        <div class=\"flex items-center gap-4\">\n          <!-- Cart Icon -->\n          <ClientOnly>\n            <button\n              type=\"button\"\n              class=\"relative cursor-pointer\"\n              :class=\"linkColorClass\"\n              @click=\"openCart\"\n              aria-label=\"Open shopping cart\"\n            >\n              <Icon name=\"lucide:shopping-cart\" class=\"w-6 h-6\" :class=\"linkColorClass\" />\n              <span\n                v-if=\"cartStore.itemCount > 0\"\n                class=\"absolute -top-1 -right-1 bg-text_color text-background_color text-[10px] w-[14px] h-[14px] md:text-[12px] md:w-4 md:h-4 flex items-center justify-center\"\n                :aria-label=\"`${cartStore.itemCount} items in cart`\"\n              >\n                {{ cartStore.itemCount }}\n              </span>\n            </button>\n          </ClientOnly>\n\n          <!-- Hamburger Menu -->\n          <button \n            type=\"button\"\n            @click=\"openMobileMenu\"\n            aria-label=\"Open menu\"\n          >\n            <Icon name=\"lucide:menu\" class=\"w-7 h-7\" :class=\"linkColorClass\" />\n          </button>\n        </div>\n      </div>\n    </section>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport { useCartStore } from '~/stores/cart'\n\ninterface Props {\n  dark?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  dark: false\n})\n\nconst route = useRoute()\nconst cartStore = useCartStore()\n\nconst cartOpen = ref(false)\nconst mobileMenuOpen = ref(false)\n\nconst linkColorClass = computed(() =>\n  props.dark ? 'text-background_color' : 'text-text_color'\n)\n\nfunction isPathActive(path: string): boolean {\n  return route.path === path || route.path.startsWith(`${path}/`)\n}\n\nfunction getNavWeight(path: string): string {\n  return isPathActive(path) ? 'font-bold' : 'font-light'\n}\n\nfunction openCart(): void {\n  cartOpen.value = true\n}\n\nfunction openMobileMenu(): void {\n  mobileMenuOpen.value = true\n}\n\nfunction handleCartUpdate(): void {\n  // Force refetch cart to ensure accurate count\n  cartStore.fetchCart(true)\n}\n\n// Emit events for ScrollSmoother pages when cart opens/closes\nwatch(cartOpen, (isOpen) => {\n  if (import.meta.client) {\n    window.dispatchEvent(new CustomEvent(isOpen ? 'panel:open' : 'panel:close'))\n  }\n})\n\n// Emit events for ScrollSmoother pages when mobile menu opens/closes\nwatch(mobileMenuOpen, (isOpen) => {\n  if (import.meta.client) {\n    window.dispatchEvent(new CustomEvent(isOpen ? 'panel:open' : 'panel:close'))\n  }\n})\n\nonMounted(async () => {\n  await cartStore.fetchCart()\n  \n  // Listen for cart updates from other components\n  if (import.meta.client) {\n    window.addEventListener('cart:updated', handleCartUpdate)\n  }\n})\n\nonBeforeUnmount(() => {\n  if (import.meta.client) {\n    window.removeEventListener('cart:updated', handleCartUpdate)\n  }\n})\n</script>\n\n<style scoped>\n/* Fallback for browsers that don't support object-contain */\n@supports not (object-fit: contain) {\n  img {\n    max-width: 100%;\n    height: auto;\n  }\n}\n</style>"],"version":3}