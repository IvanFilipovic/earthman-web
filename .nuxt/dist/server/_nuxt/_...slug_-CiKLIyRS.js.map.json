{"file":"_...slug_-CiKLIyRS.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_unref","_ssrRenderAttr","_ssrInterpolate","_ssrRenderList","_push","_parent","_createVNode","_ssrRenderClass","_withAsyncContext","_ssrRenderComponent"],"sources":["../../../../components/MobileColorSlider.vue","../../../../components/testCollectionListing.vue","../../../../pages/collections/[...slug].vue"],"sourcesContent":["<template>\n  <div v-if=\"colors && colors.length > 0\" class=\"block md:hidden\">\n    <div ref=\"sliderRef\" class=\"keen-slider\">\n      <div\n        v-for=\"(color, i) in colors\"\n        :key=\"i\"\n        class=\"keen-slider__slide\"\n      >\n        <img\n          :src=\"color.avatar_image\"\n          :alt=\"color.color\"\n          class=\"w-full h-auto object-cover border border-text_color/30\"\n          loading=\"lazy\"\n          @click=\"handleClick(color)\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useKeenSlider } from 'keen-slider/vue.es'\nimport type { KeenSliderInstance } from 'keen-slider'\nimport 'keen-slider/keen-slider.min.css'\n\ninterface ProductColor {\n  color: string\n  avatar_image: string\n  variant_slug: string\n}\n\ninterface Props {\n  colors: ProductColor[]\n}\n\ninterface Emits {\n  (e: 'go', variantSlug: string): void\n}\n\nconst props = defineProps<Props>()\nconst emit = defineEmits<Emits>()\n\nconst current = ref(0)\n\nconst [sliderRef, slider] = useKeenSlider({\n  loop: true,\n  initial: 0,\n  slideChanged(s: KeenSliderInstance) {\n    current.value = s.track.details.rel\n  },\n})\n\nwatch(\n  () => props.colors?.length,\n  async () => {\n    await nextTick()\n    if (slider.value) {\n      slider.value.update()\n      slider.value.moveToIdx(0)\n      current.value = 0\n    }\n  }\n)\n\nfunction handleClick(color: ProductColor): void {\n  if (color.variant_slug) {\n    emit('go', color.variant_slug)\n  }\n}\n</script>","<template>\n  <section class=\"pt-8 mt-2 md:mt-6 px-4 md:px-8\">\n    <div class=\"collection-content\">\n      <div v-for=\"(section, idx) in sections\" :key=\"idx\">\n        <div v-if=\"section.layout === 'hero'\" class=\"pb-8 md:pb-12\">\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8 min-h-screen\">\n            <article\n              v-for=\"item in section.items\"\n              :key=\"item.slug\"\n              class=\"group cursor-pointer relative min-h-[50vh] md:min-h-full overflow-hidden w-full\"\n            >\n              <img\n                :src=\"item.currentImage || item.colors?.[0]?.avatar_image\"\n                :alt=\"item.alt_text || item.name\"\n                class=\"absolute inset-0 max-w-full h-full object-contain mx-auto transition-transform duration-700 group-hover:scale-105\"\n                loading=\"lazy\"\n                @mouseenter=\"hoveredSlug = item.slug\"\n                @mouseleave=\"hoveredSlug = null\"\n              />\n              <div class=\"absolute inset-0\"></div>\n              \n              <div class=\"absolute bottom-0 left-0 right-0 p-4 md:p-6 text-text_color bg-background_color/80 w-full\">\n                <div class=\"hero-content\">\n                  <p class=\"text-xs tracking-widest uppercase mb-1 opacity-80\">\n                    {{ item.category }}\n                  </p>\n                  <h2 class=\"hero-title text-2xl md:text-3xl lg:text-4xl font-bold mb-3 uppercase tracking-tight\">\n                    {{ item.name }}\n                  </h2>\n                  \n                  <div class=\"flex items-center gap-2 mb-4\">\n                    <div \n                      v-for=\"(color, colorIdx) in item.colors?.slice(0, 4)\"\n                      :key=\"colorIdx\"\n                      class=\"relative\"\n                      @mouseenter=\"onEnterColor(item, color, colorIdx)\"\n                      @mouseleave=\"onLeaveColor(item)\"\n                    >\n                      <img\n                        :src=\"color.avatar_image\"\n                        :alt=\"color.color\"\n                        class=\"w-8 h-8 md:w-10 md:h-10 object-cover border-2 border-background_color cursor-pointer transition-transform hover:scale-110\"\n                        @click=\"goToProduct(item.slug, color.variant_slug)\"\n                      />\n                    </div>\n                  </div>\n\n                  <NuxtLink\n                    :to=\"`/product/${item.slug}/${item.colors?.[0]?.variant_slug}`\"\n                    class=\"btn btn--secondary inline-flex text-sm\"\n                  >\n                    <span class=\"btn__text\">Discover</span>\n                    <span class=\"btn__fill\"></span>\n                  </NuxtLink>\n                </div>\n              </div>\n            </article>\n          </div>\n        </div>\n\n        <div v-else-if=\"section.layout === 'triple'\" class=\"pb-8 md:pb-12\">\n          <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-8\">\n            <article\n              v-for=\"item in section.items\"\n              :key=\"item.slug\"\n              class=\"group cursor-pointer\"\n            >\n              <div class=\"relative overflow-hidden\">\n                <img\n                  :src=\"item.currentImage || item.colors?.[0]?.avatar_image\"\n                  :alt=\"item.alt_text || item.name\"\n                  class=\"hidden md:block w-full h-full object-cover border border-text_color/30 transition-transform duration-500 group-hover:scale-105\"\n                  loading=\"lazy\"\n                  @mouseenter=\"hoveredSlug = item.slug\"\n                  @mouseleave=\"hoveredSlug = null\"\n                  @click=\"goToProduct(item.slug, item.colors?.[0]?.variant_slug)\"\n                />\n\n                <MobileColorSlider\n                  v-if=\"item.colors && item.colors.length > 0\"\n                  :colors=\"item.colors\"\n                  @go=\"(variantSlug: string) => goToProduct(item.slug, variantSlug)\"\n                />\n                <div v-else class=\"block md:hidden\">\n                  <img\n                    :src=\"item.currentImage\"\n                    :alt=\"item.alt_text || item.name\"\n                    class=\"w-full h-auto object-cover border border-text_color/30\"\n                    loading=\"lazy\"\n                    @click=\"goToProduct(item.slug, item.colors?.[0]?.variant_slug)\"\n                  />\n                </div>\n\n                <button\n                  v-show=\"hoveredSlug === item.slug\"\n                  type=\"button\"\n                  class=\"absolute top-4 left-4 bg-text_color text-background_color tracking-wider text-xs font-light px-2 transition-opacity duration-200\"\n                  :class=\"{ 'opacity-100': hoveredSlug === item.slug, 'opacity-0': hoveredSlug !== item.slug }\"\n                  @click=\"goToProduct(item.slug, item.colors?.[0]?.variant_slug)\"\n                >\n                  VIEW\n                </button>\n              </div>\n\n              <div class=\"pt-3 md:pt-4 text-left\">\n                <p class=\"text-xs tracking-wider font-extralight\">{{ item.category }}</p>\n                <h3 class=\"uppercase tracking-wider text-sm font-normal truncate py-1\">{{ item.name }}</h3>\n                \n                <div v-if=\"item.colors && item.colors.length > 0\" class=\"mt-1 flex items-center gap-2\">\n                  <div\n                    v-for=\"(color, colorIdx) in item.colors\"\n                    :key=\"colorIdx\"\n                    class=\"relative\"\n                    @mouseenter=\"onEnterColor(item, color, colorIdx)\"\n                    @mouseleave=\"onLeaveColor(item)\"\n                  >\n                    <img\n                      :src=\"color.avatar_image\"\n                      :alt=\"color.color\"\n                      class=\"w-7 h-7 md:h-8 md:w-8 object-cover border border-project_text_color/40 cursor-pointer\"\n                      loading=\"lazy\"\n                      @click=\"goToProduct(item.slug, color.variant_slug)\"\n                    />\n                    <div\n                      class=\"absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color\"\n                      :class=\"isColorHovered(item, colorIdx) ? 'opacity-100' : 'opacity-0'\"\n                    >\n                      <Icon\n                        name=\"lucide:square-arrow-out-up-right\"\n                        class=\"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </article>\n          </div>\n        </div>\n\n        <div v-else class=\"pb-8 md:pb-12\">\n          <div class=\"grid grid-cols-2 md:grid-cols-3 gap-x-4 md:gap-x-8 lg:gap-x-24 gap-y-8\" :class=\"section.layout === 'reversed' ? 'md:flex md:flex-row-reverse' : ''\">\n            <article\n              v-for=\"item in section.items\"\n              :key=\"item.slug\"\n              class=\"group cursor-pointer col-span-2 md:col-span-1\"\n            >\n              <div class=\"relative overflow-hidden\">\n                <img\n                  :src=\"item.currentImage || item.colors?.[0]?.avatar_image\"\n                  :alt=\"item.alt_text || item.name\"\n                  class=\"hidden md:block w-full h-full object-cover border border-text_color/30 transition-transform duration-500 group-hover:scale-105\"\n                  loading=\"lazy\"\n                  @mouseenter=\"hoveredSlug = item.slug\"\n                  @mouseleave=\"hoveredSlug = null\"\n                  @click=\"goToProduct(item.slug, item.colors?.[0]?.variant_slug)\"\n                />\n\n                <MobileColorSlider\n                  v-if=\"item.colors && item.colors.length > 0\"\n                  :colors=\"item.colors\"\n                  @go=\"(variantSlug: string) => goToProduct(item.slug, variantSlug)\"\n                />\n                <div v-else class=\"block md:hidden\">\n                  <img\n                    :src=\"item.currentImage\"\n                    :alt=\"item.alt_text || item.name\"\n                    class=\"w-full h-auto object-cover border border-text_color/30\"\n                    loading=\"lazy\"\n                    @click=\"goToProduct(item.slug, item.colors?.[0]?.variant_slug)\"\n                  />\n                </div>\n\n                <button\n                  v-show=\"hoveredSlug === item.slug\"\n                  type=\"button\"\n                  class=\"absolute top-4 left-4 bg-text_color text-background_color tracking-wider text-xs font-light px-2 transition-opacity duration-200\"\n                  :class=\"{ 'opacity-100': hoveredSlug === item.slug, 'opacity-0': hoveredSlug !== item.slug }\"\n                  @click=\"goToProduct(item.slug, item.colors?.[0]?.variant_slug)\"\n                >\n                  VIEW\n                </button>\n              </div>\n\n              <div class=\"pt-3 md:pt-4 text-left\">\n                <p class=\"text-xs tracking-wider font-extralight\">{{ item.category }}</p>\n                <h3 class=\"uppercase tracking-wider text-sm font-normal truncate py-1\">{{ item.name }}</h3>\n                \n                <div v-if=\"item.colors && item.colors.length > 0\" class=\"mt-1 flex items-center gap-2\">\n                  <div\n                    v-for=\"(color, colorIdx) in item.colors\"\n                    :key=\"colorIdx\"\n                    class=\"relative\"\n                    @mouseenter=\"onEnterColor(item, color, colorIdx)\"\n                    @mouseleave=\"onLeaveColor(item)\"\n                  >\n                    <img\n                      :src=\"color.avatar_image\"\n                      :alt=\"color.color\"\n                      class=\"w-7 h-7 md:h-8 md:w-8 object-cover border border-project_text_color/40 cursor-pointer\"\n                      loading=\"lazy\"\n                      @click=\"goToProduct(item.slug, color.variant_slug)\"\n                    />\n                    <div\n                      class=\"absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color\"\n                      :class=\"isColorHovered(item, colorIdx) ? 'opacity-100' : 'opacity-0'\"\n                    >\n                      <Icon\n                        name=\"lucide:square-arrow-out-up-right\"\n                        class=\"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </article>\n\n            <div class=\"col-span-2 md:col-span-2 flex flex-col justify-center section-trigger-line\">\n              <h4 class=\"section-heading uppercase tracking-wider text-xs md:text-sm mb-3 px-4\">\n                {{ section.heading }}\n              </h4>\n              <div class=\"flex flex-col\">\n                <span\n                  v-for=\"(line, i) in splitText(section.text)\"\n                  :key=\"i\"\n                  class=\"section-text-line -mx-4 px-4 md:-mx-0 py-1 md:py-2 my-1 md:my-3 text-sm md:text-base leading-relaxed tracking-wide bg-text_color text-background_color\"\n                >\n                  {{ line }}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div v-if=\"idx < sections.length - 1 && shouldShowSeparator(idx)\" class=\"flex justify-center py-4 md:py-6\">\n          <div class=\"w-64 h-px bg-text_color/30\"></div>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport gsap from 'gsap'\nimport { ScrollTrigger } from 'gsap/ScrollTrigger'\n\ngsap.registerPlugin(ScrollTrigger)\n\ninterface ProductColor {\n  color: string\n  avatar_image: string\n  variant_slug: string\n}\n\ninterface Product {\n  slug: string\n  name: string\n  category: string\n  price: string\n  alt_text?: string\n  hot?: boolean\n  colors?: ProductColor[]\n  currentImage?: string\n  defaultImage?: string\n}\n\ninterface Collection {\n  name?: string\n  element_one?: string\n  element_two?: string\n  element_three?: string\n  element_four?: string\n  element_five?: string\n}\n\ninterface GridSection {\n  layout: 'standard' | 'reversed' | 'hero' | 'triple'\n  items: Product[]\n  text: string\n  heading: string\n}\n\ninterface Props {\n  products: Product[]\n  collection: Collection\n}\n\nconst props = defineProps<Props>()\nconst router = useRouter()\n\nconst hoveredSlug = ref<string | null>(null)\nconst hoveredColorIndex = ref<Record<string, number | null>>({})\n\nlet ctx: gsap.Context | null = null\n\nconst textElements = computed(() => {\n  const c = props.collection || {}\n  return [\n    c.element_one,\n    c.element_two,\n    c.element_three,\n    c.element_four,\n    c.element_five,\n  ].filter(Boolean)\n})\n\nconst sections = computed<GridSection[]>(() => {\n  const allProducts = [...props.products]\n  const result: GridSection[] = []\n  let i = 0\n  \n  // Product 1 (standard + text 1)\n  if (allProducts.length >= 1) {\n    result.push({\n      layout: 'standard',\n      items: [allProducts[0]],\n      text: textElements.value[0] || '',\n      heading: props.collection?.name || 'Collection'\n    })\n    i = 1\n  }\n  \n  // Product 2 (reversed + text 2)\n  if (allProducts.length >= 2) {\n    result.push({\n      layout: 'reversed',\n      items: [allProducts[1]],\n      text: textElements.value[1] || '',\n      heading: props.collection?.name || 'Collection'\n    })\n    i = 2\n  }\n  \n  // Product 3 (standard + text 3)\n  if (allProducts.length >= 3) {\n    result.push({\n      layout: 'standard',\n      items: [allProducts[2]],\n      text: textElements.value[2] || '',\n      heading: props.collection?.name || 'Collection'\n    })\n    i = 3\n  }\n  \n  // Products 4+5 (hero, no text)\n  if (allProducts.length >= 5) {\n    result.push({\n      layout: 'hero',\n      items: [allProducts[3], allProducts[4]],\n      text: '',\n      heading: ''\n    })\n    i = 5\n  }\n  \n  // Product 6 (reversed + text 4)\n  if (allProducts.length >= 6) {\n    result.push({\n      layout: 'reversed',\n      items: [allProducts[5]],\n      text: textElements.value[3] || '',\n      heading: props.collection?.name || 'Collection'\n    })\n    i = 6\n  }\n  \n  // Product 7 (standard + text 5)\n  if (allProducts.length >= 7) {\n    result.push({\n      layout: 'standard',\n      items: [allProducts[6]],\n      text: textElements.value[4] || '',\n      heading: props.collection?.name || 'Collection'\n    })\n    i = 7\n  }\n  \n  // After first 7 products: hero every 3rd section, triple for others\n  let sectionsAfterText = 0\n  while (i < allProducts.length) {\n    const remaining = allProducts.length - i\n    \n    // Every 3rd section is hero (2 products)\n    if (sectionsAfterText > 0 && sectionsAfterText % 3 === 0 && remaining >= 2) {\n      result.push({\n        layout: 'hero',\n        items: [allProducts[i], allProducts[i + 1]],\n        text: '',\n        heading: ''\n      })\n      i += 2\n      sectionsAfterText++\n    } else {\n      // Triple layout (3 products per row)\n      const take = Math.min(3, remaining)\n      result.push({\n        layout: 'triple',\n        items: allProducts.slice(i, i + take),\n        text: '',\n        heading: ''\n      })\n      i += take\n      sectionsAfterText++\n    }\n  }\n  \n  return result\n})\n\nfunction isColorHovered(item: Product, colorIdx: number): boolean {\n  return hoveredColorIndex.value[item.slug] === colorIdx\n}\n\nfunction onEnterColor(item: Product, color: ProductColor, colorIdx: number): void {\n  hoveredSlug.value = item.slug\n  item.currentImage = color.avatar_image\n  hoveredColorIndex.value[item.slug] = colorIdx\n}\n\nfunction onLeaveColor(item: Product): void {\n  item.currentImage = item.colors?.[0]?.avatar_image\n  hoveredColorIndex.value[item.slug] = null\n  hoveredSlug.value = null\n}\n\nfunction goToProduct(slug: string, variantSlug?: string): void {\n  if (!slug || !variantSlug) return\n  router.push(`/product/${slug}/${variantSlug}`)\n}\n\nfunction splitText(text: string = ''): string[] {\n  return text\n    .split(/(?<=[.!?])\\s+|\\n+/)\n    .filter(Boolean)\n}\n\nfunction shouldShowSeparator(idx: number): boolean {\n  return sections.value[idx].layout !== 'hero'\n}\n\nfunction initializeGSAP(): void {\n  ctx = gsap.context(() => {\n    document.querySelectorAll('.hero-title').forEach((title) => {\n      gsap.from(title, {\n        scrollTrigger: {\n          trigger: title,\n          start: 'top 80%'\n        },\n        y: 80,\n        opacity: 0,\n        duration: 0.9,\n        ease: 'power4.out'\n      })\n    })\n\n    document.querySelectorAll('.hero-content').forEach((content) => {\n      gsap.from(content.querySelectorAll('p, .btn'), {\n        scrollTrigger: {\n          trigger: content,\n          start: 'top 80%'\n        },\n        y: 40,\n        opacity: 0,\n        duration: 1.2,\n        ease: 'power4.out',\n        stagger: 0.1\n      })\n    })\n\n    document.querySelectorAll('.section-heading').forEach((heading) => {\n      gsap.from(heading, {\n        scrollTrigger: {\n          trigger: heading,\n          start: 'top 80%'\n        },\n        y: 40,\n        opacity: 0,\n        duration: 1.2,\n        ease: 'power4.out'\n      })\n    })\n\n    document.querySelectorAll('.section-text-line').forEach((line, index) => {\n      gsap.from(line, {\n        scrollTrigger: {\n          trigger: '.section-trigger-line',\n          start: 'top 90%'\n        },\n        y: 30,\n        opacity: 0,\n        duration: 1,\n        ease: 'power4.out',\n        delay: index * 0.5\n      })\n    })\n  })\n}\n\nonMounted(() => {\n  nextTick(() => {\n    initializeGSAP()\n  })\n})\n\nonBeforeUnmount(() => {\n  ctx?.revert()\n  ctx = null\n  ScrollTrigger.getAll().forEach(trigger => trigger.kill())\n})\n</script>","<template>\n  <!--[slug.vue]-->\n  <section class=\"collection-page\">\n    <div class=\"fixed top-0 left-0 w-full z-50\">\n      <AppNavigation :dark=\"false\" />\n    </div>\n    \n    <div class=\"pt-20 relative z-10\">\n      <div class=\"flex flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 pt-4 gap-6\">\n        <div class=\"flex justify-start w-full\">\n          <div class=\"flex items-center gap-1\">\n            <button \n              type=\"button\"\n              :class=\"typeBtnClass('all')\"\n              @click=\"setType('all')\"\n            >\n              ALL\n            </button>\n            <button \n              type=\"button\"\n              :class=\"typeBtnClass('woman')\"\n              @click=\"setType('woman')\"\n            >\n              WOMAN\n            </button>\n            <button \n              type=\"button\"\n              :class=\"typeBtnClass('man')\"\n              @click=\"setType('man')\"\n            >\n              MAN\n            </button>\n            <button \n              type=\"button\"\n              :class=\"typeBtnClass('kids')\"\n              @click=\"setType('kids')\"\n            >\n              KIDS\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <TestCollectionListing\n        v-if=\"!pending && products.length\"\n        :products=\"products\"\n        :collection=\"collection\"\n        @cta-click=\"onCtaClick\"\n      />\n    </div>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport TestCollectionListing from '~/components/testCollectionListing.vue'\n\ninterface ProductColor {\n  color: string\n  avatar_image: string\n  variant_slug: string\n}\n\ninterface Collection {\n  name?: string\n  element_one?: string\n  element_two?: string\n  element_three?: string\n  element_four?: string\n}\n\ninterface Product {\n  id: number\n  slug: string\n  name: string\n  gender: string\n  category: string\n  price: string\n  discount: boolean\n  discount_price: string | null\n  hot: boolean\n  new: boolean\n  available: boolean\n  alt_text?: string\n  colors: ProductColor[]\n}\n\ninterface ProductsResponse {\n  results: Product[]\n  next: string | null\n}\n\ntype GenderType = 'all' | 'woman' | 'man' | 'kids'\ntype ApiGender = 'all' | 'male' | 'female' | 'kids'\n\nconst config = useRuntimeConfig()\nconst route = useRoute()\nconst router = useRouter()\n\nconst VALID_TYPES: GenderType[] = ['all', 'woman', 'man', 'kids']\nconst PAGE_SIZE = 10\n\nconst slug = computed(() => String(route.params.slug))\n\nconst type = ref<GenderType>(\n  (route.query.type && VALID_TYPES.includes(String(route.query.type) as GenderType))\n    ? String(route.query.type) as GenderType\n    : 'all'\n)\n\nconst gender = computed<ApiGender>(() => {\n  if (type.value === 'man') return 'male'\n  if (type.value === 'woman') return 'female'\n  if (type.value === 'kids') return 'kids'\n  return 'all'\n})\n\nwatch(\n  () => route.query.type,\n  (t) => {\n    const normalized = (t && VALID_TYPES.includes(String(t) as GenderType))\n      ? String(t) as GenderType\n      : 'all'\n    if (type.value !== normalized) {\n      type.value = normalized\n    }\n  },\n  { immediate: true }\n)\n\nfunction setType(value: GenderType): void {\n  type.value = value\n  const newQuery = { ...route.query }\n  if ('gender' in newQuery) delete newQuery.gender\n  newQuery.type = value\n  router.replace({ query: newQuery })\n}\n\nfunction typeBtnClass(btnType: GenderType): string {\n  const base = 'pr-8 py-1 text-sm text-text_color cursor-pointer hover:opacity-70 transition-opacity duration-200'\n  const active = type.value === btnType ? 'font-bold' : 'bg-background_color'\n  return `${base} ${active}`\n}\n\nconst { data: collectionData, pending: cPending } = await useAsyncData<Collection>(\n  `collection:${slug.value}`,\n  async () => {\n    return await $fetch<Collection>(`${config.public.apiBase}/public/collections/${slug.value}/`)\n  }\n)\n\nconst { data: productsData, pending: pPending } = await useAsyncData<Product[]>(\n  `products-all:${slug.value}:${gender.value}`,\n  async () => {\n    const baseUrl = `${config.public.apiBase}/public/products-all/`\n    const params = new URLSearchParams({\n      page: '1',\n      page_size: String(PAGE_SIZE),\n      collection: slug.value,\n    })\n\n    if (gender.value !== 'all') {\n      params.append('gender', gender.value)\n    }\n\n    let url: string | null = `${baseUrl}?${params.toString()}`\n    const allProducts: Product[] = []\n    const res: ProductsResponse = await $fetch<ProductsResponse>(url as string)\n    if (Array.isArray(res?.results)) {\n      allProducts.push(...res.results)\n    }\n    return allProducts\n  },\n  { watch: [slug, gender] }\n)\n\nconst pending = computed(() => cPending.value || pPending.value)\nconst collection = computed(() => collectionData.value || {})\nconst products = computed(() => productsData.value || [])\n\nfunction onCtaClick(): void {\n  if (import.meta.client) {\n    window.scrollTo({ top: 0, behavior: 'smooth' })\n  }\n}\n</script>\n\n<style scoped>\n.collection-page {\n  position: relative;\n  min-height: 100vh;\n}\n\n/* Ensure buttons are clickable */\nbutton {\n  position: relative;\n  z-index: 10;\n  pointer-events: auto;\n}\n</style>"],"version":3}