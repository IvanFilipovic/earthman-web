{"version":3,"file":"index-DTKEckSY.js","sources":["../../../../pages/collections/index.vue"],"sourcesContent":["<template>\n  <div>\n    <div ref=\"navWrap\" class=\"fixed top-0 left-0 w-full z-50\">\n      <AppNavigation :dark=\"isDark\" />\n    </div>\n\n    <div v-if=\"loading\" class=\"fixed inset-0 flex items-center justify-center bg-background_color\">\n      <p class=\"text-text_color text-xl\">Loading collections...</p>\n    </div>\n\n    <div v-else id=\"smooth-wrapper\">\n      <div id=\"smooth-content\" class=\"stage\">\n        <section\n          v-for=\"(collection, i) in collections\"\n          :key=\"collection.id || i\"\n          class=\"slide\"\n          :class=\"`slide--${(i % 2) + 1}`\"\n        >\n          <div class=\"slide__bg\" :style=\"{ backgroundImage: `url(${collection.element_one_image})` }\">\n            <div class=\"slide__overlay\"></div>\n          </div>\n\n          <div class=\"slide__content\">\n            <div class=\"slide__content-inner\">\n              <h2 class=\"slide__title\">\n                <span class=\"slide__title-line\">\n                  <span class=\"line__inner\">{{ collection.name }}</span>\n                </span>\n              </h2>\n\n              <div class=\"slide__cta\">\n                <NuxtLink\n                  :to=\"`/collections/${encodeURIComponent(collection.slug)}`\"\n                  class=\"btn btn--secondary\"\n                >\n                  <span class=\"btn__text\">View Story</span>\n                  <span class=\"btn__fill\"></span>\n                </NuxtLink>\n              </div>\n            </div>\n\n            <button\n              v-if=\"i < collections.length - 1\"\n              type=\"button\"\n              class=\"slide__scroll-btn\"\n              @click=\"scrollToNext(i + 1)\"\n            >\n              <span class=\"slide__scroll-line\"></span>\n              <Icon name=\"lucide:chevron-down\" class=\"slide__scroll-icon\" />\n            </button>\n          </div>\n        </section>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport gsap from 'gsap'\nimport { ScrollTrigger } from 'gsap/ScrollTrigger'\nimport { ScrollToPlugin } from 'gsap/ScrollToPlugin'\n\nlet ScrollSmoother: any = null\ntry {\n  ScrollSmoother = (await import('gsap/ScrollSmoother')).ScrollSmoother\n} catch {}\n\ngsap.registerPlugin(ScrollTrigger, ScrollToPlugin)\nif (ScrollSmoother) gsap.registerPlugin(ScrollSmoother as any)\n\ninterface Collection {\n  id: number\n  name: string\n  slug: string\n  element_one: string\n  element_one_image: string\n}\n\nconst config = useRuntimeConfig()\nconst navWrap = ref<HTMLElement | null>(null)\nconst isDark = ref(false)\nconst loading = ref(true)\nconst collections = ref<Collection[]>([])\n\nlet smoother: any = null\nlet ctx: gsap.Context | null = null\n\nfunction scrollToNext(index: number): void {\n  const target = document.querySelector(`.slide:nth-child(${index + 1})`)\n  if (target) {\n    gsap.to(window, {\n      duration: 1.2,\n      scrollTo: { y: target, offsetY: 0 },\n      ease: 'power2.inOut'\n    })\n  }\n}\n\nasync function fetchCollections(): Promise<void> {\n  try {\n    loading.value = true\n    const data = await $fetch<Collection[]>(`${config.public.apiBase}/public/collections/`)\n    collections.value = data || []\n  } catch (error) {\n    console.error('Failed to fetch collections:', error)\n    collections.value = []\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction initializeGSAP(): void {\n  ctx = gsap.context(() => {\n    if (ScrollSmoother) {\n      smoother = ScrollSmoother.create({\n        smooth: 1.5,\n        effects: true,\n        normalizeScroll: true,\n        smoothTouch: 0.2,\n        wrapper: '#smooth-wrapper',\n        content: '#smooth-content'\n      })\n    }\n\n    document.querySelectorAll<HTMLElement>('.slide').forEach((slide, index) => {\n      const tl = gsap.timeline({\n        scrollTrigger: {\n          trigger: slide,\n          start: 'top 60%',\n          end: 'bottom 40%',\n          onEnter: () => {\n            isDark.value = index % 2 === 0\n          },\n          onEnterBack: () => {\n            isDark.value = index % 2 === 0\n          }\n        }\n      })\n\n      tl.from(slide.querySelector('.line__inner'), {\n        y: 120,\n        duration: 1.4,\n        ease: 'power4.out'\n      })\n        .from(\n          slide.querySelector('.btn'),\n          {\n            y: 80,\n            opacity: 0,\n            duration: 1.2,\n            ease: 'power4.out'\n          },\n          0.2\n        )\n        .from(\n          slide.querySelector('.slide__scroll-btn'),\n          {\n            y: 40,\n            opacity: 0,\n            duration: 1,\n            ease: 'power4.out'\n          },\n          0.3\n        )\n    })\n\n    document.querySelectorAll<HTMLElement>('.slide').forEach((slide) => {\n      const bg = slide.querySelector('.slide__bg') as HTMLElement\n\n      gsap.fromTo(\n        bg,\n        { y: '-20vh', scale: 1.2 },\n        {\n          y: '20vh',\n          scale: 1,\n          ease: 'none',\n          scrollTrigger: {\n            trigger: slide,\n            scrub: true,\n            start: 'top bottom',\n            end: 'bottom top'\n          }\n        }\n      )\n    })\n\n    gsap.set('.stage', { autoAlpha: 1 })\n  })\n}\n\nonMounted(async () => {\n  await fetchCollections()\n  \n  nextTick(() => {\n    initializeGSAP()\n  })\n})\n\nonBeforeUnmount(() => {\n  ctx?.revert()\n  ctx = null\n  smoother?.kill?.()\n  ScrollTrigger.getAll().forEach(trigger => trigger.kill())\n})\n</script>\n\n<style scoped>\n/* Button Base Styles */\n.btn {\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 1rem 2.5rem;\n  font-size: 0.875rem;\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.1em;\n  text-decoration: none;\n  overflow: hidden;\n  z-index: 1;\n  transition: color 0.4s ease;\n  cursor: pointer;\n}\n\n.btn__text {\n  position: relative;\n  z-index: 2;\n}\n\n.btn__fill {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 0;\n  height: 100%;\n  z-index: 1;\n  transition: width 0.4s ease;\n}\n\n/* Responsive button sizing */\n@media (max-width: 768px) {\n  .btn {\n    padding: 0.75rem 1.5rem;\n    font-size: 0.75rem;\n  }\n}\n\n/* Page styles */\n.stage {\n  position: relative;\n  visibility: hidden;\n  min-height: 100vh;\n}\n\n.slide {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  overflow: hidden;\n}\n\n.slide__bg {\n  position: absolute;\n  inset: 0;\n  background-size: cover;\n  background-position: center;\n  z-index: 1;\n}\n\n.slide__overlay {\n  position: absolute;\n  inset: 0;\n  background: linear-gradient(\n    to bottom,\n    rgba(0, 0, 0, 0.3) 0%,\n    rgba(0, 0, 0, 0.5) 100%\n  );\n  z-index: 2;\n}\n\n.slide--1 .slide__overlay {\n  background: linear-gradient(\n    to bottom,\n    rgba(37, 37, 37, 0.4) 0%,\n    rgba(37, 37, 37, 0.7) 100%\n  );\n}\n\n.slide--2 .slide__overlay {\n  background: linear-gradient(\n    to bottom,\n    rgba(0, 0, 0, 0.3) 0%,\n    rgba(0, 0, 0, 0.6) 100%\n  );\n}\n\n.slide__content {\n  position: relative;\n  z-index: 10;\n  width: 100%;\n  max-width: 1400px;\n  padding: 2rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n}\n\n.slide__content-inner {\n  text-align: center;\n  color: theme('colors.background_color');\n}\n\n.slide__title {\n  margin: 0 0 3rem;\n  overflow: hidden;\n}\n\n.slide__title-line {\n  display: block;\n  overflow: hidden;\n}\n\n.line__inner {\n  display: block;\n  font-size: clamp(2rem, 8vw, 8rem);\n  font-weight: 500;\n  letter-spacing: -0.02em;\n  line-height: 1;\n  text-transform: uppercase;\n}\n\n.slide__cta {\n  display: flex;\n  justify-content: center;\n}\n\n.slide__scroll-btn {\n  position: absolute;\n  bottom: 3rem;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n  background: none;\n  border: none;\n  color: theme('colors.background_color');\n  cursor: pointer;\n  padding: 0;\n  z-index: 20;\n}\n\n.slide__scroll-line {\n  display: block;\n  width: 1px;\n  height: 60px;\n  background: theme('colors.background_color');\n  opacity: 0.6;\n}\n\n.slide__scroll-icon {\n  width: 1.5rem;\n  height: 1.5rem;\n  animation: bounce 2s infinite;\n}\n\n@keyframes bounce {\n  0%, 100% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(8px);\n  }\n}\n\n@media (max-width: 768px) {\n  .slide__content {\n    padding: 1rem;\n  }\n\n  .line__inner {\n    font-size: clamp(1.5rem, 10vw, 3rem);\n  }\n\n  .slide__scroll-btn {\n    bottom: 2rem;\n  }\n\n  .slide__scroll-line {\n    height: 40px;\n  }\n}\n</style>"],"names":["_withAsyncContext","_ssrRenderComponent","_unref","_ssrRenderStyle","_ssrInterpolate","_push","_parent","_createVNode"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA,QAAI,iBAAsB;AAC1B,QAAI;AACF,wBAAkB,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAM,OAAO,wBAAqB,CAAA,+CAAG;AAAA,IACzD,QAAQ;AAAA,IAAC;AAET,SAAK,eAAe,eAAe,cAAc;AACjD,QAAI,eAAgB,MAAK,eAAe,cAAqB;AAW7C,QAAwB,IAAI;AAC5C,UAAM,SAAS,IAAI,KAAK;AACxB,UAAM,UAAU,IAAI,IAAI;AACxB,UAAM,cAAc,IAAkB,EAAE;;;;;;AA/ElB,YAAAC,mBAAA,0BAAA,EAAA,MAAMC,MAAA,MAAA,EAAA,GAAM,MAAA,OAAA,CAAA;;UAGnBA,MAAA,OAAA,GAAO;;;;sBAOcA,MAAA,WAAA,GAAW,CAA7B,YAAY,MAAC;6DAGF,IAAC,IAAA,CAAA,IAAA,OAAA,CAAA,oDAEqCC,eAAA,EAAA,iBAAA,OAAA,WAAW,iBAAiB,IAAA,CAAA,+SAQhDC,eAAA,WAAW,IAAI;;YAM3C,IAAE,gBAAkB,mBAAmB,WAAW,IAAI,CAAA;AAAA,YACvD,OAAM;AAAA,UAAA;6BAFR,CAMW,GAAAC,QAAAC,UAAA,aAAA;;;;;kBAFTC,YAAyC,QAAA,EAAnC,OAAM,YAAA,GAAY,YAAU;AAAA,kBAClCA,YAA+B,QAAA,EAAzB,OAAM,aAAW;AAAA,gBAAA;AAAA;;;;;cAMrB,IAAIL,MAAA,WAAA,EAAY,SAAM,GAAA;;;cAMtB,MAAK;AAAA,cAAsB,OAAM;AAAA,YAAA;;;;;;;;;;;;;;;;;;;;"}