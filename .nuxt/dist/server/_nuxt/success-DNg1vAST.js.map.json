{"file":"success-DNg1vAST.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEA,UAAM,QAAQ,SAAA;AAEI,aAAS,MAAM,MAAM,MAAM,SAAmB;AAChD,aAAS,MAAM,MAAM,MAAM,OAAiB;AAC3C,aAAS,MAAM,MAAM,MAAM,SAAmB;AACtC,aAAS,MAAM,MAAM,MAAM,kBAA4B;AAEhF,UAAM,aAAa,IAAI,IAAI;AAC3B,UAAM,QAAQ,IAAI,EAAE;;;AA8DT,YAAA,WAAAA,eAAAC,WAAA,EAAA,OAAM,uEAAmE,MAAA,CAAA,CAAA,kDAAA;UAGnEC,MAAA,UAAA,GAAU;;iBAOLA,MAAA,KAAA,GAAK;woBAOsBA,MAAA,KAAA,CAAK,CAAA,4CAAA;;UAElC,IAAG;AAAA,UAAY,OAAM;AAAA,QAAA;2BAA/B,CAGW,GAAAC,QAAAC,UAAA,aAAA;;;;;gBAFTC,YAAwC,QAAA,EAAlC,OAAM,YAAA,GAAY,WAAS;AAAA,gBACjCA,YAA+B,QAAA,EAAzB,OAAM,aAAW;AAAA,cAAA;AAAA;;;;;UAEf,IAAG;AAAA,UAAI,OAAM;AAAA,QAAA;2BAAvB,CAEW,GAAAF,QAAAC,UAAA,aAAA;;;;;gCAFyE,eAEpF;AAAA,cAAA;AAAA;;;;;;;;;;;;;;;;;;","names":["_ssrRenderAttrs","_mergeProps","_unref","_push","_parent","_createVNode"],"sources":["../../../../pages/payment/paypal/success.vue"],"sourcesContent":["<!-- pages/payment/paypal/success.vue -->\n<script setup lang=\"ts\">\nconst route = useRoute()\n\nconst paymentId = computed(() => route.query.paymentId as string)\nconst payerId = computed(() => route.query.PayerID as string)\nconst orderRef = computed(() => route.query.order_ref as string)\nconst paymentSessionId = computed(() => route.query.payment_session_id as string)\n\nconst processing = ref(true)\nconst error = ref('')\n\n/**\n * Execute PayPal payment with server-side verification\n */\nasync function executePayment() {\n  if (!paymentId.value || !payerId.value || !orderRef.value) {\n    error.value = 'Missing payment parameters'\n    processing.value = false\n    return\n  }\n\n  try {\n    console.log('Executing PayPal payment:', {\n      paymentId: paymentId.value,\n      payerId: payerId.value,\n      orderRef: orderRef.value\n    })\n\n    // Execute payment through secure server API\n    const response = await $fetch<{\n      success: boolean\n      order_reference: string\n      total_price: string\n    }>('/api/paypal/execute', {\n      method: 'POST',\n      body: {\n        payment_id: paymentId.value,\n        payer_id: payerId.value,\n        order_reference: orderRef.value,\n        payment_session_id: paymentSessionId.value\n      }\n    })\n\n    if (response.success) {\n      // Redirect to thank you page\n      await navigateTo({\n        path: '/thank-you',\n        query: {\n          ref: response.order_reference,\n          total: response.total_price,\n          payment_intent: 'completed'\n        }\n      })\n    } else {\n      error.value = 'Payment execution failed. Please contact support.'\n      processing.value = false\n    }\n    \n  } catch (err: any) {\n    console.error('PayPal execution error:', err)\n    error.value = err?.data?.message || 'Payment failed. Please try again or contact support.'\n    processing.value = false\n  }\n}\n\nonMounted(() => {\n  executePayment()\n})\n</script>\n\n<template>\n  <section class=\"min-h-screen bg-background_color flex items-center justify-center\">\n    <div class=\"max-w-md mx-auto px-4 text-center\">\n      <!-- Processing State -->\n      <div v-if=\"processing\" class=\"space-y-4\">\n        <div class=\"animate-spin rounded-full h-16 w-16 border-b-2 border-primary_button_color mx-auto\"></div>\n        <h2 class=\"text-xl uppercase tracking-widest text-text_color\">Processing Payment...</h2>\n        <p class=\"text-sm text-text_color/70\">Please wait while we confirm your PayPal payment</p>\n      </div>\n\n      <!-- Error State -->\n      <div v-else-if=\"error\" class=\"space-y-4\">\n        <div class=\"w-16 h-16 bg-error_text_color/10 rounded-full flex items-center justify-center mx-auto\">\n          <svg class=\"w-8 h-8 text-error_text_color\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n            <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clip-rule=\"evenodd\" />\n          </svg>\n        </div>\n        <h2 class=\"text-xl uppercase tracking-widest text-error_text_color\">Payment Failed</h2>\n        <p class=\"text-sm text-text_color/70\">{{ error }}</p>\n        <div class=\"flex flex-col gap-3 mt-6\">\n          <NuxtLink to=\"/checkout\" class=\"btn btn--primary\">\n            <span class=\"btn__text\">Try Again</span>\n            <span class=\"btn__fill\"></span>\n          </NuxtLink>\n          <NuxtLink to=\"/\" class=\"text-sm underline text-text_color/70 hover:text-text_color\">\n            Return Home\n          </NuxtLink>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>"],"version":3}