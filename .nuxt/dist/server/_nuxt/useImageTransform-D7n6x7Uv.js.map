{"version":3,"file":"useImageTransform-D7n6x7Uv.js","sources":["../../../../composables/useImageTransform.ts"],"sourcesContent":["interface TransformOptions {\n  quality?: number\n  format?: 'auto' | 'webp' | 'avif' | 'jpeg' | 'png'\n  fit?: 'scale-down' | 'contain' | 'cover' | 'crop' | 'pad'\n  height?: number\n}\n\ninterface ResponsiveImageAttrs {\n  srcset: string\n  sizes: string\n  src: string\n}\n\nexport function useImageTransform() {\n  /**\n   * Get a single transformed image URL\n   * @param url - Original image URL\n   * @param width - Desired width in pixels\n   * @param options - Additional transformation options\n   * @returns Transformed image URL\n   */\n  const getTransformedUrl = (\n    url: string,\n    width: number,\n    options: TransformOptions = {}\n  ): string => {\n    if (!url) return ''\n\n    const {\n      quality = 85,\n      format = 'auto',\n      fit = 'scale-down',\n      height,\n    } = options\n\n    // Remove base URL if present\n    const path = url.replace('https://static.earth-man.eu/', '')\n\n    // Build transformation parameters\n    const params = [\n      `width=${width}`,\n      `quality=${quality}`,\n      `format=${format}`,\n      fit && `fit=${fit}`,\n      height && `height=${height}`,\n    ].filter(Boolean).join(',')\n\n    return `https://static.earth-man.eu/cdn-cgi/image/${params}/${path}`\n  }\n\n  /**\n   * Get responsive image attributes (srcset, sizes, src)\n   * @param url - Original image URL\n   * @param widths - Array of widths for srcset (e.g., [400, 800, 1200, 1600])\n   * @param sizesAttr - Custom sizes attribute (e.g., \"(max-width: 1023px) 100vw, 66vw\")\n   * @param options - Additional transformation options\n   * @returns Object with srcset, sizes, and src properties\n   */\n  const getResponsiveImages = (\n    url: string,\n    widths: number[] = [400, 800, 1200],\n    sizesAttr?: string,\n    options: TransformOptions = {}\n  ): ResponsiveImageAttrs => {\n    if (!url) return { srcset: '', sizes: '', src: '' }\n\n    // Generate srcset with all provided widths\n    const srcset = widths\n      .map(width => `${getTransformedUrl(url, width, options)} ${width}w`)\n      .join(', ')\n\n    // Use custom sizes if provided, otherwise use sensible defaults\n    const sizes = sizesAttr || '100vw'\n\n    // Use largest width as fallback src\n    const src = getTransformedUrl(url, widths[widths.length - 1], options)\n\n    return {\n      srcset,\n      sizes,\n      src,\n    }\n  }\n\n  return {\n    getTransformedUrl,\n    getResponsiveImages,\n  }\n}"],"names":[],"mappings":"AAaO,SAAS,oBAAoB;AAQlC,QAAM,oBAAoB,CACxB,KACA,OACA,UAA4B,CAAA,MACjB;AACX,QAAI,CAAC,IAAK,QAAO;AAEjB,UAAM;AAAA,MACJ,UAAU;AAAA,MACV,SAAS;AAAA,MACT,MAAM;AAAA,MACN;AAAA,IAAA,IACE;AAGJ,UAAM,OAAO,IAAI,QAAQ,gCAAgC,EAAE;AAG3D,UAAM,SAAS;AAAA,MACb,SAAS,KAAK;AAAA,MACd,WAAW,OAAO;AAAA,MAClB,UAAU,MAAM;AAAA,MAChB,OAAO,OAAO,GAAG;AAAA,MACjB,UAAU,UAAU,MAAM;AAAA,IAAA,EAC1B,OAAO,OAAO,EAAE,KAAK,GAAG;AAE1B,WAAO,6CAA6C,MAAM,IAAI,IAAI;AAAA,EACpE;AAUA,QAAM,sBAAsB,CAC1B,KACA,SAAmB,CAAC,KAAK,KAAK,IAAI,GAClC,WACA,UAA4B,CAAA,MACH;AACzB,QAAI,CAAC,IAAK,QAAO,EAAE,QAAQ,IAAI,OAAO,IAAI,KAAK,GAAA;AAG/C,UAAM,SAAS,OACZ,IAAI,CAAA,UAAS,GAAG,kBAAkB,KAAK,OAAO,OAAO,CAAC,IAAI,KAAK,GAAG,EAClE,KAAK,IAAI;AAGZ,UAAM,QAAQ,aAAa;AAG3B,UAAM,MAAM,kBAAkB,KAAK,OAAO,OAAO,SAAS,CAAC,GAAG,OAAO;AAErE,WAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,EAAA;AAEJ;"}