var t,e,r,i,n,o,a,s,_getGSAP$1=function(){return t||!1},c={},_getID=function(t){return s(t).id},_getByTarget=function(t){return c[_getID("string"==typeof t?r(t)[0]:t)]},_onTick=function(t){var e,r=n;if(t-a>=.05)for(a=t;r;)((e=r.g(r.t,r.p))!==r.v1||t-r.t1>.2)&&(r.v2=r.v1,r.v1=e,r.t2=r.t1,r.t1=t),r=r._next},u={deg:360,rad:2*Math.PI},_initCore$1=function(){(t=_getGSAP$1())&&(r=t.utils.toArray,i=t.utils.getUnit,s=t.core.getCache,o=t.ticker,e=1)},PropTracker=function(t,e,r,n){this.t=t,this.p=e,this.g=t._gsap.get,this.rCap=u[r||i(this.g(t,e))],this.v1=this.v2=0,this.t1=this.t2=o.time,n&&(this._next=n,n._prev=this)},f=function(){function VelocityTracker(t,i){e||_initCore$1(),this.target=r(t)[0],c[_getID(this.target)]=this,this._props={},i&&this.add(i)}VelocityTracker.register=function(e){t=e,_initCore$1()};var i=VelocityTracker.prototype;return i.get=function(t,e){var r,i,n,a=this._props[t]||console.warn("Not tracking "+t+" velocity.");return r=parseFloat(e?a.v1:a.g(a.t,a.p))-parseFloat(a.v2),(i=a.rCap)&&(r%=i)!==r%(i/2)&&(r=r<0?r+i:r-i),n=r/((e?a.t1:o.time)-a.t2),Math.round(1e4*n)/1e4},i.getAll=function(){var t,e={},r=this._props;for(t in r)e[t]=this.get(t);return e},i.isTracking=function(t){return t in this._props},i.add=function(t,e){t in this._props||(n||(o.add(_onTick),a=o.time),n=this._props[t]=new PropTracker(this.target,t,e,n))},i.remove=function(t){var e,r,i=this._props[t];i&&(e=i._prev,r=i._next,e&&(e._next=r),r?r._prev=e:n===i&&(o.remove(_onTick),n=0),delete this._props[t])},i.kill=function(t){for(var e in this._props)this.remove(e);t||delete c[_getID(this.target)]},VelocityTracker.track=function(t,i,n){e||_initCore$1();for(var o,a,s=[],c=r(t),u=i.split(","),f=(n||"").split(","),l=c.length;l--;){for(o=_getByTarget(c[l])||new VelocityTracker(c[l]),a=u.length;a--;)o.add(u[a],f[a]||f[0]);s.push(o)}return s},VelocityTracker.untrack=function(t,e){var i=(e||"").split(",");r(t).forEach(function(t){var e=_getByTarget(t);e&&(i.length?i.forEach(function(t){return e.remove(t)}):e.kill(1))})},VelocityTracker.isTracking=function(t,e){var r=_getByTarget(t);return r&&r.isTracking(e)},VelocityTracker.getVelocity=function(t,e){var r=_getByTarget(t);return r&&r.isTracking(e)?r.get(e):console.warn("Not tracking velocity of "+e)},VelocityTracker}();f.getByTarget=_getByTarget,_getGSAP$1()&&t.registerPlugin(f);var l,p,g,h,v,d,y,m,k,_,T,x,w,F,N=f.getByTarget,_getGSAP=function(){return l||!1},_isNumber=function(t){return"number"==typeof t},_isObject=function(t){return"object"==typeof t},_isFunction=function(t){return"function"==typeof t},V=Array.isArray,_emptyFunc=function(t){return t},P=1e10,_round=function(t){return Math.round(1e4*t)/1e4},_extend=function(t,e,r){for(var i in e)i in t||i===r||(t[i]=e[i]);return t},M=function _deepClone(t){var e,r,i={};for(e in t)i[e]=_isObject(r=t[e])&&!V(r)?_deepClone(r):r;return i},_getClosest=function(t,e,r,i,n){var o,a,s,c,u=e.length,f=0,l=P;if(_isObject(t)){for(;u--;){for(s in o=e[u],a=0,t)a+=(c=o[s]-t[s])*c;a<l&&(f=u,l=a)}if((n||P)<P&&n<Math.sqrt(l))return t}else for(;u--;)(a=(o=e[u])-t)<0&&(a=-a),a<l&&o>=i&&o<=r&&(f=u,l=a);return e[f]},_parseEnd=function(t,e,r,i,n,o,a){if("auto"===t.end)return t;var s,c,u=t.end;if(r=isNaN(r)?P:r,i=isNaN(i)?-P:i,_isObject(e)){if(s=e.calculated?e:(_isFunction(u)?u(e,a):_getClosest(e,u,r,i,o))||e,!e.calculated){for(c in s)e[c]=s[c];e.calculated=!0}s=s[n]}else s=_isFunction(u)?u(e,a):V(u)?_getClosest(e,u,r,i,o):parseFloat(u);return s>r?s=r:s<i&&(s=i),{max:s,min:s,unitFactor:t.unitFactor}},_getNumOrDefault=function(t,e,r){return isNaN(t[e])?r:+t[e]},_calculateChange=function(t,e){return.05*e*t/_},_calculateDuration=function(t,e,r){return Math.abs((e-t)*_/r/.05)},b={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},_processLinkedProps=function(t,e,r,i){if(e.linkedProps){var n,o,a,s,c,u,f=e.linkedProps.split(","),l={};for(n=0;n<f.length;n++)(a=e[o=f[n]])&&(s=_isNumber(a.velocity)?a.velocity:(c=c||N(t))&&c.isTracking(o)?c.get(o):0,u=Math.abs(s/_getNumOrDefault(a,"resistance",i)),l[o]=parseFloat(r(t,o))+_calculateChange(s,u));return l}},_initCore=function(){(l=_getGSAP())&&(g=l.parseEase,h=l.utils.toArray,y=l.utils.getUnit,k=l.core.getCache,T=l.utils.clamp,w=l.core.getStyleSaver,F=l.core.reverting||function(){},v=g("power3"),_=v(.05),m=l.core.PropTween,l.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),d=l.config(),l.registerPlugin(f),p=1)},A={version:"3.13.0",name:"inertia",register:function(t){l=t,_initCore()},init:function(t,e,r,i,n){p||_initCore();var o=N(t);if("auto"===e){if(!o)return void console.warn("No inertia tracking on "+t+". InertiaPlugin.track(target) first.");e=o.getAll()}this.styles=w&&"object"==typeof t.style&&w(t),this.target=t,this.tween=r,x=e;var a,s,c,u,f,l,g,v,_,F=t._gsap,V=F.get,A=e.duration,C=_isObject(A),E=e.preventOvershoot||C&&0===A.overshoot,O=_getNumOrDefault(e,"resistance",d.resistance),B=_isNumber(A)?A:function(t,e,r,i,n){if(void 0===r&&(r=10),void 0===i&&(i=.2),void 0===n&&(n=1),"string"==typeof t&&(t=h(t)[0]),!t)return 0;var o,a,s,c,u,f,l,p,g,v,y=0,m=P,_=e.inertia||e,w=k(t).get,F=_getNumOrDefault(_,"resistance",d.resistance);for(o in v=_processLinkedProps(t,_,w,F),_)b[o]||(a=_[o],_isObject(a)||((p=p||N(t))&&p.isTracking(o)?a=_isNumber(a)?{velocity:a}:{velocity:p.get(o)}:(c=+a||0,s=Math.abs(c/F))),_isObject(a)&&(c=_isNumber(a.velocity)?a.velocity:(p=p||N(t))&&p.isTracking(o)?p.get(o):0,s=T(i,r,Math.abs(c/_getNumOrDefault(a,"resistance",F))),f=(u=parseFloat(w(t,o))||0)+_calculateChange(c,s),"end"in a&&(a=_parseEnd(a,v&&o in v?v:f,a.max,a.min,o,_.radius,c),x===e&&(x=_=M(e)),_[o]=_extend(a,_[o],"end")),"max"in a&&f>+a.max+1e-10?(g=a.unitFactor||d.unitFactors[o]||1,(l=u>a.max&&a.min!==a.max||c*g>-15&&c*g<45?i+.1*(r-i):_calculateDuration(u,a.max,c))+n<m&&(m=l+n)):"min"in a&&f<+a.min-1e-10&&(g=a.unitFactor||d.unitFactors[o]||1,(l=u<a.min&&a.min!==a.max||c*g>-45&&c*g<15?i+.1*(r-i):_calculateDuration(u,a.min,c))+n<m&&(m=l+n)),l>y&&(y=l)),s>y&&(y=s));return y>m&&(y=m),y>r?r:y<i?i:y}(t,e,C&&A.max||10,C&&A.min||.2,C&&"overshoot"in A?+A.overshoot:E?0:1);for(a in e=x,x=0,_=_processLinkedProps(t,e,V,O),e)b[a]||(s=e[a],_isFunction(s)&&(s=s(i,t,n)),_isNumber(s)?f=s:_isObject(s)&&!isNaN(s.velocity)?f=+s.velocity:o&&o.isTracking(a)?f=o.get(a):console.warn("ERROR: No velocity was defined for "+t+" property: "+a),l=_calculateChange(f,B),v=0,c=V(t,a),u=y(c),c=parseFloat(c),_isObject(s)&&(g=c+l,"end"in s&&(s=_parseEnd(s,_&&a in _?_:g,s.max,s.min,a,e.radius,f)),"max"in s&&+s.max<g?E||s.preventOvershoot?l=s.max-c:v=s.max-c-l:"min"in s&&+s.min>g&&(E||s.preventOvershoot?l=s.min-c:v=s.min-c-l)),this._props.push(a),this.styles&&this.styles.save(a),this._pt=new m(this._pt,t,a,c,0,_emptyFunc,0,F.set(t,a,this)),this._pt.u=u||0,this._pt.c1=l,this._pt.c2=v);return r.duration(B),1},render:function(t,e){var r=e._pt;if((t=v(e.tween._time/e.tween._dur))||!F())for(;r;)r.set(r.t,r.p,_round(r.s+r.c1*t+r.c2*t*t)+r.u,r.d,t),r=r._next;else e.styles.revert()}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach(function(t){return A[t]=f[t]}),_getGSAP()&&l.registerPlugin(A);export{A as InertiaPlugin,f as VelocityTracker,A as default};
//# sourceMappingURL=InertiaPlugin.mjs.map
