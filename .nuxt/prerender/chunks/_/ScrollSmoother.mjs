function _createClass(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}var e,t,r,n,o,i,s,a,l,c,f,u,h,g,d,_getGSAP=function(){return e||!1},_maxScroll=function(e){return l.maxScroll(e||r)},p=function(){function ScrollSmoother(p){var m=this;t||ScrollSmoother.register(e)||console.warn("Please gsap.registerPlugin(ScrollSmoother)"),p=this.vars=p||{},c&&c.kill(),c=this,g(this);var v,y,S,b,w,T,_,C,x,E,R,k,P,A,H,N,M=p,z=M.smoothTouch,F=M.onUpdate,I=M.onStop,L=M.smooth,B=M.onFocusIn,O=M.normalizeScroll,U=M.wholePixels,q=this,V=p.effectsPrefix||"",j=l.getScrollFunc(r),D=1===l.isTouch?!0===z?.8:parseFloat(z)||0:0===L||!1===L?0:parseFloat(L)||.8,Y=D&&+p.speed||1,K=0,W=0,G=1,J=u(0),updateVelocity=function(){return J.update(-K)},Q={y:0},removeScroll=function(){return v.style.overflow="visible"},killScrub=function(e){e.update();var t=e.getTween();t&&(t.pause(),t._time=t._dur,t._tTime=t._tDur),H=!1,e.animation.progress(e.progress,!0)},render=function(e,t){(e!==K&&!E||t)&&(U&&(e=Math.round(e)),D&&(v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+e+", 0, 1)",v._gsap.y=e+"px"),W=e-K,K=e,l.isUpdating||ScrollSmoother.isRefreshing||l.update())},scrollTop=function(e){return arguments.length?(e<0&&(e=0),Q.y=-e,H=!0,E?K=-e:render(-e),l.isRefreshing?b.update():j(e/Y),this):-K},X="undefined"!=typeof ResizeObserver&&!1!==p.autoResize&&new ResizeObserver(function(){if(!l.isRefreshing){var e=_maxScroll(y)*Y;e<-K&&scrollTop(e),d.restart(!0)}}),_onFocusIn=function(e){y.scrollTop=0,e.target.contains&&e.target.contains(y)||B&&!1===B(m,e)||(l.isInViewport(e.target)||e.target===N||m.scrollTo(e.target,!1,"center center"),N=e.target)},_transformPosition=function(e,t){if(e<t.start)return e;var r=isNaN(t.ratio)?1:t.ratio,n=t.end-t.start,o=e-t.start,i=t.offset||0,s=t.pins||[],a=s.offset||0,l=t._startClamp&&t.start<=0||t.pins&&t.pins.offset?0:t._endClamp&&t.end===_maxScroll()?1:.5;return s.forEach(function(t){n-=t.distance,t.nativeStart<=e&&(o-=t.distance)}),a&&(o*=(n-a/r)/n),e+(o-i*l)/r-o},Z=function adjustEffectRelatedTriggers(t,r,n){n||(t.pins.length=t.pins.offset=0);var o,i,s,a,l,c,f,u,h=t.pins,g=t.markers;for(f=0;f<r.length;f++)if(u=r[f],t.trigger&&u.trigger&&t!==u&&(u.trigger===t.trigger||u.pinnedContainer===t.trigger||t.trigger.contains(u.trigger))&&(l=u._startNative||u._startClamp||u.start,c=u._endNative||u._endClamp||u.end,s=_transformPosition(l,t),a=u.pin&&c>0?s+(c-l):_transformPosition(c,t),u.setPositions(s,a,!0,(u._startClamp?Math.max(0,s):s)-l),u.markerStart&&g.push(e.quickSetter([u.markerStart,u.markerEnd],"y","px")),u.pin&&u.end>0&&!n)){if(o=u.end-u.start,i=t._startClamp&&u.start<0){if(t.start>0)return t.setPositions(0,t.end+(t._startNative-t.start),!0),void adjustEffectRelatedTriggers(t,r);o+=u.start,h.offset=-u.start}h.push({start:u.start,nativeStart:l,end:u.end,distance:o,trig:u}),t.setPositions(t.start,t.end+(i?-u.start:o),!0)}},adjustParallaxPosition=function(e,t){w.forEach(function(r){return Z(r,e,t)})},onRefresh=function(){o=n.documentElement,i=n.body,removeScroll(),requestAnimationFrame(removeScroll),w&&(l.getAll().forEach(function(e){e._startNative=e.start,e._endNative=e.end}),w.forEach(function(e){var t=e._startClamp||e.start,r=e.autoSpeed?Math.min(_maxScroll(),e.end):t+Math.abs((e.end-t)/e.ratio),n=r-e.end;if((t-=n/2)>(r-=n/2)){var o=t;t=r,r=o}e._startClamp&&t<0?(n=(r=e.ratio<0?_maxScroll():e.end/e.ratio)-e.end,t=0):(e.ratio<0||e._endClamp&&r>=_maxScroll())&&(n=((r=_maxScroll())-(t=e.ratio<0||e.ratio>1?0:r-(r-e.start)/e.ratio))*e.ratio-(e.end-e.start)),e.offset=n||1e-4,e.pins.length=e.pins.offset=0,e.setPositions(t,r,!0)}),adjustParallaxPosition(l.sort())),J.reset()},addOnRefresh=function(){return l.addEventListener("refresh",onRefresh)},restoreEffects=function(){return w&&w.forEach(function(e){return e.vars.onRefresh(e)})},revertEffects=function(){return w&&w.forEach(function(e){return e.vars.onRefreshInit(e)}),restoreEffects},effectValueGetter=function(e,t,r,n){return function(){var o="function"==typeof t?t(r,n):t;o||0===o||(o=n.getAttribute("data-"+V+e)||("speed"===e?1:0)),n.setAttribute("data-"+V+e,o);var i="clamp("===(o+"").substr(0,6);return{clamp:i,value:i?o.substr(6,o.length-7):o}}},createEffect=function(t,n,i,s,c){c=("function"==typeof c?c(s,t):c)||0;var u,h,g,d,p,m,v=effectValueGetter("speed",n,s,t),S=effectValueGetter("lag",i,s,t),b=e.getProperty(t,"y"),T=t._gsap,_=[],initDynamicValues=function(){n=v(),i=parseFloat(S().value),u=parseFloat(n.value)||1,g="auto"===n.value,p=g||h&&h._startClamp&&h.start<=0||_.offset?0:h&&h._endClamp&&h.end===_maxScroll()?1:.5,d&&d.kill(),d=i&&e.to(t,{ease:f,overwrite:!1,y:"+=0",duration:i}),h&&(h.ratio=u,h.autoSpeed=g)},revert=function(){T.y=b+"px",T.renderTransform(1),initDynamicValues()},C=[],x=0,updateChange=function(e){if(g){revert();var n=function(e,t){var n,i,s=e.parentNode||o,a=e.getBoundingClientRect(),l=s.getBoundingClientRect(),c=l.top-a.top,f=l.bottom-a.bottom,u=(Math.abs(c)>Math.abs(f)?c:f)/(1-t),h=-u*t;return u>0&&(i=.5===(n=l.height/(r.innerHeight+l.height))?2*l.height:2*Math.min(l.height,Math.abs(-u*n/(2*n-1)))*(t||1),h+=t?-i*t:-i/2,u+=i),{change:u,offset:h}}(t,a(0,1,-e.start/(e.end-e.start)));x=n.change,m=n.offset}else m=_.offset||0,x=(e.end-e.start-m)*(1-u);_.forEach(function(e){return x-=e.distance*(1-u)}),e.offset=x||.001,e.vars.onUpdate(e),d&&d.progress(1)};return initDynamicValues(),(1!==u||g||d)&&(h=l.create({trigger:g?t.parentNode:t,start:function(){return n.clamp?"clamp(top bottom+="+c+")":"top bottom+="+c},end:function(){return n.value<0?"max":n.clamp?"clamp(bottom top-="+c+")":"bottom top-="+c},scroller:y,scrub:!0,refreshPriority:-999,onRefreshInit:revert,onRefresh:updateChange,onKill:function(e){var t=w.indexOf(e);t>=0&&w.splice(t,1),revert()},onUpdate:function(t){var r,n,o,i,s=b+x*(t.progress-p),a=_.length,l=0;if(t.offset){if(a){for(n=-K,o=t.end;a--;){if((r=_[a]).trig.isActive||n>=r.start&&n<=r.end)return void(d&&(r.trig.progress+=r.trig.direction<0?.001:-.001,r.trig.update(0,0,1),d.resetTo("y",parseFloat(T.y),-W,!0),G&&d.progress(1)));n>r.end&&(l+=r.distance),o-=r.distance}s=b+l+x*((e.utils.clamp(t.start,t.end,n)-t.start-l)/(o-t.start)-p)}C.length&&!g&&C.forEach(function(e){return e(s-l)}),i=s+m,s=Math.round(1e5*i)/1e5||0,d?(d.resetTo("y",s,-W,!0),G&&d.progress(1)):(T.y=s+"px",T.renderTransform(1))}}}),updateChange(h),e.core.getCache(h.trigger).stRevert=revertEffects,h.startY=b,h.pins=_,h.markers=C,h.ratio=u,h.autoSpeed=g,t.style.willChange="transform"),h};function refreshHeight(){return S=v.clientHeight,v.style.overflow="visible",i.style.height=r.innerHeight+(S-r.innerHeight)/Y+"px",S-r.innerHeight}addOnRefresh(),l.addEventListener("killAll",addOnRefresh),e.delayedCall(.5,function(){return G=0}),this.scrollTop=scrollTop,this.scrollTo=function(t,r,n){var o=e.utils.clamp(0,_maxScroll(),isNaN(t)?m.offset(t,n,!!r&&!E):+t);r?E?e.to(m,{duration:D,scrollTop:o,overwrite:"auto",ease:f}):j(o):scrollTop(o)},this.offset=function(t,r,n){var o,i=(t=s(t)[0]).style.cssText,a=l.create({trigger:t,start:r||"top top"});return w&&(G?l.refresh():adjustParallaxPosition([a],!0)),o=a.start/(n?Y:1),a.kill(!1),t.style.cssText=i,e.core.getCache(t).uncache=1,o},this.content=function(t){if(arguments.length){var r=s(t||"#smooth-content")[0]||console.warn("ScrollSmoother needs a valid content element.")||i.children[0];return r!==v&&(x=(v=r).getAttribute("style")||"",X&&X.observe(v),e.set(v,{overflow:"visible",width:"100%",boxSizing:"border-box",y:"+=0"}),D||e.set(v,{clearProps:"transform"})),this}return v},this.wrapper=function(t){return arguments.length?(y=s(t||"#smooth-wrapper")[0]||function(e){var t=n.querySelector(".ScrollSmoother-wrapper");return t||((t=n.createElement("div")).classList.add("ScrollSmoother-wrapper"),e.parentNode.insertBefore(t,e),t.appendChild(e)),t}(v),C=y.getAttribute("style")||"",refreshHeight(),e.set(y,D?{overflow:"hidden",position:"fixed",height:"100%",width:"100%",top:0,left:0,right:0,bottom:0}:{overflow:"visible",position:"relative",width:"100%",height:"auto",top:"auto",bottom:"auto",left:"auto",right:"auto"}),this):y},this.effects=function(e,t){var r;if(w||(w=[]),!e)return w.slice(0);(e=s(e)).forEach(function(e){for(var t=w.length;t--;)w[t].trigger===e&&w[t].kill()});var n,o,i=t=t||{},a=i.speed,c=i.lag,f=i.effectsPadding,u=[];for(n=0;n<e.length;n++)(o=createEffect(e[n],a,c,n,f))&&u.push(o);return(r=w).push.apply(r,u),!1!==t.refresh&&l.refresh(),u},this.sections=function(e,t){var r;if(T||(T=[]),!e)return T.slice(0);var n=s(e).map(function(e){return l.create({trigger:e,start:"top 120%",end:"bottom -20%",onToggle:function(t){e.style.opacity=t.isActive?"1":"0",e.style.pointerEvents=t.isActive?"all":"none"}})});return t&&t.add?(r=T).push.apply(r,n):T=n.slice(0),n},this.content(p.content),this.wrapper(p.wrapper),this.render=function(e){return render(e||0===e?e:K)},this.getVelocity=function(){return J.getVelocity(-K)},l.scrollerProxy(y,{scrollTop:scrollTop,scrollHeight:function(){return refreshHeight()&&i.scrollHeight},fixedMarkers:!1!==p.fixedMarkers&&!!D,content:v,getBoundingClientRect:function(){return{top:0,left:0,width:r.innerWidth,height:r.innerHeight}}}),l.defaults({scroller:y});var $=l.getAll().filter(function(e){return e.scroller===r||e.scroller===y});$.forEach(function(e){return e.revert(!0,!0)}),b=l.create({animation:e.fromTo(Q,{y:function(){return A=0,0}},{y:function(){return A=1,-refreshHeight()},immediateRender:!1,ease:"none",data:"ScrollSmoother",duration:100,onUpdate:function(){if(A){var e=H;e&&(killScrub(b),Q.y=K),render(Q.y,e),updateVelocity(),F&&!E&&F(q)}}}),onRefreshInit:function(e){if(!ScrollSmoother.isRefreshing){if(ScrollSmoother.isRefreshing=!0,w){var t=l.getAll().filter(function(e){return!!e.pin});w.forEach(function(e){e.vars.pinnedContainer||t.forEach(function(t){if(t.pin.contains(e.trigger)){var r=e.vars;r.pinnedContainer=t.pin,e.vars=null,e.init(r,e.animation)}})})}var r=e.getTween();P=r&&r._end>r._dp._time,k=K,Q.y=0,D&&(1===l.isTouch&&(y.style.position="absolute"),y.scrollTop=0,1===l.isTouch&&(y.style.position="fixed"))}},onRefresh:function(t){t.animation.invalidate(),t.setPositions(t.start,refreshHeight()/Y),P||killScrub(t),Q.y=-j()*Y,render(Q.y),G||(P&&(H=!1),t.animation.progress(e.utils.clamp(0,1,k/Y/-t.end))),P&&(t.progress-=.001,t.update()),ScrollSmoother.isRefreshing=!1},id:"ScrollSmoother",scroller:r,invalidateOnRefresh:!0,start:0,refreshPriority:-9999,end:function(){return refreshHeight()/Y},onScrubComplete:function(){J.reset(),I&&I(m)},scrub:D||!0}),this.smooth=function(e){return arguments.length&&(Y=(D=e||0)&&+p.speed||1,b.scrubDuration(e)),b.getTween()?b.getTween().duration():0},b.getTween()&&(b.getTween().vars.ease=p.ease||f),this.scrollTrigger=b,p.effects&&this.effects(!0===p.effects?"[data-"+V+"speed], [data-"+V+"lag]":p.effects,{effectsPadding:p.effectsPadding,refresh:!1}),p.sections&&this.sections(!0===p.sections?"[data-section]":p.sections),$.forEach(function(e){e.vars.scroller=y,e.revert(!1,!0),e.init(e.vars,e.animation)}),this.paused=function(e,t){return arguments.length?(!!E!==e&&(e?(b.getTween()&&b.getTween().pause(),j(-K/Y),J.reset(),(R=l.normalizeScroll())&&R.disable(),(E=l.observe({preventDefault:!0,type:"wheel,touch,scroll",debounce:!1,allowClicks:!0,onChangeY:function(){return scrollTop(-K)}})).nested=h(o,"wheel,touch,scroll",!0,!1!==t)):(E.nested.kill(),E.kill(),E=0,R&&R.enable(),b.progress=(-K/Y-b.start)/(b.end-b.start),killScrub(b))),this):!!E},this.kill=this.revert=function(){m.paused(!1),killScrub(b),b.kill();for(var e=(w||[]).concat(T||[]),t=e.length;t--;)e[t].kill();l.scrollerProxy(y),l.removeEventListener("killAll",addOnRefresh),l.removeEventListener("refresh",onRefresh),y.style.cssText=C,v.style.cssText=x;var n=l.defaults({});n&&n.scroller===y&&l.defaults({scroller:r}),m.normalizer&&l.normalizeScroll(!1),clearInterval(_),c=null,X&&X.disconnect(),i.style.removeProperty("height"),r.removeEventListener("focusin",_onFocusIn)},this.refresh=function(e,t){return b.refresh(e,t)},O&&(this.normalizer=l.normalizeScroll(!0===O?{debounce:!0,content:!D&&v}:O)),l.config(p),"scrollBehavior"in r.getComputedStyle(i)&&e.set([i,o],{scrollBehavior:"auto"}),r.addEventListener("focusin",_onFocusIn),_=setInterval(updateVelocity,250),"loading"===n.readyState||requestAnimationFrame(function(){return l.refresh()})}return ScrollSmoother.register=function(r){return t||(e=r||_getGSAP())&&(s=e.utils.toArray,a=e.utils.clamp,f=e.parseEase("expo"),g=e.core.context||function(){},l=e.core.globals().ScrollTrigger,e.core.globals("ScrollSmoother",ScrollSmoother),i&&l&&(d=e.delayedCall(.2,function(){return l.isRefreshing||c&&c.refresh()}).pause(),u=l.core._getVelocityProp,h=l.core._inputObserver,ScrollSmoother.refresh=l.refresh,t=1)),t},_createClass(ScrollSmoother,[{key:"progress",get:function(){return this.scrollTrigger?this.scrollTrigger.animation._time/100:0}}]),ScrollSmoother}();p.version="3.13.0",p.create=function(e){return c&&e&&c.content()===s(e.content)[0]?c:new p(e)},p.get=function(){return c},_getGSAP()&&e.registerPlugin(p);export{p as ScrollSmoother,p as default};
//# sourceMappingURL=ScrollSmoother.mjs.map
