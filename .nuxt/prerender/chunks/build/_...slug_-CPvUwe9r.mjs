import{_ as e}from"./AppNavigation-DbbUjllq.mjs";import{defineComponent as t,computed as s,ref as i,watch as o,withAsyncContext as l,mergeProps as a,unref as r,withCtx as d,createVNode as n,useSSRContext as c}from"file:///home/kai/Projekti/webshop/node_modules/vue/index.mjs";import{ssrRenderAttrs as m,ssrRenderComponent as p,ssrRenderClass as u,ssrRenderList as v,ssrInterpolate as x}from"file:///home/kai/Projekti/webshop/node_modules/vue/server-renderer/index.mjs";import{_ as g}from"./nuxt-link-BeJz8Y8C.mjs";import h from"file:///home/kai/Projekti/webshop/node_modules/gsap/dist/gsap.js";import{S as f}from"../_/ScrollTrigger.mjs";import{_ as b,d as _,c as w,f as y}from"./server.mjs";import{u as k}from"./useImageTransform-D7n6x7Uv.mjs";import{u as j}from"./index-DSJLL3Jq.mjs";import"./virtual_public-Dgbfu3-q.mjs";import"../nitro/nitro.mjs";import"file:///home/kai/Projekti/webshop/node_modules/h3/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/nodemailer/lib/nodemailer.js";import"node:crypto";import"file:///home/kai/Projekti/webshop/node_modules/destr/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/hookable/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ofetch/dist/node.mjs";import"file:///home/kai/Projekti/webshop/node_modules/node-mock-http/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/fs.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/fs-lite.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/lru-cache.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ohash/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/klona/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/defu/dist/defu.mjs";import"file:///home/kai/Projekti/webshop/node_modules/scule/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unctx/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/radix3/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@intlify/utils/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/cookie-es/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/vue-router/dist/vue-router.node.mjs";import"node:fs";import"node:url";import"file:///home/kai/Projekti/webshop/node_modules/pathe/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@iconify/utils/lib/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/consola/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ipx/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/pinia/dist/pinia.prod.cjs";import"file:///home/kai/Projekti/webshop/node_modules/vue-devtools-stub/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@iconify/vue/dist/iconify.mjs";import"../_/renderer.mjs";import"file:///home/kai/Projekti/webshop/node_modules/vue-bundle-renderer/dist/runtime.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unhead/dist/server.mjs";import"file:///home/kai/Projekti/webshop/node_modules/devalue/index.js";import"file:///home/kai/Projekti/webshop/node_modules/unhead/dist/plugins.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unhead/dist/utils.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@iconify/utils/lib/css/icon.mjs";import"file:///home/kai/Projekti/webshop/node_modules/nuxt/node_modules/perfect-debounce/dist/index.mjs";const $=t({__name:"CollectionShopListingSkeleton",__ssrInlineRender:!0,props:{animate:{type:Boolean,default:!0},sections:{default:()=>[{type:"standard",textLines:3,showSeparator:!0},{type:"reversed",textLines:3,showSeparator:!0},{type:"standard",textLines:3,showSeparator:!1},{type:"hero",showSeparator:!1},{type:"reversed",textLines:3,showSeparator:!0},{type:"standard",textLines:3,showSeparator:!1},{type:"triple",count:3,showSeparator:!1}]}},setup(e){const t=e,i=s(()=>t.sections);return(t,s,o,l)=>{s(`<section${m(a({class:"pt-8 mt-2 md:mt-6 px-4 md:px-8"},l))}><div class="collection-content">\x3c!--[--\x3e`),v(r(i),(t,o)=>{s(`<div class="${u([{"animate-pulse":e.animate},"pb-8 md:pb-12"])}">`),"hero"===t.type?(s('<div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8 min-h-screen">\x3c!--[--\x3e'),v(2,e=>{s('<article class="relative min-h-[50vh] md:min-h-full overflow-hidden w-full" role="status" aria-busy="true" aria-label="Loading product"><div class="absolute inset-0 bg-gray-300"></div><div class="absolute bottom-0 left-0 right-0 p-4 md:p-6 bg-background_color/80 w-full"><div class="space-y-3"><div class="h-3 w-24 bg-gray-300 rounded"></div><div class="h-8 md:h-10 lg:h-12 w-3/4 bg-gray-300 rounded"></div><div class="flex items-center gap-2">\x3c!--[--\x3e'),v(4,e=>{s('<div class="w-8 h-8 md:w-10 md:h-10 bg-gray-300 border-2 border-background_color"></div>')}),s('\x3c!--]--\x3e</div><div class="h-10 w-32 bg-gray-300 rounded"></div></div></div></article>')}),s("\x3c!--]--\x3e</div>")):"triple"===t.type?(s('<div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-8">\x3c!--[--\x3e'),v(t.count,e=>{s('<article class="group" role="status" aria-busy="true" aria-label="Loading product"><div class="relative w-full overflow-hidden"><div class="w-full aspect-[3/4] bg-gray-300 border border-gray-300"></div></div><div class="pt-3 md:pt-4 text-left space-y-2"><div class="h-3 w-20 bg-gray-300 rounded"></div><div class="h-4 w-3/4 bg-gray-300 rounded"></div><div class="flex items-center gap-2">\x3c!--[--\x3e'),v(3,e=>{s('<div class="w-7 h-7 md:w-8 md:h-8 bg-gray-300 border border-gray-300"></div>')}),s("\x3c!--]--\x3e</div></div></article>")}),s("\x3c!--]--\x3e</div>")):(s(`<div><div class="${u(["reversed"===t.type?"md:flex md:flex-row-reverse":"","grid grid-cols-2 md:grid-cols-3 gap-x-4 md:gap-x-8 lg:gap-x-24 gap-y-8"])}"><article class="group col-span-2 md:col-span-1" role="status" aria-busy="true" aria-label="Loading product"><div class="relative w-full overflow-hidden"><div class="w-full aspect-[3/4] bg-gray-300 border border-gray-300"></div></div><div class="pt-3 md:pt-4 text-left space-y-2"><div class="h-3 w-20 bg-gray-300 rounded"></div><div class="h-4 w-3/4 bg-gray-300 rounded"></div><div class="flex items-center gap-2">\x3c!--[--\x3e`),v(3,e=>{s('<div class="w-7 h-7 md:w-8 md:h-8 bg-gray-300 border border-gray-300"></div>')}),s('\x3c!--]--\x3e</div></div></article><div class="col-span-2 md:col-span-2 flex flex-col justify-center"><div class="h-4 w-32 bg-gray-300 rounded mb-3 px-4"></div><div class="flex flex-col space-y-3">\x3c!--[--\x3e'),v(t.textLines,e=>{s(`<div class="${u([{"w-full":1===e,"w-11/12":2===e,"w-10/12":3===e,"w-9/12":e>3},"h-4 bg-gray-300 rounded px-4"])}"></div>`)}),s("\x3c!--]--\x3e</div></div></div></div>")),t.showSeparator&&o<r(i).length-1?s('<div class="flex justify-center py-4 md:py-6"><div class="w-64 h-px bg-gray-300"></div></div>'):s("\x3c!----\x3e"),s("</div>")}),s("\x3c!--]--\x3e</div></section>")}}}),P=$.setup;$.setup=(e,t)=>{const s=c();return(s.modules||(s.modules=new Set)).add("components/CollectionShopListingSkeleton.vue"),P?P(e,t):void 0};const S=t({__name:"testCollectionListing",__ssrInlineRender:!0,props:{products:{},collection:{}},setup(e){h.registerPlugin(f);const t=e;w(),i(null),i({});const{getResponsiveImages:o}=k(),getSwatchImageAttrs=e=>o(e,[50,100],"40px"),l=s(()=>{const e=t.collection||{};return[e.element_one,e.element_two,e.element_three,e.element_four,e.element_five].filter(Boolean)}),c=s(()=>{var e,s,i,o,a;const r=[...t.products],d=[];let n=0;r.length>=1&&(d.push({layout:"standard",items:[r[0]],text:l.value[0]||"",heading:(null==(e=t.collection)?void 0:e.name)||"Collection"}),n=1),r.length>=2&&(d.push({layout:"reversed",items:[r[1]],text:l.value[1]||"",heading:(null==(s=t.collection)?void 0:s.name)||"Collection"}),n=2),r.length>=3&&(d.push({layout:"standard",items:[r[2]],text:l.value[2]||"",heading:(null==(i=t.collection)?void 0:i.name)||"Collection"}),n=3),r.length>=5&&(d.push({layout:"hero",items:[r[3],r[4]],text:"",heading:""}),n=5),r.length>=6&&(d.push({layout:"reversed",items:[r[5]],text:l.value[3]||"",heading:(null==(o=t.collection)?void 0:o.name)||"Collection"}),n=6),r.length>=7&&(d.push({layout:"standard",items:[r[6]],text:l.value[4]||"",heading:(null==(a=t.collection)?void 0:a.name)||"Collection"}),n=7);let c=0;for(;n<r.length;){const e=r.length-n;if(c>0&&c%3==0&&e>=2)d.push({layout:"hero",items:[r[n],r[n+1]],text:"",heading:""}),n+=2,c++;else{const t=Math.min(3,e);d.push({layout:"triple",items:r.slice(n,n+t),text:"",heading:""}),n+=t,c++}}return d});function formatPrice(e){if(!e)return"N/A";const t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}return(e,t,s,i)=>{const l=g;t(`<section${m(a({class:"pt-8 mt-2 md:mt-6 px-4 md:px-8"},i))}><div class="collection-content">\x3c!--[--\x3e`),v(r(c),(e,i)=>{var g,h,f,b,_,w;t("<div>"),"hero"===e.layout?(t('<div class="pb-8 md:pb-12"><div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8">\x3c!--[--\x3e'),v(e.items,e=>{var i,r,c,u,g,h;t(`<article class="group cursor-pointer relative h-[80vh] overflow-hidden w-full md:w-2/3 mx-auto"><img${m(a({ref_for:!0},(h=e.currentImage||(null==(r=null==(i=e.colors)?void 0:i[0])?void 0:r.avatar_image),o(h,[400,600,800,1200,1600],"(max-width: 767px) 100vw, 33vw")),{alt:e.alt_text||e.name,class:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",loading:"lazy"}))}><div class="absolute inset-0"></div><div class="absolute bottom-0 left-0 right-0 p-4 md:p-6 text-text_color bg-background_color/85 w-full"><div class="hero-content"><p class="text-xs tracking-widest uppercase mb-1 opacity-80">${x(e.category)}</p><h2 class="hero-title text-xl md:text-2xl font-bold mb-1 uppercase tracking-tight">${x(e.name)}</h2><div class="flex items-center gap-3 mb-2">`),e.discount&&e.discount_price?t(`<div class="flex items-center gap-2"><span class="text-sm md:text-base font-semibold">${x(formatPrice(e.discount_price))}</span><span class="text-sm md:text-base line-through opacity-70">${x(formatPrice(e.price))}</span></div>`):t(`<span class="text-sm md:text-base">${x(formatPrice(e.price))}</span>`),t('</div><div class="flex items-center gap-2 mb-2">\x3c!--[--\x3e'),v(null==(c=e.colors)?void 0:c.slice(0,4),(e,s)=>{t(`<div class="relative"><img${m(a({ref_for:!0},getSwatchImageAttrs(e.avatar_image),{alt:e.color,class:"w-8 h-8 md:w-10 md:h-10 object-cover border border-text_color/30 cursor-pointer transition-transform hover:scale-110"}))}></div>`)}),t("\x3c!--]--\x3e</div>"),t(p(l,{to:`/product/${e.slug}/${null==(g=null==(u=e.colors)?void 0:u[0])?void 0:g.variant_slug}`,class:"btn btn--secondary inline-flex text-sm"},{default:d((e,t,s,i)=>{if(!t)return[n("span",{class:"btn__text"},"Discover"),n("span",{class:"btn__fill"})];t(`<span class="btn__text"${i}>Discover</span><span class="btn__fill"${i}></span>`)}),_:2},s)),t("</div></div></article>")}),t("\x3c!--]--\x3e</div></div>")):"triple"===e.layout?(t('<div class="pb-8 md:pb-12"><div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-10">\x3c!--[--\x3e'),v(e.items,e=>{var i,r,c,u,g,h;t(`<article class="group cursor-pointer relative h-[100vh] overflow-hidden w-full"><img${m(a({ref_for:!0},(h=e.currentImage||(null==(r=null==(i=e.colors)?void 0:i[0])?void 0:r.avatar_image),o(h,[400,600,800,1200,1600],"(max-width: 767px) 100vw, 33vw")),{alt:e.alt_text||e.name,class:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",loading:"lazy"}))}><div class="absolute inset-0"></div><div class="absolute bottom-0 left-0 right-0 p-4 md:p-6 text-text_color bg-background_color/85 w-full"><div class="hero-content"><p class="text-xs tracking-widest uppercase mb-1 opacity-80">${x(e.category)}</p><h2 class="hero-title text-lg md:text-2xl font-bold mb-1 uppercase tracking-tight">${x(e.name)}</h2><div class="flex items-center gap-3 mb-2">`),e.discount&&e.discount_price?t(`<div class="flex items-center gap-2"><span class="text-sm md:text-base font-semibold">${x(formatPrice(e.discount_price))}</span><span class="text-sm md:text-base line-through opacity-70">${x(formatPrice(e.price))}</span></div>`):t(`<span class="text-sm md:text-base font-semibold">${x(formatPrice(e.price))}</span>`),t('</div><div class="flex items-center gap-2 mb-2">\x3c!--[--\x3e'),v(null==(c=e.colors)?void 0:c.slice(0,4),(e,s)=>{t(`<div class="relative"><img${m(a({ref_for:!0},getSwatchImageAttrs(e.avatar_image),{alt:e.color,class:"w-8 h-8 object-cover border border-text_color/30 cursor-pointer transition-transform hover:scale-110"}))}></div>`)}),t("\x3c!--]--\x3e</div>"),t(p(l,{to:`/product/${e.slug}/${null==(g=null==(u=e.colors)?void 0:u[0])?void 0:g.variant_slug}`,class:"btn btn--secondary inline-flex text-sm"},{default:d((e,t,s,i)=>{if(!t)return[n("span",{class:"btn__text"},"Discover"),n("span",{class:"btn__fill"})];t(`<span class="btn__text"${i}>Discover</span><span class="btn__fill"${i}></span>`)}),_:2},s)),t("</div></div></article>")}),t("\x3c!--]--\x3e</div></div>")):(t(`<div class="pb-8 md:pb-12"><div class="grid grid-cols-1 md:grid-cols-3 gap-x-4 md:gap-x-8 lg:gap-x-24 gap-y-8"><article class="${u(["reversed"===e.layout?"md:order-2":"md:order-1","group cursor-pointer relative h-[80vh] overflow-hidden w-full md:col-span-1"])}"><img${m(a({ref_for:!0},(w=e.items[0].currentImage||(null==(h=null==(g=e.items[0].colors)?void 0:g[0])?void 0:h.avatar_image),o(w,[400,600,800,1200,1600],"(max-width: 767px) 100vw, 33vw")),{alt:e.items[0].alt_text||e.items[0].name,class:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",loading:"lazy"}))}><div class="absolute inset-0"></div><div class="absolute bottom-0 left-0 right-0 p-4 md:p-6 text-text_color bg-background_color/85 w-full"><div class="hero-content"><p class="text-xs tracking-widest uppercase mb-1 opacity-80">${x(e.items[0].category)}</p><h2 class="hero-title text-xl md:text-2xl font-bold mb-1 uppercase tracking-tight">${x(e.items[0].name)}</h2><div class="flex items-center gap-3 mb-2">`),e.items[0].discount&&e.items[0].discount_price?t(`<div class="flex items-center gap-2"><span class="text-sm md:text-base font-semibold">${x(formatPrice(e.items[0].discount_price))}</span><span class="text-sm md:text-base line-through opacity-70">${x(formatPrice(e.items[0].price))}</span></div>`):t(`<span class="text-sm md:text-base font-semibold">${x(formatPrice(e.items[0].price))}</span>`),t('</div><div class="flex items-center gap-2 mb-2">\x3c!--[--\x3e'),v(null==(f=e.items[0].colors)?void 0:f.slice(0,4),(e,s)=>{t(`<div class="relative"><img${m(a({ref_for:!0},getSwatchImageAttrs(e.avatar_image),{alt:e.color,class:"w-8 h-8 md:w-10 md:h-10 object-cover border border-text_color/30 cursor-pointer transition-transform hover:scale-110"}))}></div>`)}),t("\x3c!--]--\x3e</div>"),t(p(l,{to:`/product/${e.items[0].slug}/${null==(_=null==(b=e.items[0].colors)?void 0:b[0])?void 0:_.variant_slug}`,class:"btn btn--secondary inline-flex text-sm"},{default:d((e,t,s,i)=>{if(!t)return[n("span",{class:"btn__text"},"Discover"),n("span",{class:"btn__fill"})];t(`<span class="btn__text"${i}>Discover</span><span class="btn__fill"${i}></span>`)}),_:2},s)),t(`</div></div></article><div class="${u(["reversed"===e.layout?"md:order-1":"md:order-2","flex flex-col justify-center section-trigger-line md:col-span-2"])}"><h4 class="section-heading uppercase tracking-wider text-xs md:text-sm mb-3 px-4">${x(e.heading)}</h4><div class="flex flex-col">\x3c!--[--\x3e`),v(function(e=""){return e.split(new RegExp("(?<=[.!?])\\s+|\\n+")).filter(Boolean)}(e.text),(e,s)=>{t(`<span class="section-text-line px-4 py-1 md:py-2 my-1 md:my-3 text-sm md:text-base leading-relaxed tracking-wide text-text_color">${x(e)}</span>`)}),t("\x3c!--]--\x3e</div></div></div></div>")),i<r(c).length-1&&function(e){return"hero"!==c.value[e].layout}(i)?t('<div class="flex justify-center py-4 md:py-6"><div class="w-64 h-px bg-text_color/30"></div></div>'):t("\x3c!----\x3e"),t("</div>")}),t("\x3c!--]--\x3e</div></section>")}}}),C=S.setup;S.setup=(e,t)=>{const s=c();return(s.modules||(s.modules=new Set)).add("components/testCollectionListing.vue"),C?C(e,t):void 0};const L=t({__name:"[...slug]",__ssrInlineRender:!0,async setup(t){let d,n;const c=y(),v=_();w();const x=["all","woman","man","kids"],g=s(()=>String(v.params.slug)),h=i(v.query.type&&x.includes(String(v.query.type))?String(v.query.type):"all"),f=s(()=>"man"===h.value?"male":"woman"===h.value?"female":"kids"===h.value?"kids":"all");function typeBtnClass(e){return`pr-8 py-1 text-sm text-text_color cursor-pointer hover:opacity-70 transition-opacity duration-200 ${h.value===e?"font-bold":"bg-background_color"}`}o(()=>v.query.type,e=>{const t=e&&x.includes(String(e))?String(e):"all";h.value!==t&&(h.value=t)},{immediate:!0});const{data:b,pending:k}=([d,n]=l(async()=>j(`collection:${g.value}`,async()=>await $fetch(`${c.public.apiBase}/public/collections/${g.value}/`))),d=await d,n(),d),{data:P,pending:C}=([d,n]=l(async()=>j(`products-all:${g.value}:${f.value}`,async()=>{const e=`${c.public.apiBase}/public/products-all/`,t=new URLSearchParams({page:"1",page_size:String(10),collection:g.value});"all"!==f.value&&t.append("gender",f.value);let s=`${e}?${t.toString()}`;const i=[],o=await $fetch(s);return Array.isArray(null==o?void 0:o.results)&&i.push(...o.results),i},{watch:[g,f]})),d=await d,n(),d),L=k.value,D=C.value;console.log(k.value,C.value);const B=s(()=>b.value||{}),I=s(()=>P.value||[]);function onCtaClick(){}return(t,s,i,o)=>{const l=e,d=$,n=S;s(`<section${m(a({class:"collection-page"},o))} data-v-76ec7697><div class="w-full z-50" data-v-76ec7697>`),s(p(l,{dark:!1},null,i)),s(`</div><div class="relative z-10" data-v-76ec7697><div class="flex flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 pt-4 gap-6" data-v-76ec7697><div class="flex justify-start w-full" data-v-76ec7697><div class="flex items-center gap-1" data-v-76ec7697><button type="button" class="${u(typeBtnClass("all"))}" data-v-76ec7697> ALL </button><button type="button" class="${u(typeBtnClass("woman"))}" data-v-76ec7697> WOMAN </button><button type="button" class="${u(typeBtnClass("man"))}" data-v-76ec7697> MAN </button><button type="button" class="${u(typeBtnClass("kids"))}" data-v-76ec7697> KIDS </button></div></div></div>`),r(L)&&r(D)?s(p(d,{animate:!0},null,i)):s(p(n,{products:r(I),collection:r(B),onCtaClick:onCtaClick},null,i)),s("</div></section>")}}}),D=L.setup;L.setup=(e,t)=>{const s=c();return(s.modules||(s.modules=new Set)).add("pages/collections/[...slug].vue"),D?D(e,t):void 0};const B=b(L,[["__scopeId","data-v-76ec7697"]]);export{B as default};
//# sourceMappingURL=_...slug_-CPvUwe9r.mjs.map
