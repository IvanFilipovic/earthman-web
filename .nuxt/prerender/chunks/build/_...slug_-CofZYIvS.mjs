import{_ as e}from"./AppNavigation-CXvNTMsr.mjs";import{defineComponent as o,computed as t,ref as s,watch as i,withAsyncContext as l,mergeProps as a,unref as r,withCtx as d,createVNode as n,nextTick as c,useSSRContext as u}from"file:///home/kai/Projekti/webshop/node_modules/vue/index.mjs";import{ssrRenderAttrs as m,ssrRenderComponent as p,ssrRenderClass as v,ssrRenderList as g,ssrRenderAttr as x,ssrInterpolate as h,ssrRenderStyle as b}from"file:///home/kai/Projekti/webshop/node_modules/vue/server-renderer/index.mjs";import{_ as f}from"./nuxt-link-7pp3EPK3.mjs";import{z as y}from"../_/vue.es.mjs";import{u as w,_}from"./index-Ccr6sSLn.mjs";import k from"file:///home/kai/Projekti/webshop/node_modules/gsap/dist/gsap.js";import{S as j}from"../_/ScrollTrigger.mjs";import{_ as $,c as P,b as S,e as C}from"./server.mjs";import"../nitro/nitro.mjs";import"file:///home/kai/Projekti/webshop/node_modules/h3/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/destr/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/hookable/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ofetch/dist/node.mjs";import"file:///home/kai/Projekti/webshop/node_modules/node-mock-http/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/fs.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/fs-lite.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/lru-cache.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ohash/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/klona/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/defu/dist/defu.mjs";import"file:///home/kai/Projekti/webshop/node_modules/scule/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unctx/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/radix3/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@intlify/utils/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/cookie-es/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/vue-router/dist/vue-router.node.mjs";import"node:fs";import"node:url";import"file:///home/kai/Projekti/webshop/node_modules/pathe/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@iconify/utils/lib/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/consola/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ipx/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@iconify/vue/dist/iconify.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@iconify/utils/lib/css/icon.mjs";import"file:///home/kai/Projekti/webshop/node_modules/nuxt/node_modules/perfect-debounce/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/pinia/dist/pinia.prod.cjs";import"file:///home/kai/Projekti/webshop/node_modules/vue-devtools-stub/dist/index.mjs";import"../_/renderer.mjs";import"file:///home/kai/Projekti/webshop/node_modules/vue-bundle-renderer/dist/runtime.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unhead/dist/server.mjs";import"file:///home/kai/Projekti/webshop/node_modules/devalue/index.js";import"file:///home/kai/Projekti/webshop/node_modules/unhead/dist/utils.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unhead/dist/plugins.mjs";const L=o({__name:"CollectionShopListingSkeleton",__ssrInlineRender:!0,props:{animate:{type:Boolean,default:!0},sections:{default:()=>[{type:"standard",textLines:3,showSeparator:!0},{type:"reversed",textLines:3,showSeparator:!0},{type:"standard",textLines:3,showSeparator:!1},{type:"hero",showSeparator:!1},{type:"reversed",textLines:3,showSeparator:!0},{type:"standard",textLines:3,showSeparator:!1},{type:"triple",count:3,showSeparator:!1}]}},setup(e){const o=e,s=t(()=>o.sections);return(o,t,i,l)=>{t(`<section${m(a({class:"pt-8 mt-2 md:mt-6 px-4 md:px-8"},l))}><div class="collection-content">\x3c!--[--\x3e`),g(r(s),(o,i)=>{t(`<div class="${v([{"animate-pulse":e.animate},"pb-8 md:pb-12"])}">`),"hero"===o.type?(t('<div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8 min-h-screen">\x3c!--[--\x3e'),g(2,e=>{t('<article class="relative min-h-[50vh] md:min-h-full overflow-hidden w-full" role="status" aria-busy="true" aria-label="Loading product"><div class="absolute inset-0 bg-gray-300"></div><div class="absolute bottom-0 left-0 right-0 p-4 md:p-6 bg-background_color/80 w-full"><div class="space-y-3"><div class="h-3 w-24 bg-gray-300 rounded"></div><div class="h-8 md:h-10 lg:h-12 w-3/4 bg-gray-300 rounded"></div><div class="flex items-center gap-2">\x3c!--[--\x3e'),g(4,e=>{t('<div class="w-8 h-8 md:w-10 md:h-10 bg-gray-300 border-2 border-background_color"></div>')}),t('\x3c!--]--\x3e</div><div class="h-10 w-32 bg-gray-300 rounded"></div></div></div></article>')}),t("\x3c!--]--\x3e</div>")):"triple"===o.type?(t('<div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-8">\x3c!--[--\x3e'),g(o.count,e=>{t('<article class="group" role="status" aria-busy="true" aria-label="Loading product"><div class="relative w-full overflow-hidden"><div class="w-full aspect-[3/4] bg-gray-300 border border-gray-300"></div></div><div class="pt-3 md:pt-4 text-left space-y-2"><div class="h-3 w-20 bg-gray-300 rounded"></div><div class="h-4 w-3/4 bg-gray-300 rounded"></div><div class="flex items-center gap-2">\x3c!--[--\x3e'),g(3,e=>{t('<div class="w-7 h-7 md:w-8 md:h-8 bg-gray-300 border border-gray-300"></div>')}),t("\x3c!--]--\x3e</div></div></article>")}),t("\x3c!--]--\x3e</div>")):(t(`<div><div class="${v(["reversed"===o.type?"md:flex md:flex-row-reverse":"","grid grid-cols-2 md:grid-cols-3 gap-x-4 md:gap-x-8 lg:gap-x-24 gap-y-8"])}"><article class="group col-span-2 md:col-span-1" role="status" aria-busy="true" aria-label="Loading product"><div class="relative w-full overflow-hidden"><div class="w-full aspect-[3/4] bg-gray-300 border border-gray-300"></div></div><div class="pt-3 md:pt-4 text-left space-y-2"><div class="h-3 w-20 bg-gray-300 rounded"></div><div class="h-4 w-3/4 bg-gray-300 rounded"></div><div class="flex items-center gap-2">\x3c!--[--\x3e`),g(3,e=>{t('<div class="w-7 h-7 md:w-8 md:h-8 bg-gray-300 border border-gray-300"></div>')}),t('\x3c!--]--\x3e</div></div></article><div class="col-span-2 md:col-span-2 flex flex-col justify-center"><div class="h-4 w-32 bg-gray-300 rounded mb-3 px-4"></div><div class="flex flex-col space-y-3">\x3c!--[--\x3e'),g(o.textLines,e=>{t(`<div class="${v([{"w-full":1===e,"w-11/12":2===e,"w-10/12":3===e,"w-9/12":e>3},"h-4 bg-gray-300 rounded px-4"])}"></div>`)}),t("\x3c!--]--\x3e</div></div></div></div>")),o.showSeparator&&i<r(s).length-1?t('<div class="flex justify-center py-4 md:py-6"><div class="w-64 h-px bg-gray-300"></div></div>'):t("\x3c!----\x3e"),t("</div>")}),t("\x3c!--]--\x3e</div></section>")}}}),I=L.setup;L.setup=(e,o)=>{const t=u();return(t.modules||(t.modules=new Set)).add("components/CollectionShopListingSkeleton.vue"),I?I(e,o):void 0};const z=o({__name:"MobileColorSlider",__ssrInlineRender:!0,props:{colors:{}},emits:["go"],setup(e,{emit:o}){const t=e,l=s(0),[r,d]=y({loop:!0,initial:0,slideChanged(e){l.value=e.track.details.rel}});return i(()=>{var e;return null==(e=t.colors)?void 0:e.length},async()=>{await c(),d.value&&(d.value.update(),d.value.moveToIdx(0),l.value=0)}),(o,t,s,i)=>{e.colors&&e.colors.length>0?(t(`<div${m(a({class:"block md:hidden"},i))}><div class="keen-slider">\x3c!--[--\x3e`),g(e.colors,(e,o)=>{t(`<div class="keen-slider__slide"><img${x("src",e.avatar_image)}${x("alt",e.color)} class="w-full h-auto object-cover border border-text_color/30" loading="lazy"></div>`)}),t("\x3c!--]--\x3e</div></div>")):t("\x3c!----\x3e")}}}),B=z.setup;z.setup=(e,o)=>{const t=u();return(t.modules||(t.modules=new Set)).add("components/MobileColorSlider.vue"),B?B(e,o):void 0};const q=o({__name:"CollectionShopListing",__ssrInlineRender:!0,props:{products:{},collection:{}},setup(e){k.registerPlugin(j);const o=e,i=S(),l=s(null),c=s({}),u=t(()=>{const e=o.collection||{};return[e.element_one,e.element_two,e.element_three,e.element_four,e.element_five].filter(Boolean)}),y=t(()=>{var e,t,s,i,l;const a=[...o.products],r=[];let d=0;a.length>=1&&(r.push({layout:"standard",items:[a[0]],text:u.value[0]||"",heading:(null==(e=o.collection)?void 0:e.name)||"Collection"}),d=1),a.length>=2&&(r.push({layout:"reversed",items:[a[1]],text:u.value[1]||"",heading:(null==(t=o.collection)?void 0:t.name)||"Collection"}),d=2),a.length>=3&&(r.push({layout:"standard",items:[a[2]],text:u.value[2]||"",heading:(null==(s=o.collection)?void 0:s.name)||"Collection"}),d=3),a.length>=5&&(r.push({layout:"hero",items:[a[3],a[4]],text:"",heading:""}),d=5),a.length>=6&&(r.push({layout:"reversed",items:[a[5]],text:u.value[3]||"",heading:(null==(i=o.collection)?void 0:i.name)||"Collection"}),d=6),a.length>=7&&(r.push({layout:"standard",items:[a[6]],text:u.value[4]||"",heading:(null==(l=o.collection)?void 0:l.name)||"Collection"}),d=7);let n=0;for(;d<a.length;){const e=a.length-d;if(n>0&&n%3==0&&e>=2)r.push({layout:"hero",items:[a[d],a[d+1]],text:"",heading:""}),d+=2,n++;else{const o=Math.min(3,e);r.push({layout:"triple",items:a.slice(d,d+o),text:"",heading:""}),d+=o,n++}}return r});function isColorHovered(e,o){return c.value[e.slug]===o}function goToProduct(e,o){e&&o&&i.push(`/product/${e}/${o}`)}return(e,o,t,s)=>{const i=f,c=z,u=_;o(`<section${m(a({class:"pt-8 mt-2 md:mt-6 px-4 md:px-8"},s))}><div class="collection-content">\x3c!--[--\x3e`),g(r(y),(e,s)=>{o("<div>"),"hero"===e.layout?(o('<div class="pb-8 md:pb-12"><div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8 min-h-screen">\x3c!--[--\x3e'),g(e.items,e=>{var s,l,a,r,c;o(`<article class="group cursor-pointer relative min-h-[50vh] md:min-h-full overflow-hidden w-full"><img${x("src",e.currentImage||(null==(l=null==(s=e.colors)?void 0:s[0])?void 0:l.avatar_image))}${x("alt",e.alt_text||e.name)} class="absolute inset-0 max-w-full h-full object-contain mx-auto transition-transform duration-700 group-hover:scale-105" loading="lazy"><div class="absolute inset-0"></div><div class="absolute bottom-0 left-0 right-0 p-4 md:p-6 text-text_color bg-background_color/80 w-full"><div class="hero-content"><p class="text-xs tracking-widest uppercase mb-1 opacity-80">${h(e.category)}</p><h2 class="hero-title text-2xl md:text-3xl lg:text-4xl font-bold mb-3 uppercase tracking-tight">${h(e.name)}</h2><div class="flex items-center gap-2 mb-4">\x3c!--[--\x3e`),g(null==(a=e.colors)?void 0:a.slice(0,4),(e,t)=>{o(`<div class="relative"><img${x("src",e.avatar_image)}${x("alt",e.color)} class="w-8 h-8 md:w-10 md:h-10 object-cover border-2 border-background_color cursor-pointer transition-transform hover:scale-110"></div>`)}),o("\x3c!--]--\x3e</div>"),o(p(i,{to:`/product/${e.slug}/${null==(c=null==(r=e.colors)?void 0:r[0])?void 0:c.variant_slug}`,class:"btn btn--secondary inline-flex text-sm"},{default:d((e,o,t,s)=>{if(!o)return[n("span",{class:"btn__text"},"Discover"),n("span",{class:"btn__fill"})];o(`<span class="btn__text"${s}>Discover</span><span class="btn__fill"${s}></span>`)}),_:2},t)),o("</div></div></article>")}),o("\x3c!--]--\x3e</div></div>")):"triple"===e.layout?(o('<div class="pb-8 md:pb-12"><div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-8">\x3c!--[--\x3e'),g(e.items,e=>{var s,i;o(`<article class="group cursor-pointer"><div class="relative overflow-hidden"><img${x("src",e.currentImage||(null==(i=null==(s=e.colors)?void 0:s[0])?void 0:i.avatar_image))}${x("alt",e.alt_text||e.name)} class="hidden md:block w-full h-full object-cover border border-text_color/30 transition-transform duration-500 group-hover:scale-105" loading="lazy">`),e.colors&&e.colors.length>0?o(p(c,{colors:e.colors,onGo:o=>goToProduct(e.slug,o)},null,t)):o(`<div class="block md:hidden"><img${x("src",e.currentImage)}${x("alt",e.alt_text||e.name)} class="w-full h-auto object-cover border border-text_color/30" loading="lazy"></div>`),o(`<button type="button" class="${v([{"opacity-100":r(l)===e.slug,"opacity-0":r(l)!==e.slug},"absolute top-4 left-4 bg-text_color text-background_color tracking-wider text-xs font-light px-2 transition-opacity duration-200"])}" style="${b(r(l)===e.slug?null:{display:"none"})}"> VIEW </button></div><div class="pt-3 md:pt-4 text-left"><p class="text-xs tracking-wider font-extralight">${h(e.category)}</p><h3 class="uppercase tracking-wider text-sm font-normal truncate py-1">${h(e.name)}</h3>`),e.colors&&e.colors.length>0?(o('<div class="mt-1 flex items-center gap-2">\x3c!--[--\x3e'),g(e.colors,(s,i)=>{o(`<div class="relative"><img${x("src",s.avatar_image)}${x("alt",s.color)} class="w-7 h-7 md:h-8 md:w-8 object-cover border border-project_text_color/40 cursor-pointer" loading="lazy"><div class="${v([isColorHovered(e,i)?"opacity-100":"opacity-0","absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color"])}">`),o(p(u,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto"},null,t)),o("</div></div>")}),o("\x3c!--]--\x3e</div>")):o("\x3c!----\x3e"),o("</div></article>")}),o("\x3c!--]--\x3e</div></div>")):(o(`<div class="pb-8 md:pb-12"><div class="${v(["reversed"===e.layout?"md:flex md:flex-row-reverse":"","grid grid-cols-2 md:grid-cols-3 gap-x-4 md:gap-x-8 lg:gap-x-24 gap-y-8"])}">\x3c!--[--\x3e`),g(e.items,e=>{var s,i;o(`<article class="group cursor-pointer col-span-2 md:col-span-1"><div class="relative overflow-hidden"><img${x("src",e.currentImage||(null==(i=null==(s=e.colors)?void 0:s[0])?void 0:i.avatar_image))}${x("alt",e.alt_text||e.name)} class="hidden md:block w-full h-full object-cover border border-text_color/30 transition-transform duration-500 group-hover:scale-105" loading="lazy">`),e.colors&&e.colors.length>0?o(p(c,{colors:e.colors,onGo:o=>goToProduct(e.slug,o)},null,t)):o(`<div class="block md:hidden"><img${x("src",e.currentImage)}${x("alt",e.alt_text||e.name)} class="w-full h-auto object-cover border border-text_color/30" loading="lazy"></div>`),o(`<button type="button" class="${v([{"opacity-100":r(l)===e.slug,"opacity-0":r(l)!==e.slug},"absolute top-4 left-4 bg-text_color text-background_color tracking-wider text-xs font-light px-2 transition-opacity duration-200"])}" style="${b(r(l)===e.slug?null:{display:"none"})}"> VIEW </button></div><div class="pt-3 md:pt-4 text-left"><p class="text-xs tracking-wider font-extralight">${h(e.category)}</p><h3 class="uppercase tracking-wider text-sm font-normal truncate py-1">${h(e.name)}</h3>`),e.colors&&e.colors.length>0?(o('<div class="mt-1 flex items-center gap-2">\x3c!--[--\x3e'),g(e.colors,(s,i)=>{o(`<div class="relative"><img${x("src",s.avatar_image)}${x("alt",s.color)} class="w-7 h-7 md:h-8 md:w-8 object-cover border border-project_text_color/40 cursor-pointer" loading="lazy"><div class="${v([isColorHovered(e,i)?"opacity-100":"opacity-0","absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color"])}">`),o(p(u,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto"},null,t)),o("</div></div>")}),o("\x3c!--]--\x3e</div>")):o("\x3c!----\x3e"),o("</div></article>")}),o(`\x3c!--]--\x3e<div class="col-span-2 md:col-span-2 flex flex-col justify-center section-trigger-line"><h4 class="section-heading uppercase tracking-wider text-xs md:text-sm mb-3 px-4">${h(e.heading)}</h4><div class="flex flex-col">\x3c!--[--\x3e`),g(function(e=""){return e.split(new RegExp("(?<=[.!?])\\s+|\\n+")).filter(Boolean)}(e.text),(e,t)=>{o(`<span class="section-text-line px-4 py-1 md:py-2 my-1 md:my-3 text-sm md:text-base leading-relaxed tracking-wide text-text_color">${h(e)}</span>`)}),o("\x3c!--]--\x3e</div></div></div></div>")),s<r(y).length-1&&function(e){return"hero"!==y.value[e].layout}(s)?o('<div class="flex justify-center py-4 md:py-6"><div class="w-64 h-px bg-text_color/30"></div></div>'):o("\x3c!----\x3e"),o("</div>")}),o("\x3c!--]--\x3e</div></section>")}}}),A=q.setup;q.setup=(e,o)=>{const t=u();return(t.modules||(t.modules=new Set)).add("components/CollectionShopListing.vue"),A?A(e,o):void 0};const M=o({__name:"[...slug]",__ssrInlineRender:!0,async setup(o){let d,n;const c=C(),u=P();S();const g=["all","woman","man","kids"],x=t(()=>String(u.params.slug)),h=s(u.query.type&&g.includes(String(u.query.type))?String(u.query.type):"all"),b=t(()=>"man"===h.value?"male":"woman"===h.value?"female":"kids"===h.value?"kids":"all");function typeBtnClass(e){return`pr-8 py-1 text-sm text-text_color cursor-pointer hover:opacity-70 transition-opacity duration-200 ${h.value===e?"font-bold":"bg-background_color"}`}i(()=>u.query.type,e=>{const o=e&&g.includes(String(e))?String(e):"all";h.value!==o&&(h.value=o)},{immediate:!0});const{data:f,pending:y}=([d,n]=l(async()=>w(`collection:${x.value}`,async()=>await $fetch(`${c.public.apiBase}/public/collections/${x.value}/`))),d=await d,n(),d),{data:_,pending:k}=([d,n]=l(async()=>w(`products-all:${x.value}:${b.value}`,async()=>{const e=`${c.public.apiBase}/public/products-all/`,o=new URLSearchParams({page:"1",page_size:String(10),collection:x.value});"all"!==b.value&&o.append("gender",b.value);let t=`${e}?${o.toString()}`;const s=[],i=await $fetch(t);return Array.isArray(null==i?void 0:i.results)&&s.push(...i.results),s},{watch:[x,b]})),d=await d,n(),d),j=y.value,$=k.value;console.log(y.value,k.value);const I=t(()=>f.value||{}),z=t(()=>_.value||[]);function onCtaClick(){}return(o,t,s,i)=>{const l=e,d=L,n=q;t(`<section${m(a({class:"collection-page"},i))} data-v-36b59ec3><div class="w-full z-50" data-v-36b59ec3>`),t(p(l,{dark:!1},null,s)),t(`</div><div class="relative z-10" data-v-36b59ec3><div class="flex flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 pt-4 gap-6" data-v-36b59ec3><div class="flex justify-start w-full" data-v-36b59ec3><div class="flex items-center gap-1" data-v-36b59ec3><button type="button" class="${v(typeBtnClass("all"))}" data-v-36b59ec3> ALL </button><button type="button" class="${v(typeBtnClass("woman"))}" data-v-36b59ec3> WOMAN </button><button type="button" class="${v(typeBtnClass("man"))}" data-v-36b59ec3> MAN </button><button type="button" class="${v(typeBtnClass("kids"))}" data-v-36b59ec3> KIDS </button></div></div></div>`),r(j)&&r($)?t(p(d,{animate:!0},null,s)):t(p(n,{products:r(z),collection:r(I),onCtaClick:onCtaClick},null,s)),t("</div></section>")}}}),R=M.setup;M.setup=(e,o)=>{const t=u();return(t.modules||(t.modules=new Set)).add("pages/collections/[...slug].vue"),R?R(e,o):void 0};const T=$(M,[["__scopeId","data-v-36b59ec3"]]);export{T as default};
//# sourceMappingURL=_...slug_-CofZYIvS.mjs.map
