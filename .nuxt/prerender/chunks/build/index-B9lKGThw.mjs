import{_ as e}from"./AppNavigation-DbbUjllq.mjs";import{_ as o}from"./index-DSJLL3Jq.mjs";import{defineComponent as t,withAsyncContext as i,ref as s,computed as r,watch as a,unref as l,mergeProps as d,nextTick as n,useSSRContext as c}from"file:///home/kai/Projekti/webshop/node_modules/vue/index.mjs";import{ssrRenderAttrs as m,ssrRenderComponent as u,ssrRenderList as p,ssrRenderClass as v,ssrInterpolate as f,ssrRenderStyle as g}from"file:///home/kai/Projekti/webshop/node_modules/vue/server-renderer/index.mjs";import h from"file:///home/kai/Projekti/webshop/node_modules/keen-slider/keen-slider.cjs.js";import{d as b,c as x,_ as j,e as k,f as _}from"./server.mjs";import{u as w}from"./useImageTransform-D7n6x7Uv.mjs";import y from"file:///home/kai/Projekti/webshop/node_modules/gsap/dist/gsap.js";import{S as P}from"../_/ScrollTrigger.mjs";import"./nuxt-link-BeJz8Y8C.mjs";import"./virtual_public-Dgbfu3-q.mjs";import"../nitro/nitro.mjs";import"file:///home/kai/Projekti/webshop/node_modules/h3/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/nodemailer/lib/nodemailer.js";import"file:///home/kai/Projekti/webshop/node_modules/destr/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/hookable/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ofetch/dist/node.mjs";import"file:///home/kai/Projekti/webshop/node_modules/node-mock-http/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/fs.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/fs-lite.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/lru-cache.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ohash/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/klona/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/defu/dist/defu.mjs";import"file:///home/kai/Projekti/webshop/node_modules/scule/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unctx/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/radix3/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@intlify/utils/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/cookie-es/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/vue-router/dist/vue-router.node.mjs";import"node:fs";import"node:url";import"file:///home/kai/Projekti/webshop/node_modules/pathe/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@iconify/utils/lib/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/consola/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ipx/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/pinia/dist/pinia.prod.cjs";import"file:///home/kai/Projekti/webshop/node_modules/@iconify/vue/dist/iconify.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@iconify/utils/lib/css/icon.mjs";import"file:///home/kai/Projekti/webshop/node_modules/nuxt/node_modules/perfect-debounce/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/vue-devtools-stub/dist/index.mjs";import"../_/renderer.mjs";import"file:///home/kai/Projekti/webshop/node_modules/vue-bundle-renderer/dist/runtime.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unhead/dist/server.mjs";import"file:///home/kai/Projekti/webshop/node_modules/devalue/index.js";import"file:///home/kai/Projekti/webshop/node_modules/unhead/dist/plugins.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unhead/dist/utils.mjs";const S=t({__name:"ShopListingskeleton",__ssrInlineRender:!0,props:{count:{default:12},animate:{type:Boolean,default:!0}},setup:e=>(o,t,i,s)=>{t(`<div${m(d({class:"grid grid-cols-2 md:grid-cols-4 overflow-y-auto pt-8 gap-x-4 md:gap-x-8 lg:gap-x-24"},s))}>\x3c!--[--\x3e`),p(e.count,o=>{t(`<article class="${v([{"animate-pulse":e.animate},"col-span-1 pb-10"])}" aria-busy="true" aria-label="Loading product"><div class="relative w-full overflow-hidden"><div class="w-full aspect-[3/4] bg-project_gray border border-project_gray" role="img" aria-label="Loading product image"></div></div><div class="py-3 text-left space-y-2"><div class="h-3 w-20 bg-project_gray rounded" role="status" aria-label="Loading category"></div><div class="h-4 w-3/4 bg-project_gray rounded" role="status" aria-label="Loading product name"></div><div class="mt-1 flex items-center gap-2" aria-label="Loading color options">\x3c!--[--\x3e`),p(3,e=>{t('<div class="w-7 h-7 md:w-8 md:h-8 bg-project_gray border border-project_gray" role="status"></div>')}),t('\x3c!--]--\x3e</div><div class="h-3 w-16 bg-project_gray rounded" role="status" aria-label="Loading price"></div></div></article>')}),t("\x3c!--]--\x3e</div>")}}),$=S.setup;S.setup=(e,o)=>{const t=c();return(t.modules||(t.modules=new Set)).add("components/ShopListingskeleton.vue"),$?$(e,o):void 0};const z=t({__name:"ShopListing",__ssrInlineRender:!0,props:{products:{}},setup(e){const t=e;x();const i=b(),c=s(null),j=s({}),k=s({}),_=s({}),y=s({}),P=r(()=>{const e=i.query.color;return e?Array.isArray(e)?e.map(e=>normalizeColorName(String(e))):[normalizeColorName(String(e))]:[]}),{getResponsiveImages:S}=w();function normalizeColorName(e){return e.toLowerCase().trim().replace(/\s+/g," ")}function getMainImage(e){if(e.currentImage)return e.currentImage;if(!e.colors||0===e.colors.length)return"";if(P.value.length>0){const o=e.colors.find(e=>function(e){if(0===P.value.length)return!1;const o=normalizeColorName(e.color);return P.value.some(e=>o===e||!(!o.includes(e)&&!e.includes(o)))}(e));if(o)return o.avatar_image}return e.colors[0].avatar_image}function formatPrice(e){return parseFloat(e).toFixed(2)}function isColorHovered(e,o){return j.value[e.slug]===o}return a(()=>t.products,()=>{n(()=>{Object.values(_.value).forEach(e=>{e&&"function"==typeof e.destroy&&e.destroy()}),_.value={},t.products.forEach(e=>{if(!e.colors||0===e.colors.length)return;const o=k.value[e.slug];if(!o)return;_.value[e.slug]&&_.value[e.slug].destroy();const t=new h(o,{loop:!0,initial:0,slideChanged(o){y.value[e.slug]=o.track.details.rel}});_.value[e.slug]=t,y.value[e.slug]=0})})},{deep:!0}),(t,i,s,r)=>{const a=o;i(`<div${m(d({class:"grid grid-cols-2 md:grid-cols-4 overflow-y-auto pt-8 gap-x-4 md:gap-x-8 lg:gap-x-24"},r))} data-v-28eb2f71>\x3c!--[--\x3e`),p(e.products,e=>{var o;i(`<div class="col-span-1 cursor-pointer pb-10" data-v-28eb2f71><div class="bg-background_color overflow-hidden object-fill" data-v-28eb2f71><div class="w-full" data-v-28eb2f71><div class="relative bg-background_color" data-v-28eb2f71><img${m(d({ref_for:!0},(o=getMainImage(e),S(o,[300,400,600,800],"(max-width: 767px) 50vw, 25vw")),{alt:e.alt_text||e.name,class:"hidden md:block max-w-[100%] h-auto object-cover transition-opacity duration-200 border border-text_color/30",loading:"lazy"}))} data-v-28eb2f71>`),e.colors&&e.colors.length>0?(i('<div class="block md:hidden" data-v-28eb2f71><div class="keen-slider" data-v-28eb2f71>\x3c!--[--\x3e'),p(e.colors,(e,o)=>{i(`<div class="keen-slider__slide" data-v-28eb2f71><img${m(d({ref_for:!0},(e=>S(e,[300,400,600],"50vw"))(e.avatar_image),{alt:e.color,class:"w-full h-auto object-cover border border-text_color/30",loading:"lazy"}))} data-v-28eb2f71></div>`)}),i("\x3c!--]--\x3e</div></div>")):i("\x3c!----\x3e"),i(`<button type="button" class="${v([{"opacity-100":l(c)===e.slug},"absolute top-4 left-4 bg-text_color text-background_color tracking-wider text-xs font-light w-auto px-2 mx-auto opacity-0 transition-opacity duration-200"])}" style="${g(l(c)===e.slug?null:{display:"none"})}" data-v-28eb2f71> VIEW </button></div><div class="py-3 text-left" data-v-28eb2f71><p class="text-xs tracking-wider font-extralight" data-v-28eb2f71>${f(e.category)}</p><h3 class="uppercase tracking-wider text-[13px] md:text-sm font-normal truncate py-1" data-v-28eb2f71>${f(e.name)}</h3>`),e.colors&&e.colors.length>0?(i('<div class="mt-1 flex items-center gap-2" data-v-28eb2f71>\x3c!--[--\x3e'),p(e.colors,(o,t)=>{i(`<div class="relative group" data-v-28eb2f71><img${m(d({ref_for:!0},(e=>S(e,[50,100],"32px"))(o.avatar_image),{alt:o.color,class:"w-7 h-7 md:h-8 md:w-8 object-cover border border-project_black/30 cursor-pointer",loading:"lazy"}))} data-v-28eb2f71><div class="${v([isColorHovered(e,t)?"opacity-100 bg-text_color":"opacity-0 bg-text_color","absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color"])}" data-v-28eb2f71>`),i(u(a,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 bg-background_color m-auto"},null,s)),i("</div></div>")}),i("\x3c!--]--\x3e</div>")):i("\x3c!----\x3e"),(null==e?void 0:e.discount)?i(`<div class="space-x-2" data-v-28eb2f71><span class="mt-1 text-xs font-light tracking-widest text-error_text_color" data-v-28eb2f71>€${f(formatPrice(e.discount_price))}</span><span id="price" class="mt-1 text-xs font-light tracking-widest text-text_color" data-v-28eb2f71>€${f(formatPrice(e.price))}</span></div>`):i(`<p class="mt-1 text-xs font-light tracking-widest text-text_color" data-v-28eb2f71>€${f(formatPrice(e.price))}</p>`),i("</div></div></div></div>")}),i("\x3c!--]--\x3e</div>")}}}),L=z.setup;z.setup=(e,o)=>{const t=c();return(t.modules||(t.modules=new Set)).add("components/ShopListing.vue"),L?L(e,o):void 0};const I=j(z,[["__scopeId","data-v-28eb2f71"]]),C=t({__name:"index",__ssrInlineRender:!0,async setup(t){let d,n,c=null;try{c=([d,n]=i(()=>import("../_/ScrollSmoother.mjs")),d=await d,n(),d).ScrollSmoother}catch{}y.registerPlugin(P),c&&y.registerPlugin(c);const g=_(),h=b(),j=x(),w=s(!0),$=s([]),z=s(0),L=s(1),C=s(!1),q=s({gender:[],collections:[],categories:[],sizes:[],colors:[]});s({collections:[],categories:[],sizes:[],colors:[]});const E=r(()=>Math.max(1,Math.ceil(z.value/12)));function buildApiQuery(){return function(){const e=new URLSearchParams;e.set("page",String(L.value)),e.set("page_size",String(12)),q.value.collections.forEach(o=>e.append("collection",o)),q.value.categories.forEach(o=>e.append("category",String(o))),q.value.sizes.forEach(o=>e.append("size",o)),q.value.colors.forEach(o=>e.append("color",o));const o=q.value.gender[0];return o&&e.set("gender",o),e}().toString().replace(/\+/g,"%20")}return a(q,()=>{1!==L.value&&(L.value=1),function(){const e={};L.value>1&&(e.page=String(L.value)),q.value.gender.length>0&&(e.gender=q.value.gender[0]),q.value.collections.length>0&&(e.collection=q.value.collections),q.value.categories.length>0&&(e.category=q.value.categories.map(String)),q.value.sizes.length>0&&(e.size=q.value.sizes),q.value.colors.length>0&&(e.color=q.value.colors),j.replace({query:e})}()},{deep:!0}),a(()=>h.query,()=>{!async function(){try{w.value=!0;const e=await $fetch(`${g.public.apiBase}/public/products-all/?${buildApiQuery()}`);z.value=e.count,$.value=e.results}catch(e){console.error("Failed to fetch products:",e)}finally{w.value=!1}}()}),a(C,e=>{}),(t,i,s,r)=>{const a=e,d=o,n=S,c=I,g=k;i(`<section${m(r)}>`),i(u(a,{dark:!1},null,s)),i('<div id="smooth-wrapper"><div id="smooth-content"><div class="flex flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 pt-4 gap-6"><div class="flex justify-between w-full"><div class="flex gap-3 justify-start w-full"><div class="flex items-center gap-3"><button type="button" class="text-xs uppercase tracking-widest items-center flex gap-2">'),i(u(d,{name:"lucide:sliders-horizontal",class:"w-4 h-4"},null,s)),i('<span class="my-auto">Filters</span></button></div></div><div class="flex gap-3 justify-end w-full"><div class="flex items-center gap-3"><span class="uppercase text-xs tracking-widest ml-4">Page</span>\x3c!--[--\x3e'),p(l(E),e=>{i(`<button type="button" class="${v([e===l(L)?"underline":"opacity-60","text-sm uppercase tracking-widest"])}">${f(e)}</button>`)}),i("\x3c!--]--\x3e</div></div></div></div>"),l(w)?i(u(n,{class:"mt-2 md:mt-6 px-4 md:px-8",count:8},null,s)):i(u(c,{class:"mt-2 md:mt-6 px-4 md:px-8",products:l($)},null,s)),i(u(g,null,{},s)),i("</div></div></section>")}}}),q=C.setup;C.setup=(e,o)=>{const t=c();return(t.modules||(t.modules=new Set)).add("pages/shop/index.vue"),q?q(e,o):void 0};export{C as default};
//# sourceMappingURL=index-B9lKGThw.mjs.map
