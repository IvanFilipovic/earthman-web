import{_ as e}from"./AppNavigation-CUlEIsVo.mjs";import{defineComponent as o,withAsyncContext as t,ref as i,computed as s,watch as r,unref as l,mergeProps as a,nextTick as d,useSSRContext as n}from"file:///home/kai/Projekti/webshop/node_modules/vue/index.mjs";import{ssrRenderAttrs as c,ssrRenderComponent as m,ssrRenderList as u,ssrRenderClass as p,ssrInterpolate as v,ssrRenderStyle as h,ssrRenderAttr as g}from"file:///home/kai/Projekti/webshop/node_modules/vue/server-renderer/index.mjs";import{_ as f}from"./index-Ccr6sSLn.mjs";import x from"file:///home/kai/Projekti/webshop/node_modules/keen-slider/keen-slider.cjs.js";import{c as k,b as j,_ as b,d as w,e as _}from"./server.mjs";import y from"file:///home/kai/Projekti/webshop/node_modules/gsap/dist/gsap.js";import{S as P}from"../_/ScrollTrigger.mjs";import"./nuxt-link-7pp3EPK3.mjs";import"../nitro/nitro.mjs";import"file:///home/kai/Projekti/webshop/node_modules/h3/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/destr/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/hookable/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ofetch/dist/node.mjs";import"file:///home/kai/Projekti/webshop/node_modules/node-mock-http/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/fs.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/fs-lite.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/lru-cache.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ohash/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/klona/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/defu/dist/defu.mjs";import"file:///home/kai/Projekti/webshop/node_modules/scule/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unctx/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/radix3/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@intlify/utils/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/cookie-es/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/vue-router/dist/vue-router.node.mjs";import"node:fs";import"node:url";import"file:///home/kai/Projekti/webshop/node_modules/pathe/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@iconify/utils/lib/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/consola/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ipx/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@iconify/vue/dist/iconify.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@iconify/utils/lib/css/icon.mjs";import"file:///home/kai/Projekti/webshop/node_modules/nuxt/node_modules/perfect-debounce/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/pinia/dist/pinia.prod.cjs";import"file:///home/kai/Projekti/webshop/node_modules/vue-devtools-stub/dist/index.mjs";import"../_/renderer.mjs";import"file:///home/kai/Projekti/webshop/node_modules/vue-bundle-renderer/dist/runtime.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unhead/dist/server.mjs";import"file:///home/kai/Projekti/webshop/node_modules/devalue/index.js";import"file:///home/kai/Projekti/webshop/node_modules/unhead/dist/utils.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unhead/dist/plugins.mjs";const $=o({__name:"ShopListingskeleton",__ssrInlineRender:!0,props:{count:{default:12},animate:{type:Boolean,default:!0}},setup(e){const o={backgroundColor:"#c6c5c5",borderColor:"#c6c5c5"};return(t,i,s,r)=>{i(`<div${c(a({class:"grid grid-cols-2 md:grid-cols-4 overflow-y-auto pt-8 gap-x-4 md:gap-x-8 lg:gap-x-24"},r))}>\x3c!--[--\x3e`),u(e.count,e=>{i(`<div class="col-span-1 pb-10 animate-pulse"><div class="overflow-hidden"><div class="w-full border" style="${h(o)}"><div class="w-full h-[275.73] md:h-[407.35px] lg:h-[568.723px] aspect-[3/4]" style="${h(o)}"></div></div></div><div class="py-3"><div class="h-3 w-24" style="${h(o)}"></div><div class="mt-2 h-4 w-3/4" style="${h(o)}"></div><div class="mt-3 flex items-center gap-2"><div class="w-7 h-7 md:w-8 md:h-8 rounded" style="${h(o)}"></div><div class="w-7 h-7 md:w-8 md:h-8 rounded" style="${h(o)}"></div></div><div class="mt-3 h-4 w-16" style="${h(o)}"></div></div></div>`)}),i("\x3c!--]--\x3e</div>")}}}),S=$.setup;$.setup=(e,o)=>{const t=n();return(t.modules||(t.modules=new Set)).add("components/ShopListingskeleton.vue"),S?S(e,o):void 0};const z=o({__name:"ShopListing",__ssrInlineRender:!0,props:{products:{}},setup(e){const o=e;j();const t=k(),n=i(null),b=i({}),w=i({}),_=i({}),y=i({}),P=s(()=>{const e=t.query.color;return e?Array.isArray(e)?e.map(e=>normalizeColorName(String(e))):[normalizeColorName(String(e))]:[]});function normalizeColorName(e){return e.toLowerCase().trim().replace(/\s+/g," ")}function getMainImage(e){if(e.currentImage)return e.currentImage;if(!e.colors||0===e.colors.length)return"";if(P.value.length>0){const o=e.colors.find(e=>function(e){if(0===P.value.length)return!1;const o=normalizeColorName(e.color);return P.value.some(e=>o===e||!(!o.includes(e)&&!e.includes(o)))}(e));if(o)return o.avatar_image}return e.colors[0].avatar_image}function isColorHovered(e,o){return b.value[e.slug]===o}return r(()=>o.products,()=>{d(()=>{Object.values(_.value).forEach(e=>{e&&"function"==typeof e.destroy&&e.destroy()}),_.value={},o.products.forEach(e=>{if(!e.colors||0===e.colors.length)return;const o=w.value[e.slug];if(!o)return;_.value[e.slug]&&_.value[e.slug].destroy();const t=new x(o,{loop:!0,initial:0,slideChanged(o){y.value[e.slug]=o.track.details.rel}});_.value[e.slug]=t,y.value[e.slug]=0})})},{deep:!0}),(o,t,i,s)=>{const r=f;t(`<div${c(a({class:"grid grid-cols-2 md:grid-cols-4 overflow-y-auto pt-8 gap-x-4 md:gap-x-8 lg:gap-x-24"},s))} data-v-0894e9c1>\x3c!--[--\x3e`),u(e.products,e=>{var o;t(`<div class="col-span-1 cursor-pointer pb-10" data-v-0894e9c1><div class="bg-background_color overflow-hidden object-fill" data-v-0894e9c1><div class="w-full" data-v-0894e9c1><div class="relative bg-background_color" data-v-0894e9c1><img${g("src",getMainImage(e))}${g("alt",e.alt_text||e.name)} class="hidden md:block max-w-[100%] h-auto object-cover transition-opacity duration-200 border border-text_color/30" loading="lazy" data-v-0894e9c1>`),e.colors&&e.colors.length>0?(t('<div class="block md:hidden" data-v-0894e9c1><div class="keen-slider" data-v-0894e9c1>\x3c!--[--\x3e'),u(e.colors,(e,o)=>{t(`<div class="keen-slider__slide" data-v-0894e9c1><img${g("src",e.avatar_image)}${g("alt",e.color)} class="w-full h-auto object-cover border border-text_color/30" loading="lazy" data-v-0894e9c1></div>`)}),t("\x3c!--]--\x3e</div></div>")):t("\x3c!----\x3e"),t(`<button type="button" class="${p([{"opacity-100":l(n)===e.slug},"absolute top-4 left-4 bg-text_color text-background_color tracking-wider text-xs font-light w-auto px-2 mx-auto opacity-0 transition-opacity duration-200"])}" style="${h(l(n)===e.slug?null:{display:"none"})}" data-v-0894e9c1> VIEW </button></div><div class="py-3 text-left" data-v-0894e9c1><p class="text-xs tracking-wider font-extralight" data-v-0894e9c1>${v(e.category)}</p><h3 class="uppercase tracking-wider text-[13px] md:text-sm font-normal truncate py-1" data-v-0894e9c1>${v(e.name)}</h3>`),e.colors&&e.colors.length>0?(t('<div class="mt-1 flex items-center gap-2" data-v-0894e9c1>\x3c!--[--\x3e'),u(e.colors,(o,s)=>{t(`<div class="relative group" data-v-0894e9c1><img${g("src",o.avatar_image)}${g("alt",o.color)} class="w-7 h-7 md:h-8 md:w-8 object-cover border border-project_black/40 cursor-pointer" loading="lazy" data-v-0894e9c1><div class="${p([isColorHovered(e,s)?"opacity-100":"opacity-0","absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color"])}" data-v-0894e9c1>`),t(m(r,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto"},null,i)),t("</div></div>")}),t("\x3c!--]--\x3e</div>")):t("\x3c!----\x3e"),t(`<p class="mt-1 text-xs font-light" data-v-0894e9c1>â‚¬${v((o=e.price,parseFloat(o).toFixed(2)))}</p></div></div></div></div>`)}),t("\x3c!--]--\x3e</div>")}}}),C=z.setup;z.setup=(e,o)=>{const t=n();return(t.modules||(t.modules=new Set)).add("components/ShopListing.vue"),C?C(e,o):void 0};const I=b(z,[["__scopeId","data-v-0894e9c1"]]),E=o({__name:"index",__ssrInlineRender:!0,async setup(o){let a,d,n=null;try{n=([a,d]=t(()=>import("../_/ScrollSmoother.mjs")),a=await a,d(),a).ScrollSmoother}catch{}y.registerPlugin(P),n&&y.registerPlugin(n);const h=_(),g=k(),f=j(),x=i(!0),b=i([]),S=i(0),z=i(1);i(!1);const C=i({gender:[],collections:[],categories:[],sizes:[],colors:[]});i({collections:[],categories:[],sizes:[],colors:[]});const E=s(()=>Math.max(1,Math.ceil(S.value/12)));function buildApiQuery(){return function(){const e=new URLSearchParams;e.set("page",String(z.value)),e.set("page_size",String(12)),C.value.collections.forEach(o=>e.append("collection",o)),C.value.categories.forEach(o=>e.append("category",String(o))),C.value.sizes.forEach(o=>e.append("size",o)),C.value.colors.forEach(o=>e.append("color",o));const o=C.value.gender[0];return o&&e.set("gender",o),e}().toString().replace(/\+/g,"%20")}return r(C,()=>{1!==z.value&&(z.value=1),function(){const e={};z.value>1&&(e.page=String(z.value)),C.value.gender.length>0&&(e.gender=C.value.gender[0]),C.value.collections.length>0&&(e.collection=C.value.collections),C.value.categories.length>0&&(e.category=C.value.categories.map(String)),C.value.sizes.length>0&&(e.size=C.value.sizes),C.value.colors.length>0&&(e.color=C.value.colors),f.replace({query:e})}()},{deep:!0}),r(()=>g.query,()=>{!async function(){try{x.value=!0;const e=await $fetch(`${h.public.apiBase}/public/products-all/?${buildApiQuery()}`);S.value=e.count,b.value=e.results}catch(e){console.error("Failed to fetch products:",e)}finally{x.value=!1}}()}),(o,t,i,s)=>{const r=e,a=$,d=I,n=w;t(`<section${c(s)}>`),t(m(r,{dark:!1},null,i)),t('<div id="smooth-wrapper"><div id="smooth-content"><div class="flex flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 pt-4 gap-6"><div class="flex justify-between w-full"><div class="flex gap-3 justify-end w-full"><div class="flex items-center gap-3"><span class="uppercase text-xs tracking-widest ml-4">Page</span>\x3c!--[--\x3e'),u(l(E),e=>{t(`<button type="button" class="${p([e===l(z)?"underline":"opacity-60","text-sm uppercase tracking-widest"])}">${v(e)}</button>`)}),t('\x3c!--]--\x3e<button type="button" class="text-md uppercase tracking-widest"> Filters </button></div></div></div></div>'),l(x)?t(m(a,{class:"mt-2 md:mt-6 px-4 md:px-8",count:8},null,i)):t(m(d,{class:"mt-2 md:mt-6 px-4 md:px-8",products:l(b)},null,i)),t(m(n,null,{},i)),t("</div></div></section>")}}}),L=E.setup;E.setup=(e,o)=>{const t=n();return(t.modules||(t.modules=new Set)).add("pages/shop/index.vue"),L?L(e,o):void 0};export{E as default};
//# sourceMappingURL=index-yeXOApUw.mjs.map
