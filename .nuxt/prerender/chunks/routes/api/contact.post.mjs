import{defineEventHandler as e,readBody as o,createError as i}from"file:///home/kai/Projekti/webshop/node_modules/h3/dist/index.mjs";import{u as s,a as t}from"../../nitro/nitro.mjs";import"file:///home/kai/Projekti/webshop/node_modules/nodemailer/lib/nodemailer.js";import"file:///home/kai/Projekti/webshop/node_modules/destr/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/hookable/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ofetch/dist/node.mjs";import"file:///home/kai/Projekti/webshop/node_modules/node-mock-http/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/fs.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/fs-lite.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/lru-cache.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ohash/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/klona/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/defu/dist/defu.mjs";import"file:///home/kai/Projekti/webshop/node_modules/scule/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unctx/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/radix3/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@intlify/utils/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/cookie-es/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/vue-router/dist/vue-router.node.mjs";import"node:fs";import"node:url";import"file:///home/kai/Projekti/webshop/node_modules/pathe/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@iconify/utils/lib/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/consola/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ipx/dist/index.mjs";const m=e(async e=>{const{sendMail:m}=s(),r=t();console.log("ğŸ” Runtime Config:",{contactEmailRecipient:r.contactEmailRecipient,hasRecipient:!!r.contactEmailRecipient});const d=await o(e),{name:n,email:l,subject:a,message:p}=d;if(!(n&&l&&a&&p))throw i({statusCode:400,statusMessage:"All fields are required"});const h=r.contactEmailRecipient;if(console.log("ğŸ“§ Recipient email:",h),!h)throw console.error("âŒ CRITICAL: No recipient email configured!"),i({statusCode:500,statusMessage:"Server configuration error: No recipient email"});try{return console.log("ğŸ“¨ Attempting to send to:",h),await m({from:'"Earthman Contact" <noreply@earthman.com>',to:h,replyTo:l,subject:`[Earthman Contact] ${a}`,text:`From: ${n}\nEmail: ${l}\n\n${p}`}),console.log("âœ… Email sent successfully"),{success:!0}}catch(e){throw console.error("âŒ Contact form error:",e.message),i({statusCode:500,statusMessage:e.message})}});export{m as default};
//# sourceMappingURL=contact.post.mjs.map
