import{a as e}from"../../../../nitro/nitro.mjs";import{defineEventHandler as o,getCookie as i,readBody as s,createError as t}from"file:///home/kai/Projekti/webshop/node_modules/h3/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/nodemailer/lib/nodemailer.js";import"file:///home/kai/Projekti/webshop/node_modules/destr/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/hookable/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ofetch/dist/node.mjs";import"file:///home/kai/Projekti/webshop/node_modules/node-mock-http/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/fs.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/fs-lite.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unstorage/drivers/lru-cache.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ohash/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/klona/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/defu/dist/defu.mjs";import"file:///home/kai/Projekti/webshop/node_modules/scule/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/unctx/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/radix3/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@intlify/utils/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/cookie-es/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/vue-router/dist/vue-router.node.mjs";import"node:fs";import"node:url";import"file:///home/kai/Projekti/webshop/node_modules/pathe/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/@iconify/utils/lib/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/consola/dist/index.mjs";import"file:///home/kai/Projekti/webshop/node_modules/ipx/dist/index.mjs";const d=o(async o=>{const{apiBase:d,cartSessionCookie:m}=e().public,r=m||"cart_session_id";let n=i(o,r)||"none";const l=`${r}=${encodeURIComponent(n)}`,a=await s(o);if(!(null==a?void 0:a.product_slug))throw t({statusCode:400,statusMessage:"Missing product_slug"});if(!(null==a?void 0:a.quantity)||a.quantity<1)throw t({statusCode:400,statusMessage:"Quantity must be 1 or more"});try{return await $fetch(`${d}/public/cart/item/`,{method:"PUT",headers:{"Content-Type":"application/json",cookie:l},body:{product_variant_slug:a.product_slug,quantity:a.quantity}})}catch(e){throw console.error("âŒ PUT /cart - Django error:",e),t({statusCode:(null==e?void 0:e.status)||500,statusMessage:(null==e?void 0:e.statusText)||"Add to cart failed",data:(null==e?void 0:e.data)||null})}});export{d as default};
//# sourceMappingURL=cart.put.mjs.map
