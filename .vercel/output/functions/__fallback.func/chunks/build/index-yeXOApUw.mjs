import{_ as e}from"./AppNavigation-CUlEIsVo.mjs";import{defineComponent as t,withAsyncContext as o,ref as r,computed as s,watch as a,unref as l,mergeProps as i,nextTick as c,useSSRContext as n}from"vue";import{ssrRenderAttrs as d,ssrRenderComponent as u,ssrRenderList as p,ssrRenderClass as v,ssrInterpolate as m,ssrRenderStyle as g,ssrRenderAttr as x}from"vue/server-renderer";import{_ as f}from"./index-Ccr6sSLn.mjs";import h from"keen-slider";import{c as y,b,_ as w,d as _,e as $}from"./server.mjs";import S from"gsap";import{S as k}from"../_/ScrollTrigger.mjs";import"./nuxt-link-7pp3EPK3.mjs";import"../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"@intlify/utils";import"vue-router";import"@iconify/utils";import"consola";import"node:url";import"ipx";import"@iconify/vue";import"@iconify/utils/lib/css/icon";import"pinia";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"unhead/plugins";const j=t({__name:"ShopListingskeleton",__ssrInlineRender:!0,props:{count:{default:12},animate:{type:Boolean,default:!0}},setup(e){const t={backgroundColor:"#c6c5c5",borderColor:"#c6c5c5"};return(o,r,s,a)=>{r(`<div${d(i({class:"grid grid-cols-2 md:grid-cols-4 overflow-y-auto pt-8 gap-x-4 md:gap-x-8 lg:gap-x-24"},a))}>\x3c!--[--\x3e`),p(e.count,e=>{r(`<div class="col-span-1 pb-10 animate-pulse"><div class="overflow-hidden"><div class="w-full border" style="${g(t)}"><div class="w-full h-[275.73] md:h-[407.35px] lg:h-[568.723px] aspect-[3/4]" style="${g(t)}"></div></div></div><div class="py-3"><div class="h-3 w-24" style="${g(t)}"></div><div class="mt-2 h-4 w-3/4" style="${g(t)}"></div><div class="mt-3 flex items-center gap-2"><div class="w-7 h-7 md:w-8 md:h-8 rounded" style="${g(t)}"></div><div class="w-7 h-7 md:w-8 md:h-8 rounded" style="${g(t)}"></div></div><div class="mt-3 h-4 w-16" style="${g(t)}"></div></div></div>`)}),r("\x3c!--]--\x3e</div>")}}}),z=j.setup;j.setup=(e,t)=>{const o=n();return(o.modules||(o.modules=new Set)).add("components/ShopListingskeleton.vue"),z?z(e,t):void 0};const C=t({__name:"ShopListing",__ssrInlineRender:!0,props:{products:{}},setup(e){const t=e;b();const o=y(),n=r(null),w=r({}),_=r({}),$=r({}),S=r({}),k=s(()=>{const e=o.query.color;return e?Array.isArray(e)?e.map(e=>normalizeColorName(String(e))):[normalizeColorName(String(e))]:[]});function normalizeColorName(e){return e.toLowerCase().trim().replace(/\s+/g," ")}function getMainImage(e){if(e.currentImage)return e.currentImage;if(!e.colors||0===e.colors.length)return"";if(k.value.length>0){const t=e.colors.find(e=>function(e){if(0===k.value.length)return!1;const t=normalizeColorName(e.color);return k.value.some(e=>t===e||!(!t.includes(e)&&!e.includes(t)))}(e));if(t)return t.avatar_image}return e.colors[0].avatar_image}function isColorHovered(e,t){return w.value[e.slug]===t}return a(()=>t.products,()=>{c(()=>{Object.values($.value).forEach(e=>{e&&"function"==typeof e.destroy&&e.destroy()}),$.value={},t.products.forEach(e=>{if(!e.colors||0===e.colors.length)return;const t=_.value[e.slug];if(!t)return;$.value[e.slug]&&$.value[e.slug].destroy();const o=new h(t,{loop:!0,initial:0,slideChanged(t){S.value[e.slug]=t.track.details.rel}});$.value[e.slug]=o,S.value[e.slug]=0})})},{deep:!0}),(t,o,r,s)=>{const a=f;o(`<div${d(i({class:"grid grid-cols-2 md:grid-cols-4 overflow-y-auto pt-8 gap-x-4 md:gap-x-8 lg:gap-x-24"},s))} data-v-0894e9c1>\x3c!--[--\x3e`),p(e.products,e=>{var t;o(`<div class="col-span-1 cursor-pointer pb-10" data-v-0894e9c1><div class="bg-background_color overflow-hidden object-fill" data-v-0894e9c1><div class="w-full" data-v-0894e9c1><div class="relative bg-background_color" data-v-0894e9c1><img${x("src",getMainImage(e))}${x("alt",e.alt_text||e.name)} class="hidden md:block max-w-[100%] h-auto object-cover transition-opacity duration-200 border border-text_color/30" loading="lazy" data-v-0894e9c1>`),e.colors&&e.colors.length>0?(o('<div class="block md:hidden" data-v-0894e9c1><div class="keen-slider" data-v-0894e9c1>\x3c!--[--\x3e'),p(e.colors,(e,t)=>{o(`<div class="keen-slider__slide" data-v-0894e9c1><img${x("src",e.avatar_image)}${x("alt",e.color)} class="w-full h-auto object-cover border border-text_color/30" loading="lazy" data-v-0894e9c1></div>`)}),o("\x3c!--]--\x3e</div></div>")):o("\x3c!----\x3e"),o(`<button type="button" class="${v([{"opacity-100":l(n)===e.slug},"absolute top-4 left-4 bg-text_color text-background_color tracking-wider text-xs font-light w-auto px-2 mx-auto opacity-0 transition-opacity duration-200"])}" style="${g(l(n)===e.slug?null:{display:"none"})}" data-v-0894e9c1> VIEW </button></div><div class="py-3 text-left" data-v-0894e9c1><p class="text-xs tracking-wider font-extralight" data-v-0894e9c1>${m(e.category)}</p><h3 class="uppercase tracking-wider text-[13px] md:text-sm font-normal truncate py-1" data-v-0894e9c1>${m(e.name)}</h3>`),e.colors&&e.colors.length>0?(o('<div class="mt-1 flex items-center gap-2" data-v-0894e9c1>\x3c!--[--\x3e'),p(e.colors,(t,s)=>{o(`<div class="relative group" data-v-0894e9c1><img${x("src",t.avatar_image)}${x("alt",t.color)} class="w-7 h-7 md:h-8 md:w-8 object-cover border border-project_black/40 cursor-pointer" loading="lazy" data-v-0894e9c1><div class="${v([isColorHovered(e,s)?"opacity-100":"opacity-0","absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color"])}" data-v-0894e9c1>`),o(u(a,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto"},null,r)),o("</div></div>")}),o("\x3c!--]--\x3e</div>")):o("\x3c!----\x3e"),o(`<p class="mt-1 text-xs font-light" data-v-0894e9c1>â‚¬${m((t=e.price,parseFloat(t).toFixed(2)))}</p></div></div></div></div>`)}),o("\x3c!--]--\x3e</div>")}}}),I=C.setup;C.setup=(e,t)=>{const o=n();return(o.modules||(o.modules=new Set)).add("components/ShopListing.vue"),I?I(e,t):void 0};const E=w(C,[["__scopeId","data-v-0894e9c1"]]),L=t({__name:"index",__ssrInlineRender:!0,async setup(t){let i,c,n=null;try{n=([i,c]=o(()=>import("../_/ScrollSmoother.mjs")),i=await i,c(),i).ScrollSmoother}catch{}S.registerPlugin(k),n&&S.registerPlugin(n);const g=$(),x=y(),f=b(),h=r(!0),w=r([]),z=r(0),C=r(1);r(!1);const I=r({gender:[],collections:[],categories:[],sizes:[],colors:[]});r({collections:[],categories:[],sizes:[],colors:[]});const L=s(()=>Math.max(1,Math.ceil(z.value/12)));function buildApiQuery(){return function(){const e=new URLSearchParams;e.set("page",String(C.value)),e.set("page_size",String(12)),I.value.collections.forEach(t=>e.append("collection",t)),I.value.categories.forEach(t=>e.append("category",String(t))),I.value.sizes.forEach(t=>e.append("size",t)),I.value.colors.forEach(t=>e.append("color",t));const t=I.value.gender[0];return t&&e.set("gender",t),e}().toString().replace(/\+/g,"%20")}return a(I,()=>{1!==C.value&&(C.value=1),function(){const e={};C.value>1&&(e.page=String(C.value)),I.value.gender.length>0&&(e.gender=I.value.gender[0]),I.value.collections.length>0&&(e.collection=I.value.collections),I.value.categories.length>0&&(e.category=I.value.categories.map(String)),I.value.sizes.length>0&&(e.size=I.value.sizes),I.value.colors.length>0&&(e.color=I.value.colors),f.replace({query:e})}()},{deep:!0}),a(()=>x.query,()=>{!async function(){try{h.value=!0;const e=await $fetch(`${g.public.apiBase}/public/products-all/?${buildApiQuery()}`);z.value=e.count,w.value=e.results}catch(e){console.error("Failed to fetch products:",e)}finally{h.value=!1}}()}),(t,o,r,s)=>{const a=e,i=j,c=E,n=_;o(`<section${d(s)}>`),o(u(a,{dark:!1},null,r)),o('<div id="smooth-wrapper"><div id="smooth-content"><div class="flex flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 pt-4 gap-6"><div class="flex justify-between w-full"><div class="flex gap-3 justify-end w-full"><div class="flex items-center gap-3"><span class="uppercase text-xs tracking-widest ml-4">Page</span>\x3c!--[--\x3e'),p(l(L),e=>{o(`<button type="button" class="${v([e===l(C)?"underline":"opacity-60","text-sm uppercase tracking-widest"])}">${m(e)}</button>`)}),o('\x3c!--]--\x3e<button type="button" class="text-md uppercase tracking-widest"> Filters </button></div></div></div></div>'),l(h)?o(u(i,{class:"mt-2 md:mt-6 px-4 md:px-8",count:8},null,r)):o(u(c,{class:"mt-2 md:mt-6 px-4 md:px-8",products:l(w)},null,r)),o(u(n,null,{},r)),o("</div></div></section>")}}}),A=L.setup;L.setup=(e,t)=>{const o=n();return(o.modules||(o.modules=new Set)).add("pages/shop/index.vue"),A?A(e,t):void 0};export{L as default};
//# sourceMappingURL=index-yeXOApUw.mjs.map
