import{d as t,u as o,a as e,r as i,c as r}from"../../nitro/nitro.mjs";import"nodemailer";import"crypto";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"@intlify/utils";import"vue-router";import"@iconify/utils";import"consola";import"node:url";import"ipx";const s=t(async t=>{const{sendMail:s}=o(),n=e();console.log("ğŸ” Runtime Config:",{contactEmailRecipient:n.contactEmailRecipient,hasRecipient:!!n.contactEmailRecipient});const a=await i(t),{name:c,email:m,subject:l,message:p}=a;if(!(c&&m&&l&&p))throw r({statusCode:400,statusMessage:"All fields are required"});const u=n.contactEmailRecipient;if(console.log("ğŸ“§ Recipient email:",u),!u)throw console.error("âŒ CRITICAL: No recipient email configured!"),r({statusCode:500,statusMessage:"Server configuration error: No recipient email"});try{return console.log("ğŸ“¨ Attempting to send to:",u),await s({from:'"Earthman Contact" <noreply@earthman.com>',to:u,replyTo:m,subject:`[Earthman Contact] ${l}`,text:`From: ${c}\nEmail: ${m}\n\n${p}`}),console.log("âœ… Email sent successfully"),{success:!0}}catch(t){throw console.error("âŒ Contact form error:",t.message),r({statusCode:500,statusMessage:t.message})}});export{s as default};
//# sourceMappingURL=contact.post.mjs.map
