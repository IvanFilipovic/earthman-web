import{d as t,u as o,g as s,a as e,r,c as i}from"../../../../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"@intlify/utils";import"vue-router";import"@iconify/utils";import"consola";import"node:url";import"ipx";const a=t(async t=>{const{apiBase:a,cartSessionCookie:n}=o().public,c=n||"cart_session_id";let l=s(t,c)||"none";const u=`${c}=${encodeURIComponent(l)}`;let p=e(t).product_slug;if(!p)try{const o=await r(t);p=null==o?void 0:o.product_slug}catch(t){}if(!p)throw i({statusCode:400,statusMessage:"Missing product_slug"});console.log("üîç DELETE /cart - Got product_slug from Nuxt:",p);try{console.log("üöÄ Sending to Django with product_variant_slug:",p);const t=await $fetch(`${a}/public/cart/item/delete/`,{method:"DELETE",headers:{"Content-Type":"application/json",cookie:u},body:{product_variant_slug:p}});return console.log("‚úÖ DELETE /cart - Success"),t}catch(t){throw console.error("‚ùå DELETE /cart - Django error:",t),i({statusCode:(null==t?void 0:t.status)||500,statusMessage:(null==t?void 0:t.statusText)||"Delete failed",data:(null==t?void 0:t.data)||null})}});export{a as default};
//# sourceMappingURL=cart.delete.mjs.map
