import{d as t,a as o,f as e,h as r,r as s,c as i}from"../../../../nitro/nitro.mjs";import"nodemailer";import"crypto";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"@intlify/utils";import"vue-router";import"@iconify/utils";import"consola";import"node:url";import"ipx";const a=t(async t=>{const{apiBase:a,cartSessionCookie:n}=o().public,p=n||"cart_session_id";let d=e(t,p)||"none";const l=`${p}=${encodeURIComponent(d)}`;let c=r(t).product_slug;if(!c)try{const o=await s(t);c=null==o?void 0:o.product_slug}catch(t){}if(!c)throw i({statusCode:400,statusMessage:"Missing product_slug"});try{return await $fetch(`${a}/public/cart/item/delete/`,{method:"DELETE",headers:{"Content-Type":"application/json",cookie:l},body:{product_variant_slug:c}})}catch(t){throw console.error("‚ùå DELETE /cart - Django error:",t),i({statusCode:(null==t?void 0:t.status)||500,statusMessage:(null==t?void 0:t.statusText)||"Delete failed",data:(null==t?void 0:t.data)||null})}});export{a as default};
//# sourceMappingURL=cart.delete.mjs.map
