import{d as t,u as o,g as s,r as i,c as r}from"../../../../nitro/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"@intlify/utils";import"vue-router";import"@iconify/utils";import"consola";import"node:url";import"ipx";const a=t(async t=>{const{apiBase:a,cartSessionCookie:e}=o().public,n=e||"cart_session_id";let u=s(t,n)||"none";const c=`${n}=${encodeURIComponent(u)}`,d=await i(t);if(!(null==d?void 0:d.product_slug))throw r({statusCode:400,statusMessage:"Missing product_slug"});if(!(null==d?void 0:d.quantity)||d.quantity<1)throw r({statusCode:400,statusMessage:"Quantity must be 1 or more"});console.log("ðŸ” PUT /cart - Got from Nuxt:",{product_slug:d.product_slug,quantity:d.quantity});try{const t=await $fetch(`${a}/public/cart/item/`,{method:"PUT",headers:{"Content-Type":"application/json",cookie:c},body:{product_variant_slug:d.product_slug,quantity:d.quantity}});return console.log("âœ… PUT /cart - Success"),t}catch(t){throw console.error("âŒ PUT /cart - Django error:",t),r({statusCode:(null==t?void 0:t.status)||500,statusMessage:(null==t?void 0:t.statusText)||"Add to cart failed",data:(null==t?void 0:t.data)||null})}});export{a as default};
//# sourceMappingURL=cart.put.mjs.map
