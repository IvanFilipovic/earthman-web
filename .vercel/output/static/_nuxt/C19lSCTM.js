import{a as ke,_ as we,u as Pe}from"./CiYSQXAz.js";import{_ as $e}from"./wm0FsEjJ.js";import{C as Z,k as E,D as se,M as ve,b as O,p as ae,y as H,L as X,G as fe,i as re,W as Se,Y as f,J as u,X as y,a3 as e,N as m,V as A,T,F as b,a7 as R,a4 as v,a8 as M,r as Ve,a6 as ce,a5 as pe,a9 as Ce,aa as Fe}from"./Cvp-EZ-T.js";import{p as _e,_ as Ne,h as Ie,n as Ee}from"#entry";import{F as D,E as Te,a as Re}from"./oxWtd1ho.js";import De from"./C1jAaNN0.js";import{i as J,a as ne,o as p,n as ye,A as ie,f as te,u as le,b as Y,P as Q,N as L,l as Ae,c as ee,d as me,E as de,t as Oe,e as W,q as Be,g as je,j as Ue,w as qe,k as Ge,m as Le,p as z,T as oe}from"./DHhpbDuF.js";import{s as ze}from"./CY0L1E1V.js";var He=(r=>(r[r.Open=0]="Open",r[r.Closed=1]="Closed",r))(He||{});let be=Symbol("PopoverContext");function ue(r){let $=re(be,null);if($===null){let h=new Error(`<${r} /> is missing a parent <${he.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(h,ue),h}return $}let Ke=Symbol("PopoverGroupContext");function xe(){return re(Ke,null)}let ge=Symbol("PopoverPanelContext");function Ye(){return re(ge,null)}let he=Z({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(r,{slots:$,attrs:h,expose:S}){var C;let V=O(null);S({el:V,$el:V});let d=O(1),n=O(null),B=O(null),k=O(null),i=O(null),t=E(()=>ne(V)),l=E(()=>{var o,s;if(!p(n)||!p(i))return!1;for(let K of document.querySelectorAll("body > *"))if(Number(K?.contains(p(n)))^Number(K?.contains(p(i))))return!0;let c=de(),w=c.indexOf(p(n)),j=(w+c.length-1)%c.length,U=(w+1)%c.length,P=c[j],N=c[U];return!((o=p(i))!=null&&o.contains(P))&&!((s=p(i))!=null&&s.contains(N))}),a={popoverState:d,buttonId:O(null),panelId:O(null),panel:i,button:n,isPortalled:l,beforePanelSentinel:B,afterPanelSentinel:k,togglePopover(){d.value=W(d.value,{0:1,1:0})},closePopover(){d.value!==1&&(d.value=1)},close(o){a.closePopover();let s=o?o instanceof HTMLElement?o:o.value instanceof HTMLElement?p(o):p(a.button):p(a.button);s?.focus()}};fe(be,a),Oe(E(()=>W(d.value,{0:ee.Open,1:ee.Closed})));let F={buttonId:a.buttonId,panelId:a.panelId,close(){a.closePopover()}},I=xe(),q=I?.registerPopover,[G,x]=Be(),g=je({mainTreeNodeRef:I?.mainTreeNodeRef,portals:G,defaultContainers:[n,i]});function _(){var o,s,c,w;return(w=I?.isFocusWithinPopoverGroup())!=null?w:((o=t.value)==null?void 0:o.activeElement)&&(((s=p(n))==null?void 0:s.contains(t.value.activeElement))||((c=p(i))==null?void 0:c.contains(t.value.activeElement)))}return ae(()=>q?.(F)),Ue((C=t.value)==null?void 0:C.defaultView,"focus",o=>{var s,c;o.target!==window&&o.target instanceof HTMLElement&&d.value===0&&(_()||n&&i&&(g.contains(o.target)||(s=p(a.beforePanelSentinel))!=null&&s.contains(o.target)||(c=p(a.afterPanelSentinel))!=null&&c.contains(o.target)||a.closePopover()))},!0),qe(g.resolveContainers,(o,s)=>{var c;a.closePopover(),Ge(s,Le.Loose)||(o.preventDefault(),(c=p(n))==null||c.focus())},E(()=>d.value===0)),()=>{let o={open:d.value===0,close:a.close};return H(X,[H(x,{},()=>ie({theirProps:{...r,...h},ourProps:{ref:V},slot:o,slots:$,attrs:h,name:"Popover"})),H(g.MainTreeNode)])}}}),Qe=Z({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(r,{attrs:$,slots:h,expose:S}){var C;let V=(C=r.id)!=null?C:`headlessui-popover-button-${J()}`,d=ue("PopoverButton"),n=E(()=>ne(d.button));S({el:d.button,$el:d.button}),se(()=>{d.buttonId.value=V}),ve(()=>{d.buttonId.value=null});let B=xe(),k=B?.closeOthers,i=Ye(),t=E(()=>i===null?!1:i.value===d.panelId.value),l=O(null),a=`headlessui-focus-sentinel-${J()}`;t.value||ae(()=>{d.button.value=p(l)});let F=ze(E(()=>({as:r.as,type:$.type})),l);function I(o){var s,c,w,j,U;if(t.value){if(d.popoverState.value===1)return;switch(o.key){case Y.Space:case Y.Enter:o.preventDefault(),(c=(s=o.target).click)==null||c.call(s),d.closePopover(),(w=p(d.button))==null||w.focus();break}}else switch(o.key){case Y.Space:case Y.Enter:o.preventDefault(),o.stopPropagation(),d.popoverState.value===1&&k?.(d.buttonId.value),d.togglePopover();break;case Y.Escape:if(d.popoverState.value!==0)return k?.(d.buttonId.value);if(!p(d.button)||(j=n.value)!=null&&j.activeElement&&!((U=p(d.button))!=null&&U.contains(n.value.activeElement)))return;o.preventDefault(),o.stopPropagation(),d.closePopover();break}}function q(o){t.value||o.key===Y.Space&&o.preventDefault()}function G(o){var s,c;r.disabled||(t.value?(d.closePopover(),(s=p(d.button))==null||s.focus()):(o.preventDefault(),o.stopPropagation(),d.popoverState.value===1&&k?.(d.buttonId.value),d.togglePopover(),(c=p(d.button))==null||c.focus()))}function x(o){o.preventDefault(),o.stopPropagation()}let g=ye();function _(){let o=p(d.panel);if(!o)return;function s(){W(g.value,{[z.Forwards]:()=>Q(o,L.First),[z.Backwards]:()=>Q(o,L.Last)})===oe.Error&&Q(de().filter(c=>c.dataset.headlessuiFocusGuard!=="true"),W(g.value,{[z.Forwards]:L.Next,[z.Backwards]:L.Previous}),{relativeTo:p(d.button)})}s()}return()=>{let o=d.popoverState.value===0,s={open:o},{...c}=r,w=t.value?{ref:l,type:F.value,onKeydown:I,onClick:G}:{ref:l,id:V,type:F.value,"aria-expanded":d.popoverState.value===0,"aria-controls":p(d.panel)?d.panelId.value:void 0,disabled:r.disabled?!0:void 0,onKeydown:I,onKeyup:q,onClick:G,onMousedown:x};return H(X,[ie({ourProps:w,theirProps:{...$,...c},slot:s,attrs:$,slots:h,name:"PopoverButton"}),o&&!t.value&&d.isPortalled.value&&H(te,{id:a,features:le.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:_})])}}}),We=Z({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(r,{attrs:$,slots:h,expose:S}){var C;let V=(C=r.id)!=null?C:`headlessui-popover-panel-${J()}`,{focus:d}=r,n=ue("PopoverPanel"),B=E(()=>ne(n.panel)),k=`headlessui-focus-sentinel-before-${J()}`,i=`headlessui-focus-sentinel-after-${J()}`;S({el:n.panel,$el:n.panel}),se(()=>{n.panelId.value=V}),ve(()=>{n.panelId.value=null}),fe(ge,n.panelId),ae(()=>{var x,g;if(!d||n.popoverState.value!==0||!n.panel)return;let _=(x=B.value)==null?void 0:x.activeElement;(g=p(n.panel))!=null&&g.contains(_)||Q(p(n.panel),L.First)});let t=Ae(),l=E(()=>t!==null?(t.value&ee.Open)===ee.Open:n.popoverState.value===0);function a(x){var g,_;switch(x.key){case Y.Escape:if(n.popoverState.value!==0||!p(n.panel)||B.value&&!((g=p(n.panel))!=null&&g.contains(B.value.activeElement)))return;x.preventDefault(),x.stopPropagation(),n.closePopover(),(_=p(n.button))==null||_.focus();break}}function F(x){var g,_,o,s,c;let w=x.relatedTarget;w&&p(n.panel)&&((g=p(n.panel))!=null&&g.contains(w)||(n.closePopover(),((o=(_=p(n.beforePanelSentinel))==null?void 0:_.contains)!=null&&o.call(_,w)||(c=(s=p(n.afterPanelSentinel))==null?void 0:s.contains)!=null&&c.call(s,w))&&w.focus({preventScroll:!0})))}let I=ye();function q(){let x=p(n.panel);if(!x)return;function g(){W(I.value,{[z.Forwards]:()=>{var _;Q(x,L.First)===oe.Error&&((_=p(n.afterPanelSentinel))==null||_.focus())},[z.Backwards]:()=>{var _;(_=p(n.button))==null||_.focus({preventScroll:!0})}})}g()}function G(){let x=p(n.panel);if(!x)return;function g(){W(I.value,{[z.Forwards]:()=>{let _=p(n.button),o=p(n.panel);if(!_)return;let s=de(),c=s.indexOf(_),w=s.slice(0,c+1),j=[...s.slice(c+1),...w];for(let U of j.slice())if(U.dataset.headlessuiFocusGuard==="true"||o!=null&&o.contains(U)){let P=j.indexOf(U);P!==-1&&j.splice(P,1)}Q(j,L.First,{sorted:!1})},[z.Backwards]:()=>{var _;Q(x,L.Previous)===oe.Error&&((_=p(n.button))==null||_.focus())}})}g()}return()=>{let x={open:n.popoverState.value===0,close:n.close},{focus:g,..._}=r,o={ref:n.panel,id:V,onKeydown:a,onFocusout:d&&n.popoverState.value===0?F:void 0,tabIndex:-1};return ie({ourProps:o,theirProps:{...$,..._},attrs:$,slot:x,slots:{...h,default:(...s)=>{var c;return[H(X,[l.value&&n.isPortalled.value&&H(te,{id:k,ref:n.beforePanelSentinel,features:le.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:q}),(c=h.default)==null?void 0:c.call(h,...s),l.value&&n.isPortalled.value&&H(te,{id:i,ref:n.afterPanelSentinel,features:le.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:G})])]}},features:me.RenderStrategy|me.Static,visible:l.value,name:"PopoverPanel"})}}});const Je=_e("/logo/stripe.png"),Xe=_e("/logo/paypal.png"),Ze={class:"space-y-8"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},et={class:"md:col-span-2"},tt={id:"email-error",class:"mt-1 h-4 overflow-hidden"},lt={key:0,class:"text-xs text-error_text_color leading-4"},ot={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},st={id:"firstName-error",class:"mt-1 h-4 overflow-hidden"},at={key:0,class:"text-xs text-error_text_color leading-4"},rt={id:"lastName-error",class:"mt-1 h-4 overflow-hidden"},nt={key:0,class:"text-xs text-error_text_color leading-4"},it={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},dt={class:"md:col-span-2"},ut={id:"address-error",class:"mt-1 h-4 overflow-hidden"},ct={key:0,class:"text-xs text-error_text_color leading-4"},pt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},mt={id:"postal_code-error",class:"mt-1 h-4 overflow-hidden"},vt={key:0,class:"text-xs text-error_text_color leading-4"},ft={id:"city-error",class:"mt-1 h-4 overflow-hidden"},_t={key:0,class:"text-xs text-error_text_color leading-4"},yt={class:"grid grid-cols-1 gap-6"},bt={id:"country-error",class:"mt-1 h-4 overflow-hidden"},xt={key:0,class:"text-xs text-error_text_color leading-4"},gt={id:"phone_number-error",class:"mt-1 h-4 overflow-hidden"},ht={key:0,class:"text-xs text-error_text_color leading-4"},kt={class:"space-y-8 mt-10"},wt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Pt={class:"md:col-span-2"},$t={id:"delivery_address-error",class:"mt-1 h-4 overflow-hidden"},St={key:0,class:"text-xs text-error_text_color leading-4"},Vt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ct={id:"delivery_postal_code-error",class:"mt-1 h-4 overflow-hidden"},Ft={key:0,class:"text-xs text-error_text_color leading-4"},Nt={id:"delivery_city-error",class:"mt-1 h-4 overflow-hidden"},It={key:0,class:"text-xs text-error_text_color leading-4"},Et={class:"space-y-6 mt-10"},Tt={class:"flex flex-col md:flex-row gap-3"},Rt={class:"flex-1 cursor-pointer"},Dt={class:"flex-1 cursor-pointer"},At={class:"space-y-4 pt-2"},Ot={class:"flex items-start gap-3 text-sm cursor-pointer"},Bt={class:"flex items-start gap-3 text-sm cursor-pointer"},jt={class:"mt-1 h-4 overflow-hidden"},Ut={key:0,class:"text-xs text-error_text_color leading-4"},qt={class:"pt-6"},Gt=["disabled"],Lt={class:"btn__text"},zt={class:"mt-3 h-5 overflow-hidden"},Ht={key:0,class:"text-sm text-error_text_color"},Kt=Z({__name:"CheckoutForm",props:{formValues:{},selectedPaymentMethod:{},submitting:{type:Boolean},errorMsg:{},isSubmitDisabled:{type:Boolean}},emits:["submit","selectPayment"],setup(r,{emit:$}){const h=$;function S(i,t){return l=>{const F=String(l??"");return!F||!F.trim()?`${i} is required`:t&&F.length>t?`${i} must be less than ${t+1} characters`:!0}}function C(i){const t=String(i??"");return!t||!t.trim()?"Email is required":/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i.test(t)?!0:"Please enter a valid email address"}function V(i){const t=String(i??"");return!t||!t.trim()?"Phone number is required":/^[+()\-.\s\d]{7,20}$/.test(t)?!0:"Please enter a valid phone number (+, digits, spaces, (), -)"}function d(i="Postal code"){return t=>{const l=String(t??"");return!l||!l.trim()?`${i} is required`:/^[A-Za-z0-9\s\-]{3,10}$/.test(l)?!0:`${i} looks invalid`}}function n(i){return i?!0:"You must accept the Privacy Policy"}function B(){h("submit")}function k(i){h("selectPayment",i)}return(i,t)=>(y(),Se(u(Re),{class:"w-full",onSubmit:B},{default:f(()=>[e("div",Ze,[t[24]||(t[24]=e("h3",{class:"text-base uppercase tracking-widest py-2 -mx-4 px-4 md:-mx-8 md:px-8 bg-text_color text-background_color"}," Billing ",-1)),e("div",Me,[e("div",et,[t[15]||(t[15]=e("label",{for:"email",class:"block text-xs uppercase tracking-widest mb-2"},"E-mail",-1)),m(u(D),{id:"email",name:"email",type:"email",rules:C,modelValue:r.formValues.email,"onUpdate:modelValue":t[0]||(t[0]=l=>r.formValues.email=l)},{default:f(({field:l,errorMessage:a})=>[e("input",A(l,{class:["input",{"border-error_text_color":a}],"aria-describedby":"email-error"}),null,16),e("div",tt,[m(T,{name:"fade-error"},{default:f(()=>[a?(y(),b("p",lt,v(a),1)):R("",!0)]),_:2},1024)])]),_:1},8,["modelValue"])])]),e("div",ot,[e("div",null,[t[16]||(t[16]=e("label",{for:"firstName",class:"block text-xs uppercase tracking-widest mb-2"},"Name",-1)),m(u(D),{id:"firstName",name:"firstName",rules:S("Name",50),modelValue:r.formValues.firstName,"onUpdate:modelValue":t[1]||(t[1]=l=>r.formValues.firstName=l)},{default:f(({field:l,errorMessage:a})=>[e("input",A(l,{type:"text",class:["input",{"border-error_text_color":a}],maxlength:"50","aria-describedby":"firstName-error"}),null,16),e("div",st,[m(T,{name:"fade-error"},{default:f(()=>[a?(y(),b("p",at,v(a),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])]),e("div",null,[t[17]||(t[17]=e("label",{for:"lastName",class:"block text-xs uppercase tracking-widest mb-2"},"Surname",-1)),m(u(D),{id:"lastName",name:"lastName",rules:S("Surname",50),modelValue:r.formValues.lastName,"onUpdate:modelValue":t[2]||(t[2]=l=>r.formValues.lastName=l)},{default:f(({field:l,errorMessage:a})=>[e("input",A(l,{type:"text",class:["input",{"border-error_text_color":a}],maxlength:"50","aria-describedby":"lastName-error"}),null,16),e("div",rt,[m(T,{name:"fade-error"},{default:f(()=>[a?(y(),b("p",nt,v(a),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])])]),e("div",it,[e("div",dt,[t[18]||(t[18]=e("label",{for:"address",class:"block text-xs uppercase tracking-widest mb-2"},"Address",-1)),m(u(D),{id:"address",name:"address",rules:S("Address",120),modelValue:r.formValues.address,"onUpdate:modelValue":t[3]||(t[3]=l=>r.formValues.address=l)},{default:f(({field:l,errorMessage:a})=>[e("input",A(l,{type:"text",class:["input",{"border-error_text_color":a}],maxlength:"120",placeholder:"Street, number","aria-describedby":"address-error"}),null,16),e("div",ut,[m(T,{name:"fade-error"},{default:f(()=>[a?(y(),b("p",ct,v(a),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])])]),e("div",pt,[e("div",null,[t[19]||(t[19]=e("label",{for:"postal_code",class:"block text-xs uppercase tracking-widest mb-2"},"Post code",-1)),m(u(D),{id:"postal_code",name:"postal_code",rules:d("Post code"),modelValue:r.formValues.postal_code,"onUpdate:modelValue":t[4]||(t[4]=l=>r.formValues.postal_code=l)},{default:f(({field:l,errorMessage:a})=>[e("input",A(l,{class:["input",{"border-error_text_color":a}],inputmode:"numeric",maxlength:"10","aria-describedby":"postal_code-error"}),null,16),e("div",mt,[m(T,{name:"fade-error"},{default:f(()=>[a?(y(),b("p",vt,v(a),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])]),e("div",null,[t[20]||(t[20]=e("label",{for:"city",class:"block text-xs uppercase tracking-widest mb-2"},"Town / City",-1)),m(u(D),{id:"city",name:"city",rules:S("City",60),modelValue:r.formValues.city,"onUpdate:modelValue":t[5]||(t[5]=l=>r.formValues.city=l)},{default:f(({field:l,errorMessage:a})=>[e("input",A(l,{type:"text",class:["input",{"border-error_text_color":a}],maxlength:"60","aria-describedby":"city-error"}),null,16),e("div",ft,[m(T,{name:"fade-error"},{default:f(()=>[a?(y(),b("p",_t,v(a),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])])]),e("div",yt,[e("div",null,[t[22]||(t[22]=e("label",{for:"country",class:"block text-xs uppercase tracking-widest mb-2"},"Country / Region",-1)),m(u(D),{id:"country",name:"country",rules:S("Country"),modelValue:r.formValues.country,"onUpdate:modelValue":t[6]||(t[6]=l=>r.formValues.country=l)},{default:f(({field:l,errorMessage:a})=>[e("select",A(l,{class:["input",{"border-error_text_color":a}],"aria-describedby":"country-error"}),[...t[21]||(t[21]=[e("option",{value:""},"Select country",-1),e("option",{value:"Croatia"},"Croatia",-1),e("option",{value:"Slovenia"},"Slovenia",-1),e("option",{value:"Austria"},"Austria",-1),e("option",{value:"Germany"},"Germany",-1),e("option",{value:"Italy"},"Italy",-1)])],16),e("div",bt,[m(T,{name:"fade-error"},{default:f(()=>[a?(y(),b("p",xt,v(a),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])]),e("div",null,[t[23]||(t[23]=e("label",{for:"phone_number",class:"block text-xs uppercase tracking-widest mb-2"},"Telephone",-1)),m(u(D),{id:"phone_number",name:"phone_number",rules:V,modelValue:r.formValues.phone_number,"onUpdate:modelValue":t[7]||(t[7]=l=>r.formValues.phone_number=l)},{default:f(({field:l,errorMessage:a})=>[e("input",A(l,{type:"tel",class:["input",{"border-error_text_color":a}],maxlength:"20","aria-describedby":"phone_number-error"}),null,16),e("div",gt,[m(T,{name:"fade-error"},{default:f(()=>[a?(y(),b("p",ht,v(a),1)):R("",!0)]),_:2},1024)])]),_:1},8,["modelValue"])])])]),e("div",kt,[t[28]||(t[28]=e("h3",{class:"text-base uppercase tracking-widest py-2 -mx-4 px-4 md:-mx-8 md:px-8 bg-text_color text-background_color"}," Delivery ",-1)),e("div",wt,[e("div",Pt,[t[25]||(t[25]=e("label",{for:"delivery_address",class:"block text-xs uppercase tracking-widest mb-2"},"Delivery Address",-1)),m(u(D),{id:"delivery_address",name:"delivery_address",rules:S("Delivery address",120),modelValue:r.formValues.delivery_address,"onUpdate:modelValue":t[8]||(t[8]=l=>r.formValues.delivery_address=l)},{default:f(({field:l,errorMessage:a})=>[e("input",A(l,{type:"text",class:["input",{"border-error_text_color":a}],maxlength:"120",placeholder:"Street, number","aria-describedby":"delivery_address-error"}),null,16),e("div",$t,[m(T,{name:"fade-error"},{default:f(()=>[a?(y(),b("p",St,v(a),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])])]),e("div",Vt,[e("div",null,[t[26]||(t[26]=e("label",{for:"delivery_postal_code",class:"block text-xs uppercase tracking-widest mb-2"},"Delivery Post code",-1)),m(u(D),{id:"delivery_postal_code",name:"delivery_postal_code",rules:d("Delivery post code"),modelValue:r.formValues.delivery_postal_code,"onUpdate:modelValue":t[9]||(t[9]=l=>r.formValues.delivery_postal_code=l)},{default:f(({field:l,errorMessage:a})=>[e("input",A(l,{class:["input",{"border-error_text_color":a}],inputmode:"numeric",maxlength:"10","aria-describedby":"delivery_postal_code-error"}),null,16),e("div",Ct,[m(T,{name:"fade-error"},{default:f(()=>[a?(y(),b("p",Ft,v(a),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])]),e("div",null,[t[27]||(t[27]=e("label",{for:"delivery_city",class:"block text-xs uppercase tracking-widest mb-2"},"Delivery City",-1)),m(u(D),{id:"delivery_city",name:"delivery_city",rules:S("Delivery city",60),modelValue:r.formValues.delivery_city,"onUpdate:modelValue":t[10]||(t[10]=l=>r.formValues.delivery_city=l)},{default:f(({field:l,errorMessage:a})=>[e("input",A(l,{type:"text",class:["input",{"border-error_text_color":a}],maxlength:"60","aria-describedby":"delivery_city-error"}),null,16),e("div",Nt,[m(T,{name:"fade-error"},{default:f(()=>[a?(y(),b("p",It,v(a),1)):R("",!0)]),_:2},1024)])]),_:1},8,["rules","modelValue"])])])]),e("div",Et,[t[33]||(t[33]=e("h3",{class:"text-base uppercase tracking-widest py-2 -mx-4 px-4 md:-mx-8 md:px-8 bg-text_color text-background_color"}," Payment ",-1)),e("div",Tt,[e("label",Rt,[e("input",{type:"radio",name:"payment",value:"card",class:"sr-only peer",onChange:t[11]||(t[11]=l=>k("card"))},null,32),e("div",{class:M(["px-4 py-3 border text-sm uppercase transition-colors flex items-center gap-2 peer-checked:border-text_color peer-checked:bg-text_color/50 peer-checked:font-medium peer-checked:text-background_color hover:border-text_color/50",r.selectedPaymentMethod==="card"?"border-text_color bg-text_color/5 font-medium":"border-text_color/30"])},[...t[29]||(t[29]=[e("img",{src:Je,alt:"Card Payment",class:"w-5 h-5 object-contain"},null,-1),e("span",null,"Card",-1)])],2)]),e("label",Dt,[e("input",{type:"radio",name:"payment",value:"paypal",class:"sr-only peer",onChange:t[12]||(t[12]=l=>k("paypal"))},null,32),e("div",{class:M(["px-4 py-3 border text-sm uppercase transition-colors flex items-center gap-2 peer-checked:border-text_color peer-checked:bg-text_color/50 peer-checked:font-medium peer-checked:text-background_color hover:border-text_color/50",r.selectedPaymentMethod==="paypal"?"border-text_color bg-text_color/5 font-medium":"border-text_color/30"])},[...t[30]||(t[30]=[e("img",{src:Xe,alt:"PayPal",class:"w-5 h-5 object-contain"},null,-1),e("span",null,"PayPal",-1)])],2)])]),e("div",At,[e("label",Ot,[m(u(D),{name:"newsletter",type:"checkbox",value:!0,"unchecked-value":!1,modelValue:r.formValues.newsletter,"onUpdate:modelValue":t[13]||(t[13]=l=>r.formValues.newsletter=l),class:"mt-0.5"},null,8,["modelValue"]),t[31]||(t[31]=e("span",null,"I want to receive personalised commercial communications by email.",-1))]),e("label",Bt,[m(u(D),{name:"privacyAccepted",type:"checkbox",value:!0,"unchecked-value":!1,rules:n,modelValue:r.formValues.privacyAccepted,"onUpdate:modelValue":t[14]||(t[14]=l=>r.formValues.privacyAccepted=l),class:"mt-0.5"},null,8,["modelValue"]),t[32]||(t[32]=e("span",null,[e("a",{href:"#",class:"underline hover:no-underline"}," I have read and understand the Privacy and Cookies Policy. ")],-1))]),e("div",jt,[m(u(Te),{name:"privacyAccepted"},{default:f(({message:l})=>[m(T,{name:"fade-error"},{default:f(()=>[l?(y(),b("p",Ut,v(l),1)):R("",!0)]),_:2},1024)]),_:1})])])]),e("div",qt,[e("button",{type:"submit",class:M(["w-full btn",r.isSubmitDisabled?"btn--disabled":"btn--primary"]),disabled:r.isSubmitDisabled},[e("span",Lt,v(r.submitting?"Placing Order…":"Place Order"),1),t[34]||(t[34]=e("span",{class:"btn__fill"},null,-1))],10,Gt),e("div",zt,[m(T,{name:"fade-error"},{default:f(()=>[r.errorMsg?(y(),b("p",Ht,v(r.errorMsg),1)):R("",!0)]),_:1})])])]),_:1}))}}),Yt=Ne(Kt,[["__scopeId","data-v-fd7f1d70"]]);function Qt(){const r=Ie("cart_session_id");return{sessionId:E(()=>r.value)}}const Wt={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 pt-4 gap-6"},Jt={class:"flex justify-start w-full"},Xt={class:"flex items-center py-1 text-xs md:text-sm text-text_color uppercase tracking-widest","aria-label":"Breadcrumb"},Zt={class:"hidden md:flex flex-col md:flex-row py-8 md:px-8 mt-6 md:gap-x-16"},Mt={class:"w-full mt-10 md:mt-0"},el={class:"space-y-5"},tl={key:0,class:"grid grid-cols-1 gap-y-4"},ll=["alt"],ol={class:"flex-1"},sl={class:"text-sm md:text-base leading-tight tracking-wider px-3"},al={class:"text-xs mt-1 tracking-wider px-3"},rl={class:"text-xs mt-1 tracking-wider px-3"},nl={class:"text-right"},il={class:"text-sm md:text-base"},dl={key:0,class:"space-x-1"},ul={class:"font-semibold"},cl={class:"line-through text-xs"},pl={key:1},ml=["disabled","onClick"],vl={key:1,class:"text-sm opacity-70"},fl={class:"space-y-2 text-sm border-t border-text_color/30 pt-4"},_l={class:"flex justify-between"},yl={class:"flex justify-between"},bl={key:0},xl={key:1},gl={class:"flex justify-between font-medium text-base pt-2"},hl={class:"md:hidden pb-10 max-w-screen-md mx-auto px-4 md:px-8 pt-4 gap-6"},kl={class:"border-t border-b border-text_color/30 bg-background_color text-text_color rounded-sm"},wl={class:"flex items-center justify-between py-4"},Pl={class:"text-sm uppercase tracking-widest"},$l={class:"text-base font-medium"},Sl={class:"pb-4 text-sm space-y-1"},Vl={class:"flex justify-between"},Cl={class:"flex justify-between"},Fl={key:0},Nl={key:1},Il={class:"uppercase tracking-widest"},El={class:"max-h-80 overflow-y-auto divide-y divide-text_color/30"},Tl=["alt"],Rl={class:"flex-1 min-w-0"},Dl={class:"text-sm leading-tight line-clamp-2"},Al={class:"mt-1 text-xs opacity-70"},Ol={class:"mt-1 text-xs opacity-70"},Bl={class:"mt-2 text-sm"},jl={key:0,class:"space-x-1"},Ul={class:"font-medium"},ql={class:"line-through text-xs"},Gl={key:1},Ll=["disabled","onClick","aria-label"],zl=200,Hl=12.99,to=Z({__name:"checkout",setup(r){const $=ke(),h=O(null),S=O(!1),C=O(""),V=O(""),{getResponsiveImages:d}=Pe();function n(o){return d(o,[500],"12vh")}function B(o){return d(o,[500],"10vh")}const k=E(()=>({items:$.items,cart_total_to_pay:$.totals.toPay})),i=Ve({email:"",firstName:"",lastName:"",address:"",postal_code:"",city:"",country:"",phone_number:"",delivery_address:"",delivery_postal_code:"",delivery_city:"",privacyAccepted:!1,newsletter:!1}),{sessionId:t}=Qt(),l=o=>Number.isInteger(o)?o.toString():o.toFixed(2),a=E(()=>$.merchandiseTotal),F=E(()=>a.value>=zl?0:Hl),I=E(()=>a.value+F.value),q=E(()=>k.value.items.length===0||S.value||!V.value?!0:!!!(i.email?.trim()&&i.firstName?.trim()&&i.lastName?.trim()&&i.address?.trim()&&i.postal_code?.trim()&&i.city?.trim()&&i.country?.trim()&&i.phone_number?.trim()&&i.delivery_address?.trim()&&i.delivery_postal_code?.trim()&&i.delivery_city?.trim()&&i.privacyAccepted));function G(o){V.value=o}function x(o){return o.product_variant_slug??o.product_slug??""}async function g(o){const s=x(o);if(!(!s||h.value)){h.value=s;try{await $.removeFromCart({...o,product_slug:o.product_slug??s})}catch(c){console.error("Failed to remove item:",c)}finally{h.value=null}}}async function _(){if(C.value="",k.value.items.length===0){C.value="Your cart is empty.";return}if(!V.value){C.value="Please select a payment method.";return}try{S.value=!0;const o={email:i.email,country:i.country,address:i.address,city:i.city,postal_code:i.postal_code,phone_number:i.phone_number,delivery_address:i.delivery_address,delivery_city:i.delivery_city,delivery_postal_code:i.delivery_postal_code,payment_method:V.value,shipping_cost:F.value,session_id:t.value},s=await $fetch("/api/orders/create",{method:"POST",body:o});if(s.payment_method==="card")await Ee({path:"/payment/card",query:{payment_id:s.payment_id,ref:s.order_reference}});else if(s.payment_method==="paypal"){const c=await $fetch("/api/payment/initialize",{method:"POST",body:{payment_id:s.payment_id}});window.location.href=`${c.approval_url}&payment_session_id=${s.payment_id}`}}catch(o){console.error("Order error:",o),C.value=o?.data?.message||"Could not create order. Please try again."}finally{S.value=!1}}return se(async()=>{await $.fetchCart()}),(o,s)=>{const c=we,w=$e,j=Yt,U=De;return y(),b("section",null,[m(c,{dark:!1}),e("div",Wt,[e("div",Jt,[e("nav",Xt,[m(w,{to:"/",class:"hover:underline pr-2"},{default:f(()=>[...s[0]||(s[0]=[pe("HOME",-1)])]),_:1}),s[2]||(s[2]=e("span",{class:"pr-2","aria-hidden":"true"},"/",-1)),m(w,{to:"/shop",class:"hover:underline pr-2"},{default:f(()=>[...s[1]||(s[1]=[pe("SHOP",-1)])]),_:1}),s[3]||(s[3]=e("span",{class:"pr-2","aria-hidden":"true"},"/",-1)),s[4]||(s[4]=e("span",{class:"pr-2","aria-current":"page"},"CHECKOUT",-1))])])]),e("div",Zt,[m(j,{"form-values":u(i),"selected-payment-method":u(V),submitting:u(S),"error-msg":u(C),"is-submit-disabled":u(q),onSubmit:_,onSelectPayment:G},null,8,["form-values","selected-payment-method","submitting","error-msg","is-submit-disabled"]),e("aside",Mt,[e("div",el,[s[9]||(s[9]=e("h2",{class:"uppercase tracking-widest text-sm"},"Order Summary",-1)),u(k).items.length?(y(),b("div",tl,[(y(!0),b(X,null,ce(u(k).items,(P,N)=>(y(),b("div",{key:N,class:"flex gap-4"},[e("img",A({ref_for:!0},n(P.avatar_image),{alt:P.product,class:"object-cover border",loading:"lazy"}),null,16,ll),e("div",ol,[e("div",sl,v(P.product),1),e("div",al,"Size: "+v(P.size),1),e("div",rl,"Quantity: "+v(P.quantity),1)]),e("div",nl,[e("div",il,[P.unit_price_discounted!==P.unit_price_original?(y(),b("span",dl,[e("span",ul,"€"+v(P.unit_price_discounted),1),e("span",cl,"€"+v(P.unit_price_original),1)])):(y(),b("span",pl,"€"+v(P.unit_price_original),1))]),e("button",{type:"button",class:"mt-3 text-xs uppercase tracking-widest border-b border-text_color/30 hover:border-text_color transition-colors disabled:opacity-50",disabled:u(h)===x(P),onClick:K=>g(P)},v(u(h)===x(P)?"Removing...":"Remove item"),9,ml)])]))),128))])):(y(),b("div",vl,"Your cart is empty.")),e("div",fl,[e("div",_l,[s[5]||(s[5]=e("span",null,"Subtotal",-1)),e("span",null,"€"+v(l(u(a))),1)]),e("div",yl,[s[6]||(s[6]=e("span",null,"Shipping",-1)),u(F)===0?(y(),b("span",bl,"€0 (Free)")):(y(),b("span",xl,"€"+v(l(u(F))),1))]),e("div",gl,[s[7]||(s[7]=e("span",null,"Total",-1)),e("span",null,"€"+v(l(u(I))),1)]),s[8]||(s[8]=e("p",{class:"text-xs opacity-70"}," Prices include VAT, excluding any import duties. ",-1))])])])]),e("div",hl,[e("div",kl,[e("div",wl,[e("div",Pl," Cart ("+v(u(k).items.length)+") ",1),e("div",$l," €"+v(l(u(I))),1)]),e("div",Sl,[e("div",Vl,[s[10]||(s[10]=e("span",null,"Subtotal",-1)),e("span",null,"€"+v(l(u(a))),1)]),e("div",Cl,[s[11]||(s[11]=e("span",null,"Shipping",-1)),u(F)===0?(y(),b("span",Fl,"€0 (Free)")):(y(),b("span",Nl,"€"+v(l(u(F))),1))])]),m(u(he),{class:"block"},{default:f(({open:P})=>[m(u(Qe),{class:"w-full flex items-center justify-between py-4 text-sm border-t border-text_color/20"},{default:f(()=>[e("span",Il," Items ("+v(u(k).items.length)+") ",1),m(U,{name:"lucide:chevron-down",class:M(["w-4 h-4 transition-transform duration-150",P?"rotate-180":""])},null,8,["class"])]),_:2},1024),m(T,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:f(()=>[Ce(m(u(We),{static:""},{default:f(()=>[e("div",El,[(y(!0),b(X,null,ce(u(k).items,(N,K)=>(y(),b("div",{key:K,class:"flex gap-3 py-3"},[e("img",A({ref_for:!0},B(N.avatar_image),{alt:N.product,class:"object-cover border",loading:"lazy"}),null,16,Tl),e("div",Rl,[e("div",Dl,v(N.product),1),e("div",Al,"Size: "+v(N.size),1),e("div",Ol,"Qty: "+v(N.quantity),1),e("div",Bl,[N.unit_price_discounted!==N.unit_price_original?(y(),b("span",jl,[e("span",Ul,"€"+v(N.unit_price_discounted),1),e("span",ql,"€"+v(N.unit_price_original),1)])):(y(),b("span",Gl,"€"+v(N.unit_price_original),1))])]),e("button",{type:"button",class:"shrink-0 p-1 hover:bg-text_color/10 rounded-sm h-7 transition-colors disabled:opacity-50",disabled:u(h)===x(N),onClick:Kl=>g(N),"aria-label":`Remove ${N.product}`,title:"Remove"},[m(U,{name:"lucide:x",class:"w-4 h-4"})],8,Ll)]))),128))])]),_:1},512),[[Fe,P]])]),_:2},1024)]),_:1})]),m(j,{"form-values":u(i),"selected-payment-method":u(V),submitting:u(S),"error-msg":u(C),"is-submit-disabled":u(q),onSubmit:_,onSelectPayment:G},null,8,["form-values","selected-payment-method","submitting","error-msg","is-submit-disabled"])])])}}});export{to as default};
