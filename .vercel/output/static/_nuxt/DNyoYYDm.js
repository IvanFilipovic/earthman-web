import L from"./DaP3Ytd5.js";import{r as m,g as N,c,o as i,F as C,h as z,a as e,i as I,v as R,n as w,t as $,j as U,b,k as G,l as M,e as D,w as j,m as A,p as Y,q as H,s as Q,x as T,y as W,z as J,A as K,B as X,_ as Z}from"#entry";import{Y as ee,G as te,_ as se}from"./D_8HQ_QA.js";import{h as oe,S as ne}from"./z-NzXbmE.js";import"./B1nRzeEK.js";const ae={class:"flex flex-wrap overflow-y-auto pt-8 md:pl-8"},le={class:"bg-background_color overflow-hidden object-fill"},re={class:"w-11/12 md:w-9/12"},ie=["onMouseenter"],ce=["onClick","src","alt"],ue=["onClick"],de={class:"py-3 text-left"},pe={class:"uppercase tracking-wider text-sm font-normal truncate"},fe={class:"mt-1 flex items-center gap-2"},ge=["onMouseenter","onMouseleave"],me=["src","alt","onClick"],xe={key:0,class:"text-[10px] md:text-xs"},ve={class:"mt-1 text-xs font-light"},_e={__name:"ShopListing",props:{products:{type:Array,default:()=>[]}},setup(x){const v=m(null),f=N(),u=m({});function _(s,t){return u.value[s.slug]===t.variant_slug}function r(s,t){s.currentImage=t.avatar_image,u.value[s.slug]=t.variant_slug}function k(s){s.currentImage=s.defaultImage||s.link_image,u.value[s.slug]=null}function h(s=[]){return Math.max(0,s.length-2)}function g(s=[]){return s.slice(0,2)}function y(s,t){!s||!t||f.push(`/product/${s}/${t}`)}return(s,t)=>{const o=L;return i(),c("div",ae,[(i(!0),c(C,null,z(x.products,l=>(i(),c("div",{key:l.slug,class:"w-1/2 md:w-1/4 cursor-pointer pb-10"},[e("div",le,[e("div",re,[e("div",{class:"relative bg-background_color",onMouseenter:d=>v.value=l.slug,onMouseleave:t[0]||(t[0]=d=>v.value=null)},[e("img",{onClick:d=>y(l.slug,l.colors?.[0]?.variant_slug),src:l.currentImage||l.link_image,alt:l.alt_text||l.name,class:"max-w-[100%] h-auto object-cover transition-opacity duration-200 border border-project_black",loading:"lazy"},null,8,ce),I(e("button",{class:w(["absolute top-4 right-2 bg-background_color text-text_color tracking-wider text-xs font-extralight w-auto px-2 mx-auto opacity-0 transition-opacity duration-200",{"opacity-100":v.value===l.slug}]),onClick:d=>y(l.slug,l.colors?.[0]?.variant_slug)}," View ",10,ue),[[R,v.value===l.slug]])],40,ie),e("div",de,[e("h3",pe,$(l.name),1),e("div",fe,[(i(!0),c(C,null,z(g(l.colors),d=>(i(),c("div",{key:d.variant_slug,class:"relative group",onMouseenter:S=>r(l,d),onMouseleave:S=>k(l)},[e("img",{src:d.avatar_image,alt:d.color,class:"h-8 w-8 object-cover",loading:"lazy",onClick:S=>y(l.slug,d.variant_slug)},null,8,me),e("div",{class:w(["absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color",_(l,d)?"opacity-100":"opacity-0"])},[b(o,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto"})],2)],40,ge))),128)),h(l.colors)>0?(i(),c("span",xe,"+"+$(h(l.colors)),1)):U("",!0)]),e("p",ve,"€"+$(parseFloat(l.price).toFixed(2)),1)])])])]))),128))])}}},ye={class:"fixed inset-y-0 right-0 flex max-w-full"},be={class:"flex items-center justify-between px-6 py-4 border-b"},we={class:"flex-1 overflow-auto px-6 py-6 space-y-8"},he={class:"flex items-center justify-between"},$e={class:"mt-3 flex flex-wrap gap-2 justify-end"},ke=["onClick"],Ce={class:"flex items-center justify-between"},ze={class:"mt-3 flex flex-wrap gap-2 justify-end"},je=["onClick"],Se={class:"flex items-center justify-between"},Ae={class:"mt-3 flex flex-col gap-2"},Ve=["value"],Me={class:"flex flex-row my-auto justify-end"},Be={class:"my-auto text-sm text-text_color px-8"},Fe=["title"],Ie={__name:"FilterPanel",props:{open:{type:Boolean,default:!1},facets:{type:Object,default:()=>({categories:[],sizes:[],colors:[]})},modelValue:{type:Object,default:()=>({categories:[],sizes:[],colors:[]})}},emits:["update:open","update:modelValue"],setup(x,{emit:v}){const f=x,u=v;function _(s={}){return{categories:Array.isArray(s.categories)?[...s.categories]:[],sizes:Array.isArray(s.sizes)?[...s.sizes]:[],colors:Array.isArray(s.colors)?[...s.colors]:[]}}const r=G(_(f.modelValue));M(()=>f.modelValue,s=>{Object.assign(r,_(s))},{deep:!0});function k(){u("update:modelValue",_(r)),u("update:open",!1)}function h(){Object.assign(r,{categories:[],sizes:[],colors:[]})}function g(s,t){const o=new Set(r[s]);o.has(t)?o.delete(t):o.add(t),r[s]=[...o]}function y(s){return["px-3 py-1 text-sm text-text-color",s?"font-bold":"bg-backgroun_color"]}return(s,t)=>(i(),D(A(ne),{show:x.open},{default:j(()=>[b(A(ee),{class:"relative z-50",onClose:t[5]||(t[5]=o=>s.$emit("update:open",!1))},{default:j(()=>[t[10]||(t[10]=e("div",{class:"fixed inset-0 bg-text_color/40","aria-hidden":"true"},null,-1)),e("div",ye,[b(A(oe),{enter:"transform transition ease-out duration-200","enter-from":"translate-x-full","enter-to":"translate-x-0",leave:"transform transition ease-in duration-150","leave-from":"translate-x-0","leave-to":"translate-x-full"},{default:j(()=>[b(A(te),{class:"w-screen max-w-md bg-background_color h-full shadow-xl flex flex-col"},{default:j(()=>[e("div",be,[t[6]||(t[6]=e("h2",{class:"uppercase tracking-wider text-sm"},"Filters",-1)),e("button",{class:"text-xl",onClick:t[0]||(t[0]=o=>s.$emit("update:open",!1))},"×")]),e("div",we,[e("section",null,[e("div",he,[t[7]||(t[7]=e("h3",{class:"uppercase text-xs tracking-widest"},"Category",-1)),e("button",{class:"text-xs underline",onClick:t[1]||(t[1]=o=>r.categories=[])},"Clear")]),e("div",$e,[(i(!0),c(C,null,z(x.facets.categories,o=>(i(),c("button",{key:o.id,onClick:l=>g("categories",o.id),class:w(y(r.categories.includes(o.id)))},$(o.name),11,ke))),128))])]),e("section",null,[e("div",Ce,[t[8]||(t[8]=e("h3",{class:"uppercase text-xs tracking-widest"},"Size",-1)),e("button",{class:"text-xs underline",onClick:t[2]||(t[2]=o=>r.sizes=[])},"clear")]),e("div",ze,[(i(!0),c(C,null,z(x.facets.sizes,o=>(i(),c("button",{key:o,onClick:l=>g("sizes",o.name),class:w(y(r.sizes.includes(o.name)))},$(o.name),11,je))),128))])]),e("section",null,[e("div",Se,[t[9]||(t[9]=e("h3",{class:"uppercase text-xs tracking-widest"},"Colour",-1)),e("button",{class:"text-xs underline",onClick:t[3]||(t[3]=o=>r.colors=[])},"clear")]),e("div",Ae,[(i(!0),c(C,null,z(x.facets.colors,o=>(i(),c("div",{key:o.name,class:"relative"},[I(e("input",{type:"checkbox",value:o.name,"onUpdate:modelValue":t[4]||(t[4]=l=>r.colors=l),class:"absolute inset-0 opacity-0 cursor-pointer"},null,8,Ve),[[Y,r.colors]]),e("div",Me,[e("p",Be,$(o.name),1),e("div",{class:w(["w-6 h-6 border cursor-pointer m-1",r.colors.includes(o.name)?"ring-2 ring-text_color":"border-gray-300"]),style:H({backgroundColor:`#${o.image}`}),title:o.name},null,14,Fe)])]))),128))])])]),e("div",{class:"px-6 py-4 border-t flex items-center justify-between"},[e("button",{class:"text-sm underline",onClick:h},"Clean filters"),e("button",{class:"border px-4 py-2 rounded",onClick:k},"View results")])]),_:1})]),_:1})])]),_:1})]),_:1},8,["show"]))}},Pe={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-8 py-6 gap-6 border-b border-text_color/30"},Oe={class:"w-full md:w-1/2 flex flex-col"},qe={class:"flex gap-3 justify-end w-full"},Ee={class:"flex items-center gap-3"},Le=["onClick"],Ne={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-8 pt-1 gap-6"},Re={class:"flex justify-end w-full"},Ue={class:"flex items-center"},V="http://127.0.0.1:8000",F=12,Ge=Q({__name:"index",setup(x){const v=T(),f=W(),u=m(f.query.gender==="male"?"male":"female");M(()=>f.query.gender,a=>{const n=a==="male"?"male":"female";u.value!==n&&(u.value=n)},{immediate:!0});function _(a){u.value!==a&&(u.value=a,v.replace({query:{...f.query,gender:a}}))}function r(a){return["pl-8 py-1 text-sm text-text_color",u.value===a?"font-bold":"bg-background_color"].join(" ")}const k=m([]),h=m(0),g=m(1),y=J(()=>Math.max(1,Math.ceil(h.value/F))),s=m(!1),t=m({categories:[],sizes:[],colors:[]}),o=m({categories:[],sizes:[],colors:[]});function l(){const a=new URLSearchParams;return t.value.categories.forEach(n=>a.append("category",n.toString())),t.value.sizes.forEach(n=>a.append("size",n)),t.value.colors.forEach(n=>a.append("color",n)),a.set("gender",u.value),a.set("page",String(g.value)),a.set("page_size",String(F)),a.toString().replace(/\+/g,"%20")}async function d(){try{const a=await $fetch(`${V}/public/categories/`);o.value.categories=Array.isArray(a)?a:[]}catch{o.value.categories=[]}}async function S(){try{const a=await $fetch(`${V}/public/sizes/`);o.value.sizes=Array.isArray(a)?a:[]}catch{o.value.sizes=[]}}async function P(){try{const a=await $fetch(`${V}/public/colors/`);o.value.colors=Array.isArray(a)?a.map(n=>({name:n.name,image:n.image})):[]}catch{o.value.colors=[]}}async function B(){const a=await $fetch(`${V}/public/products-all/?${l()}`);h.value=a.count,k.value=a.results.map(n=>({...n,defaultImage:n.link_image,currentImage:n.link_image}))}return M([t,g,u,f],B),K(async()=>{await Promise.all([d(),P(),S()]),await B()}),(a,n)=>{const O=_e,q=Ie,E=X;return i(),c("section",null,[e("div",Pe,[n[6]||(n[6]=e("div",{class:"w-full md:w-1/2"},[e("div",{class:"image bg-cover bg-center bg-transparent h-40 flex justify-center max-w-[100%]"})],-1)),e("div",Oe,[b(se,{dark:!1}),e("div",qe,[e("div",Ee,[n[5]||(n[5]=e("span",{class:"uppercase text-xs tracking-widest ml-4"},"View",-1)),(i(!0),c(C,null,z(y.value,p=>(i(),c("button",{key:p,class:w([p===g.value?"underline":"opacity-60","text-sm uppercase tracking-widest"]),onClick:De=>g.value=p},$(p),11,Le))),128)),e("button",{class:"text-md uppercase tracking-widest px-4",onClick:n[0]||(n[0]=p=>s.value=!0)},"Filters")])])])]),e("div",Ne,[e("div",Re,[e("div",Ue,[e("button",{class:w(r("female")),onClick:n[1]||(n[1]=p=>_("female"))},"WOMAN",2),e("button",{class:w(r("male")),onClick:n[2]||(n[2]=p=>_("male"))},"MAN",2)])])]),b(O,{class:"mt-6",products:k.value},null,8,["products"]),b(E,null,{default:j(()=>[b(q,{open:s.value,modelValue:t.value,"onUpdate:modelValue":n[3]||(n[3]=p=>t.value=p),facets:o.value,"onUpdate:open":n[4]||(n[4]=p=>s.value=p)},null,8,["open","modelValue","facets"])]),_:1})])}}}),Je=Z(Ge,[["__scopeId","data-v-0c81cb24"]]);export{Je as default};
