import $ from"./Bgd9iGY4.js";import{_ as L}from"./BEOIw1i4.js";import{s as E,y as M,r as k,z as R,A as j,D as z,c as C,a as b,b as t,w as o,n as a,m as e,C as P,B as U,o as S,d as r,j as V,t as q,$ as T}from"#entry";import{g as W,j as D,S as H,h as I,M as G,k as N,_ as Y}from"./oMAzNrXO.js";const F={class:"flex flex-col w-full bg-transparent z-50 my-auto"},J={class:"flex pt-4"},K={class:"flex flex-row justify-end w-full mx-auto space-x-4 py-4"},Q={class:"py-1"},X={key:0,class:"absolute -top-1 -right-1 bg-text_color text-background_color text-[12px] w-4 h-4 flex items-center justify-center"},st=E({__name:"AppNavigation",props:{dark:{type:Boolean,default:!1}},setup(O){const u=O,m=M(),d=k(!1),A=P(),_=k(0),h=n=>m.path===n||m.path.startsWith(n+"/"),i=n=>h(n)?"font-bold":"font-light",v=n=>h("/shop")&&m.query.gender===n,l=R(()=>u.dark?"text-background_color":"text-text_color");async function x(){try{const n=await $fetch(`${A.public.apiBase}/public/cart/`,{credentials:"include"});_.value=Array.isArray(n.items)?n.items.length:0}catch(n){console.warn("Cart fetch failed",n)}}const w=()=>{x()};return j(()=>{x(),window.addEventListener("cart:updated",w),window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&x()})}),z(()=>{window.removeEventListener("cart:updated",w)}),(n,s)=>{const p=$,c=L,g=U,B=Y;return S(),C("section",F,[b("div",J,[b("div",K,[t(g,null,{fallback:o(()=>[t(c,{to:"/shop",class:a([e(l),"text-sm font-light px-4 inline-flex items-center gap-1"])},{default:o(()=>[s[5]||(s[5]=r(" SHOP ",-1)),t(p,{name:"lucide:chevron-down",class:a(["w-4 h-4",e(l)])},null,8,["class"])]),_:1},8,["class"])]),default:o(()=>[t(e(W),{as:"div",class:"text-sm my-auto font-light"},{default:o(({open:f})=>[t(e(D),{class:a([e(l),i("/shop"),"text-sm px-4 inline-flex items-center"])},{default:o(()=>[s[2]||(s[2]=r(" SHOP ",-1)),t(p,{name:"lucide:chevron-down",class:a(["w-4 h-4 my-auto mx-1",e(l)])},null,8,["class"])]),_:1},8,["class"]),t(e(H),{show:f},{default:o(()=>[t(e(I),{enter:"transition-opacity ease-out duration-200","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-in duration-150","leave-from":"opacity-100","leave-to":"opacity-0"},{default:o(()=>[t(e(G),{class:a(["absolute mt-3 w-40 origin-top-left shadow-sm ring-1 ring-text_color/5 focus:outline-none z-50",u.dark?"bg-background_color text-text_color":"bg-text_color text-background_color"]),static:""},{default:o(()=>[b("div",Q,[t(e(N),null,{default:o(({active:y})=>[t(c,{to:{path:"/shop",query:{gender:"female"}},class:a(["block px-4 py-2 text-sm",[v("female")?"font-bold":"",y?u.dark?"bg-text_color/10":"bg-background_color/5":""]])},{default:o(()=>[...s[3]||(s[3]=[r(" WOMAN ",-1)])]),_:1},8,["class"])]),_:1}),t(e(N),null,{default:o(({active:y})=>[t(c,{to:{path:"/shop",query:{gender:"male"}},class:a(["block px-4 py-2 text-sm",[v("male")?"font-bold":"",y?u.dark?"bg-text_color/10":"bg-background_color/5":""]])},{default:o(()=>[...s[4]||(s[4]=[r(" MAN ",-1)])]),_:1},8,["class"])]),_:1})])]),_:1},8,["class"])]),_:1})]),_:1},8,["show"])]),_:1})]),_:1}),t(c,{to:"/collections",class:a([e(l),i("/collections"),"text-sm my-auto px-4"])},{default:o(()=>[...s[6]||(s[6]=[r("COLLECTIONS",-1)])]),_:1},8,["class"]),t(c,{to:"/about",class:a([e(l),i("/about"),"text-sm my-auto px-4"])},{default:o(()=>[...s[7]||(s[7]=[r("OUR STORY",-1)])]),_:1},8,["class"]),t(g,null,{default:o(()=>[t(c,{class:a(["relative my-auto px-4",[e(l),i("/cart")]]),onClick:s[0]||(s[0]=f=>d.value=!0)},{default:o(()=>[t(p,{name:"lucide:shopping-cart",class:a(["w-6 h-6",e(l)])},null,8,["class"]),e(_)>0?(S(),C("span",X,q(e(_)),1)):V("",!0)]),_:1},8,["class"])]),_:1}),t(c,{to:"/profile",class:a([e(l),i("/profile"),"my-auto font-light pl-4"])},{default:o(()=>[t(p,{name:"lucide:circle-user-round",class:a(["w-6 h-6",e(l)])},null,8,["class"])]),_:1},8,["class"])]),t(g,null,{default:o(()=>[t(B,{open:e(d),"onUpdate:open":s[1]||(s[1]=f=>T(d)?d.value=f:null),dark:!1},null,8,["open"])]),_:1})])])}}});export{st as _};
