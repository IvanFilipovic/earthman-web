import{c as ee,d as te,_ as ue,e as de,f as pe,g as ge}from"#entry";import{Y as fe,G as ve,V as me,_ as _e}from"./C1kAkoeJ.js";import H from"./Coo3-VcT.js";import{C as D,F as i,X as l,L as A,a6 as j,a8 as M,a3 as o,b as $,k as Q,D as oe,n as W,w as q,q as se,a7 as J,a9 as ne,aa as ye,J as d,a4 as F,N as z,r as xe,W as Y,Y as O,a5 as he,ab as be,ac as we,ad as ke,c as Ce}from"./S8-AOUyP.js";import{y as $e}from"./DpJYeJpL.js";/* empty css        */import{h as K,S as Se}from"./CyZbsNYg.js";import{g as U}from"./DKtf60Sy.js";import{S as X}from"./Duwiz9RP.js";import{u as ze}from"./CLkBgmcd.js";import"./RyNHXVQh.js";const Ae={class:"grid grid-cols-2 md:grid-cols-4 overflow-y-auto pt-8 gap-x-4 md:gap-x-8 lg:gap-x-24"},je={class:"py-3 text-left space-y-2"},Fe={class:"mt-1 flex items-center gap-2","aria-label":"Loading color options"},Pe=D({__name:"ShopListingskeleton",props:{count:{default:12},animate:{type:Boolean,default:!0}},setup(h){return(P,f)=>(l(),i("div",Ae,[(l(!0),i(A,null,j(h.count,y=>(l(),i("article",{key:y,class:M(["col-span-1 pb-10",{"animate-pulse":h.animate}]),"aria-busy":"true","aria-label":"Loading product"},[f[3]||(f[3]=o("div",{class:"relative w-full overflow-hidden"},[o("div",{class:"w-full aspect-[3/4] bg-project_gray border border-project_gray",role:"img","aria-label":"Loading product image"})],-1)),o("div",je,[f[0]||(f[0]=o("div",{class:"h-3 w-20 bg-project_gray rounded",role:"status","aria-label":"Loading category"},null,-1)),f[1]||(f[1]=o("div",{class:"h-4 w-3/4 bg-project_gray rounded",role:"status","aria-label":"Loading product name"},null,-1)),o("div",Fe,[(l(),i(A,null,j(3,v=>o("div",{key:v,class:"w-7 h-7 md:w-8 md:h-8 bg-project_gray border border-project_gray",role:"status"})),64))]),f[2]||(f[2]=o("div",{class:"h-3 w-16 bg-project_gray rounded",role:"status","aria-label":"Loading price"},null,-1))])],2))),128))]))}}),Ve={class:"grid grid-cols-2 md:grid-cols-4 overflow-y-auto pt-8 gap-x-4 md:gap-x-8 lg:gap-x-24"},Le={class:"bg-background_color overflow-hidden object-fill"},Ee={class:"w-full"},Me=["onMouseenter"],Ie=["src","alt","onClick"],Be={key:0,class:"block md:hidden"},Ne=["src","alt","onClick"],Oe=["onClick"],Re={class:"py-3 text-left"},Ge={class:"text-xs tracking-wider font-extralight"},Te={class:"uppercase tracking-wider text-[13px] md:text-sm font-normal truncate py-1"},qe={key:0,class:"mt-1 flex items-center gap-2"},De=["onMouseenter","onMouseleave"],Ue=["src","alt","onClick"],Qe={key:1,class:"space-x-2"},We={class:"mt-1 text-xs font-light tracking-widest text-error_text_color"},Ye={id:"price",class:"mt-1 text-xs font-light tracking-widest text-text_color"},He={key:2,class:"mt-1 text-xs font-light tracking-widest text-text_color"},Je=D({__name:"ShopListing",props:{products:{}},setup(h){const P=h,f=ee(),y=te(),v=$(null),S=$({}),c=$({}),b=$({}),I=$({}),V=Q(()=>{const e=y.query.color;return e?Array.isArray(e)?e.map(s=>m(String(s))):[m(String(e))]:[]});function m(e){return e.toLowerCase().trim().replace(/\s+/g," ")}function k(e){if(V.value.length===0)return!1;const s=m(e.color);return V.value.some(_=>!!(s===_||s.includes(_)||_.includes(s)))}function r(e){if(e.currentImage)return e.currentImage;if(!e.colors||e.colors.length===0)return"";if(V.value.length>0){const s=e.colors.find(_=>k(_));if(s)return s.avatar_image}return e.colors[0].avatar_image}function x(e){if(!(!e.colors||e.colors.length===0)){if(V.value.length>0){const s=e.colors.find(_=>k(_));if(s)return s.variant_slug}return e.colors[0].variant_slug}}function w(e){return parseFloat(e).toFixed(2)}function B(e,s){e&&(c.value[s]=e)}oe(()=>{W(()=>{G()})}),q(()=>P.products,()=>{W(()=>{R(),G()})},{deep:!0}),se(()=>{R()});function R(){Object.values(b.value).forEach(e=>{e&&typeof e.destroy=="function"&&e.destroy()}),b.value={}}function G(){P.products.forEach(e=>{if(!e.colors||e.colors.length===0)return;const s=c.value[e.slug];if(!s)return;b.value[e.slug]&&b.value[e.slug].destroy();const _=new $e(s,{loop:!0,initial:0,slideChanged(n){I.value[e.slug]=n.track.details.rel}});b.value[e.slug]=_,I.value[e.slug]=0})}function T(e,s){return S.value[e.slug]===s}function a(e,s,_){v.value=e.slug,e.currentImage=s.avatar_image,S.value[e.slug]=_}function u(e){e.currentImage=void 0,S.value[e.slug]=null,v.value=null}function C(e,s){!e||!s||f.push(`/product/${e}/${s}`)}return(e,s)=>{const _=H;return l(),i("div",Ve,[(l(!0),i(A,null,j(h.products,n=>(l(),i("div",{key:n.slug,class:"col-span-1 cursor-pointer pb-10"},[o("div",Le,[o("div",Ee,[o("div",{class:"relative bg-background_color",onMouseenter:g=>v.value=n.slug,onMouseleave:s[0]||(s[0]=g=>v.value=null)},[o("img",{src:r(n),alt:n.alt_text||n.name,class:"hidden md:block max-w-[100%] h-auto object-cover transition-opacity duration-200 border border-text_color/30",loading:"lazy",onClick:g=>C(n.slug,x(n))},null,8,Ie),n.colors&&n.colors.length>0?(l(),i("div",Be,[o("div",{ref_for:!0,ref:g=>B(g,n.slug),class:"keen-slider"},[(l(!0),i(A,null,j(n.colors,(g,N)=>(l(),i("div",{key:N,class:"keen-slider__slide"},[o("img",{src:g.avatar_image,alt:g.color,class:"w-full h-auto object-cover border border-text_color/30",loading:"lazy",onClick:t=>C(n.slug,g.variant_slug)},null,8,Ne)]))),128))],512)])):J("",!0),ne(o("button",{type:"button",class:M(["absolute top-4 left-4 bg-text_color text-background_color tracking-wider text-xs font-light w-auto px-2 mx-auto opacity-0 transition-opacity duration-200",{"opacity-100":d(v)===n.slug}]),onClick:g=>C(n.slug,x(n))}," VIEW ",10,Oe),[[ye,d(v)===n.slug]])],40,Me),o("div",Re,[o("p",Ge,F(n.category),1),o("h3",Te,F(n.name),1),n.colors&&n.colors.length>0?(l(),i("div",qe,[(l(!0),i(A,null,j(n.colors,(g,N)=>(l(),i("div",{key:N,class:"relative group",onMouseenter:t=>a(n,g,N),onMouseleave:t=>u(n)},[o("img",{src:g.avatar_image,alt:g.color,class:"w-7 h-7 md:h-8 md:w-8 object-cover border border-project_black/30 cursor-pointer",loading:"lazy",onClick:t=>C(n.slug,g.variant_slug)},null,8,Ue),o("div",{class:M(["absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color",T(n,N)?"opacity-100 bg-text_color":"opacity-0 bg-text_color"])},[z(_,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 bg-background_color m-auto"})],2)],40,De))),128))])):J("",!0),n?.discount?(l(),i("div",Qe,[o("span",We,"€"+F(w(n.discount_price)),1),o("span",Ye,"€"+F(w(n.price)),1)])):(l(),i("p",He,"€"+F(w(n.price)),1))])])])]))),128))])}}}),Ke=ue(Je,[["__scopeId","data-v-31f81948"]]),Xe={class:"fixed inset-0 overflow-hidden pointer-events-none"},Ze={class:"absolute inset-y-0 left-0 flex max-w-full"},et={class:"flex items-center justify-between px-6 py-4 border-b border-text_color/30"},tt={class:"flex-1 overflow-auto px-6 py-6 space-y-8"},ot={class:"pt-2"},st={class:"mt-3 flex flex-wrap gap-2 justify-end"},nt=["onClick"],lt={class:"pt-2"},rt={class:"mt-3 flex flex-wrap gap-2 justify-end"},at=["onClick"],it={class:"mt-3 flex flex-wrap gap-2 justify-end"},ct=["onClick"],ut={class:"mt-3 flex flex-wrap gap-2 justify-end"},dt=["onClick"],pt={class:"mt-3 flex flex-col"},gt=["value"],ft={class:"flex flex-row my-auto justify-end"},vt={class:"my-auto text-sm text-text_color px-8"},mt=["title"],_t=D({__name:"FilterPanel",props:{open:{type:Boolean,default:!1},facets:{default:()=>({collections:[],categories:[],sizes:[],colors:[]})},modelValue:{default:()=>({gender:[],collections:[],categories:[],sizes:[],colors:[]})}},emits:["update:open","update:modelValue"],setup(h,{emit:P}){const f=h,y=P,v=[{label:"WOMAN",value:"female"},{label:"MAN",value:"male"},{label:"KIDS",value:"kids"},{label:"ALL",value:""}];function S(a){return{gender:Array.isArray(a.gender)?[...a.gender]:[],collections:Array.isArray(a.collections)?[...a.collections]:[],categories:Array.isArray(a.categories)?[...a.categories]:[],sizes:Array.isArray(a.sizes)?[...a.sizes]:[],colors:Array.isArray(a.colors)?[...a.colors]:[]}}const c=xe(S(f.modelValue));q(()=>f.modelValue,a=>{Object.assign(c,S(a))},{deep:!0});function b(){y("update:open",!1)}function I(a){c.gender=a?[a]:[]}function V(a){return a?c.gender[0]===a:c.gender.length===0}function m(a,u){const C=c[a],e=C.indexOf(u);e>-1?C.splice(e,1):C.push(u)}function k(a){return["px-3 py-1 text-sm transition-all duration-200",a?"font-bold":"hover:opacity-70"].join(" ")}function r(){c.gender=[]}function x(){c.collections=[]}function w(){c.categories=[]}function B(){c.sizes=[]}function R(){c.colors=[]}function G(){Object.assign(c,{gender:[],collections:[],categories:[],sizes:[],colors:[]}),y("update:modelValue",S(c))}function T(){y("update:modelValue",S(c)),y("update:open",!1)}return(a,u)=>{const C=H;return l(),Y(d(Se),{show:h.open,as:"template"},{default:O(()=>[z(d(fe),{class:"relative z-50",onClose:b},{default:O(()=>[z(d(K),{enter:"transition-opacity ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:O(()=>[o("div",{class:"fixed inset-0 bg-text_color/30 cursor-pointer","aria-hidden":"true",onClick:b})]),_:1}),o("div",Xe,[o("div",Ze,[z(d(K),{enter:"transform transition ease-out duration-300","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transform transition ease-in duration-200","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:O(()=>[z(d(ve),{class:"w-screen max-w-md bg-background_color h-full shadow-xl flex flex-col pointer-events-auto"},{default:O(()=>[o("div",et,[z(d(me),{class:"uppercase tracking-wider text-md"},{default:O(()=>[...u[1]||(u[1]=[he(" Filters ",-1)])]),_:1}),o("button",{type:"button",class:"ml-2 p-1 inline-flex items-center justify-center hover:bg-text_color/10 shrink-0 rounded transition-colors duration-200","aria-label":"Close filters",onClick:b},[z(C,{name:"lucide:x",class:"w-4 h-4"})])]),o("div",tt,[o("section",ot,[o("div",{class:"flex items-center justify-between"},[u[2]||(u[2]=o("h3",{class:"uppercase text-xs tracking-widest"},"Gender",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:r}," Clear ")]),o("div",st,[(l(),i(A,null,j(v,e=>o("button",{key:e.value||"all",type:"button",onClick:s=>I(e.value),class:M(k(V(e.value)))},F(e.label),11,nt)),64))])]),o("section",lt,[o("div",{class:"flex items-center justify-between"},[u[3]||(u[3]=o("h3",{class:"uppercase text-xs tracking-widest"},"Collection",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:x}," Clear ")]),o("div",rt,[(l(!0),i(A,null,j(h.facets.collections,e=>(l(),i("button",{key:`col-${e.slug}`,type:"button",onClick:s=>m("collections",e.slug),class:M(k(d(c).collections.includes(e.slug)))},F(e.name),11,at))),128))])]),o("section",null,[o("div",{class:"flex items-center justify-between"},[u[4]||(u[4]=o("h3",{class:"uppercase text-xs tracking-widest"},"Category",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:w}," Clear ")]),o("div",it,[(l(!0),i(A,null,j(h.facets.categories,e=>(l(),i("button",{key:e.id,type:"button",onClick:s=>m("categories",e.id),class:M(k(d(c).categories.includes(e.id)))},F(e.name),11,ct))),128))])]),o("section",null,[o("div",{class:"flex items-center justify-between"},[u[5]||(u[5]=o("h3",{class:"uppercase text-xs tracking-widest"},"Size",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:B}," Clear ")]),o("div",ut,[(l(!0),i(A,null,j(h.facets.sizes,e=>(l(),i("button",{key:e.name,type:"button",onClick:s=>m("sizes",e.name),class:M(k(d(c).sizes.includes(e.name)))},F(e.name),11,dt))),128))])]),o("section",null,[o("div",{class:"flex items-center justify-between"},[u[6]||(u[6]=o("h3",{class:"uppercase text-xs tracking-widest"},"Colour",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:R}," Clear ")]),o("div",pt,[(l(!0),i(A,null,j(h.facets.colors,e=>(l(),i("label",{key:e.name,class:"relative cursor-pointer"},[ne(o("input",{type:"checkbox",value:e.name,"onUpdate:modelValue":u[0]||(u[0]=s=>d(c).colors=s),class:"absolute inset-0 opacity-0 cursor-pointer"},null,8,gt),[[be,d(c).colors]]),o("div",ft,[o("p",vt,F(e.name),1),o("div",{class:M(["w-6 h-6 border cursor-pointer transition-all duration-200",d(c).colors.includes(e.name)?"ring-2 ring-text_color":"border-gray-300"]),style:we({backgroundColor:`#${e.image}`}),title:e.name},null,14,mt)])]))),128))])])]),o("div",{class:"px-6 py-4 border-t border-text_color/30 flex items-center justify-between gap-3"},[o("button",{type:"button",class:"text-sm underline hover:no-underline transition-all duration-200",onClick:G}," Clear filters "),o("button",{type:"button",class:"btn btn--secondary",onClick:T},[...u[7]||(u[7]=[o("span",{class:"btn__text"},"View results",-1),o("span",{class:"btn__fill"},null,-1)])])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}}}),yt={id:"smooth-wrapper"},xt={id:"smooth-content"},ht={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 pt-4 gap-6"},bt={class:"flex justify-between w-full"},wt={class:"flex gap-3 justify-start w-full"},kt={class:"flex items-center gap-3"},Ct={class:"flex gap-3 justify-end w-full"},$t={class:"flex items-center gap-3"},St=["onClick"],Z=12,Ot=D({__name:"index",async setup(h){let P,f,y=null;try{y=([P,f]=ke(()=>de(()=>import("./Duwiz9RP.js").then(t=>t.a),[],import.meta.url)),P=await P,f(),P).ScrollSmoother}catch{}U.registerPlugin(X),y&&U.registerPlugin(y);const v=pe(),S=te(),c=ee(),b=$(!0),I=$([]),V=$(0),m=$(1),k=$(!1),r=$({gender:[],collections:[],categories:[],sizes:[],colors:[]}),x=$({collections:[],categories:[],sizes:[],colors:[]});let w=null,B=null;const R=Q(()=>Math.max(1,Math.ceil(V.value/Z)));function G(){const t=S.query;t.page&&(m.value=Number(t.page)||1),t.gender&&(r.value.gender=[String(t.gender)]),t.collection&&(r.value.collections=Array.isArray(t.collection)?t.collection.map(String):[String(t.collection)]),t.category&&(r.value.categories=Array.isArray(t.category)?t.category.map(Number):[Number(t.category)]),t.size&&(r.value.sizes=Array.isArray(t.size)?t.size.map(String):[String(t.size)]),t.color&&(r.value.colors=Array.isArray(t.color)?t.color.map(String):[String(t.color)])}function T(){const t=new URLSearchParams;t.set("page",String(m.value)),t.set("page_size",String(Z)),r.value.collections.forEach(L=>t.append("collection",L)),r.value.categories.forEach(L=>t.append("category",String(L))),r.value.sizes.forEach(L=>t.append("size",L)),r.value.colors.forEach(L=>t.append("color",L));const p=r.value.gender[0];return p&&t.set("gender",p),t}function a(){return T().toString().replace(/\+/g,"%20")}function u(){const t={};m.value>1&&(t.page=String(m.value)),r.value.gender.length>0&&(t.gender=r.value.gender[0]),r.value.collections.length>0&&(t.collection=r.value.collections),r.value.categories.length>0&&(t.category=r.value.categories.map(String)),r.value.sizes.length>0&&(t.size=r.value.sizes),r.value.colors.length>0&&(t.color=r.value.colors),c.replace({query:t})}function C(t){m.value=t,u(),w?w.scrollTo(0,!0,"top top"):window.scrollTo({top:0,behavior:"smooth"})}async function e(){try{const t=await $fetch(`${v.public.apiBase}/public/categories/`);x.value.categories=Array.isArray(t)?t:[]}catch(t){console.error("Failed to fetch categories:",t),x.value.categories=[]}}async function s(){try{const t=await $fetch(`${v.public.apiBase}/public/sizes/`);x.value.sizes=Array.isArray(t)?t:[]}catch(t){console.error("Failed to fetch sizes:",t),x.value.sizes=[]}}async function _(){try{const t=await $fetch(`${v.public.apiBase}/public/colors/`);x.value.colors=Array.isArray(t)?t.map(p=>({name:p.name,image:p.image})):[]}catch(t){console.error("Failed to fetch colors:",t),x.value.colors=[]}}async function n(){try{const t=await $fetch(`${v.public.apiBase}/public/collections/`);x.value.collections=Array.isArray(t)?t.map(p=>({name:p.name,slug:p.slug})):[]}catch(t){console.error("Failed to fetch collections:",t),x.value.collections=[]}}async function g(){try{b.value=!0;const t=await $fetch(`${v.public.apiBase}/public/products-all/?${a()}`);V.value=t.count,I.value=t.results}catch(t){console.error("Failed to fetch products:",t)}finally{b.value=!1}}function N(){B=U.context(()=>{y&&(w=y.create({smooth:1.5,effects:!0,normalizeScroll:!0,smoothTouch:.2,wrapper:"#smooth-wrapper",content:"#smooth-content"}))})}q(r,()=>{m.value!==1&&(m.value=1),u()},{deep:!0}),q(()=>S.query,()=>{g()}),q(k,t=>{w&&w.paused(t)});{const t=Q(()=>w);ze(t)}return oe(async()=>{G(),await Promise.all([e(),_(),s(),n()]),await g(),W(()=>{N()})}),se(()=>{B?.revert(),B=null,w?.kill?.(),X.getAll().forEach(t=>t.kill())}),(t,p)=>{const L=_e,le=H,re=Pe,ae=Ke,ie=_t,ce=ge;return l(),i("section",null,[z(L,{dark:!1}),o("div",yt,[o("div",xt,[o("div",ht,[o("div",bt,[o("div",wt,[o("div",kt,[o("button",{type:"button",class:"text-xs uppercase tracking-widest items-center flex gap-2",onClick:p[0]||(p[0]=E=>k.value=!0)},[z(le,{name:"lucide:sliders-horizontal",class:"w-4 h-4"}),p[3]||(p[3]=o("span",{class:"my-auto"},"Filters",-1))])])]),o("div",Ct,[o("div",$t,[p[4]||(p[4]=o("span",{class:"uppercase text-xs tracking-widest ml-4"},"Page",-1)),(l(!0),i(A,null,j(d(R),E=>(l(),i("button",{key:E,type:"button",class:M([E===d(m)?"underline":"opacity-60","text-sm uppercase tracking-widest"]),onClick:zt=>C(E)},F(E),11,St))),128))])])])]),d(b)?(l(),Y(re,{key:0,class:"mt-2 md:mt-6 px-4 md:px-8",count:8})):(l(),Y(ae,{key:1,class:"mt-2 md:mt-6 px-4 md:px-8",products:d(I)},null,8,["products"])),z(ce,null,{default:O(()=>[z(ie,{open:d(k),modelValue:d(r),"onUpdate:modelValue":p[1]||(p[1]=E=>Ce(r)?r.value=E:null),facets:d(x),"onUpdate:open":p[2]||(p[2]=E=>k.value=E)},null,8,["open","modelValue","facets"])]),_:1})])])])}}});export{Ot as default};
