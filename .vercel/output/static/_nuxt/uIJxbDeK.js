import L from"./Bgd9iGY4.js";import{r as x,g as N,c,o as i,F as C,h as z,a as e,i as F,v as R,n as y,t as k,j as U,b as _,k as G,l as V,e as D,w as j,m as A,p as Y,q as H,s as Q,x as T,y as W,z as J,A as K,B as X,C as Z,_ as ee}from"#entry";import{Y as te,G as se,_ as oe}from"./DfqdnAhd.js";import{h as ne,S as ae}from"./z-NzXbmE.js";import"./5ovgm4nS.js";const le={class:"flex flex-wrap overflow-y-auto pt-8 md:pl-8"},re={class:"bg-background_color overflow-hidden object-fill"},ie={class:"w-11/12 md:w-9/12"},ce=["onMouseenter"],ue=["onClick","src","alt"],de=["onClick"],pe={class:"py-3 text-left"},fe={class:"uppercase tracking-wider text-sm font-normal truncate"},ge={class:"mt-1 flex items-center gap-2"},me=["onMouseenter","onMouseleave"],xe=["src","alt","onClick"],ve={key:0,class:"text-[10px] md:text-xs"},_e={class:"mt-1 text-xs font-light"},ye={__name:"ShopListing",props:{products:{type:Array,default:()=>[]}},setup(v){const p=x(null),h=N(),f=x({});function u(s,t){return f.value[s.slug]===t.variant_slug}function r(s,t){s.currentImage=t.avatar_image,f.value[s.slug]=t.variant_slug}function $(s){s.currentImage=s.defaultImage||s.link_image,f.value[s.slug]=null}function b(s=[]){return Math.max(0,s.length-2)}function w(s=[]){return s.slice(0,2)}function g(s,t){!s||!t||h.push(`/product/${s}/${t}`)}return(s,t)=>{const o=L;return i(),c("div",le,[(i(!0),c(C,null,z(v.products,n=>(i(),c("div",{key:n.slug,class:"w-1/2 md:w-1/4 cursor-pointer pb-10"},[e("div",re,[e("div",ie,[e("div",{class:"relative bg-background_color",onMouseenter:d=>p.value=n.slug,onMouseleave:t[0]||(t[0]=d=>p.value=null)},[e("img",{onClick:d=>g(n.slug,n.colors?.[0]?.variant_slug),src:n.currentImage||n.link_image,alt:n.alt_text||n.name,class:"max-w-[100%] h-auto object-cover transition-opacity duration-200 border border-project_black",loading:"lazy"},null,8,ue),F(e("button",{class:y(["absolute top-4 right-2 bg-background_color text-text_color tracking-wider text-xs font-extralight w-auto px-2 mx-auto opacity-0 transition-opacity duration-200",{"opacity-100":p.value===n.slug}]),onClick:d=>g(n.slug,n.colors?.[0]?.variant_slug)}," View ",10,de),[[R,p.value===n.slug]])],40,ce),e("div",pe,[e("h3",fe,k(n.name),1),e("div",ge,[(i(!0),c(C,null,z(w(n.colors),d=>(i(),c("div",{key:d.variant_slug,class:"relative group",onMouseenter:S=>r(n,d),onMouseleave:S=>$(n)},[e("img",{src:d.avatar_image,alt:d.color,class:"h-8 w-8 object-cover",loading:"lazy",onClick:S=>g(n.slug,d.variant_slug)},null,8,xe),e("div",{class:y(["absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color",u(n,d)?"opacity-100":"opacity-0"])},[_(o,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto"})],2)],40,me))),128)),b(n.colors)>0?(i(),c("span",ve,"+"+k(b(n.colors)),1)):U("",!0)]),e("p",_e,"€"+k(parseFloat(n.price).toFixed(2)),1)])])])]))),128))])}}},be={class:"fixed inset-y-0 right-0 flex max-w-full"},we={class:"flex items-center justify-between px-6 py-4 border-b"},ke={class:"flex-1 overflow-auto px-6 py-6 space-y-8"},he={class:"flex items-center justify-between"},$e={class:"mt-3 flex flex-wrap gap-2 justify-end"},Ce=["onClick"],ze={class:"flex items-center justify-between"},je={class:"mt-3 flex flex-wrap gap-2 justify-end"},Se=["onClick"],Ae={class:"flex items-center justify-between"},Ve={class:"mt-3 flex flex-col gap-2"},Me=["value"],Be={class:"flex flex-row my-auto justify-end"},Fe={class:"my-auto text-sm text-text_color px-8"},Ie=["title"],Oe={__name:"FilterPanel",props:{open:{type:Boolean,default:!1},facets:{type:Object,default:()=>({categories:[],sizes:[],colors:[]})},modelValue:{type:Object,default:()=>({categories:[],sizes:[],colors:[]})}},emits:["update:open","update:modelValue"],setup(v,{emit:p}){const h=v,f=p;function u(s={}){return{categories:Array.isArray(s.categories)?[...s.categories]:[],sizes:Array.isArray(s.sizes)?[...s.sizes]:[],colors:Array.isArray(s.colors)?[...s.colors]:[]}}const r=G(u(h.modelValue));V(()=>h.modelValue,s=>{Object.assign(r,u(s))},{deep:!0});function $(){f("update:modelValue",u(r)),f("update:open",!1)}function b(){Object.assign(r,{categories:[],sizes:[],colors:[]})}function w(s,t){const o=new Set(r[s]);o.has(t)?o.delete(t):o.add(t),r[s]=[...o]}function g(s){return["px-3 py-1 text-sm text-text-color",s?"font-bold":"bg-backgroun_color"]}return(s,t)=>(i(),D(A(ae),{show:v.open},{default:j(()=>[_(A(te),{class:"relative z-50",onClose:t[5]||(t[5]=o=>s.$emit("update:open",!1))},{default:j(()=>[t[10]||(t[10]=e("div",{class:"fixed inset-0 bg-text_color/40","aria-hidden":"true"},null,-1)),e("div",be,[_(A(ne),{enter:"transform transition ease-out duration-200","enter-from":"translate-x-full","enter-to":"translate-x-0",leave:"transform transition ease-in duration-150","leave-from":"translate-x-0","leave-to":"translate-x-full"},{default:j(()=>[_(A(se),{class:"w-screen max-w-md bg-background_color h-full shadow-xl flex flex-col"},{default:j(()=>[e("div",we,[t[6]||(t[6]=e("h2",{class:"uppercase tracking-wider text-sm"},"Filters",-1)),e("button",{class:"text-xl",onClick:t[0]||(t[0]=o=>s.$emit("update:open",!1))},"×")]),e("div",ke,[e("section",null,[e("div",he,[t[7]||(t[7]=e("h3",{class:"uppercase text-xs tracking-widest"},"Category",-1)),e("button",{class:"text-xs underline",onClick:t[1]||(t[1]=o=>r.categories=[])},"Clear")]),e("div",$e,[(i(!0),c(C,null,z(v.facets.categories,o=>(i(),c("button",{key:o.id,onClick:n=>w("categories",o.id),class:y(g(r.categories.includes(o.id)))},k(o.name),11,Ce))),128))])]),e("section",null,[e("div",ze,[t[8]||(t[8]=e("h3",{class:"uppercase text-xs tracking-widest"},"Size",-1)),e("button",{class:"text-xs underline",onClick:t[2]||(t[2]=o=>r.sizes=[])},"clear")]),e("div",je,[(i(!0),c(C,null,z(v.facets.sizes,o=>(i(),c("button",{key:o,onClick:n=>w("sizes",o.name),class:y(g(r.sizes.includes(o.name)))},k(o.name),11,Se))),128))])]),e("section",null,[e("div",Ae,[t[9]||(t[9]=e("h3",{class:"uppercase text-xs tracking-widest"},"Colour",-1)),e("button",{class:"text-xs underline",onClick:t[3]||(t[3]=o=>r.colors=[])},"clear")]),e("div",Ve,[(i(!0),c(C,null,z(v.facets.colors,o=>(i(),c("div",{key:o.name,class:"relative"},[F(e("input",{type:"checkbox",value:o.name,"onUpdate:modelValue":t[4]||(t[4]=n=>r.colors=n),class:"absolute inset-0 opacity-0 cursor-pointer"},null,8,Me),[[Y,r.colors]]),e("div",Be,[e("p",Fe,k(o.name),1),e("div",{class:y(["w-6 h-6 border cursor-pointer m-1",r.colors.includes(o.name)?"ring-2 ring-text_color":"border-gray-300"]),style:H({backgroundColor:`#${o.image}`}),title:o.name},null,14,Ie)])]))),128))])])]),e("div",{class:"px-6 py-4 border-t flex items-center justify-between"},[e("button",{class:"text-sm underline",onClick:b},"Clean filters"),e("button",{class:"border px-4 py-2 rounded",onClick:$},"View results")])]),_:1})]),_:1})])]),_:1})]),_:1},8,["show"]))}},Pe={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-8 py-6 gap-6 border-b border-text_color/30"},qe={class:"w-full md:w-1/2 flex flex-col"},Ee={class:"flex gap-3 justify-end w-full"},Le={class:"flex items-center gap-3"},Ne=["onClick"],Re={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-8 pt-1 gap-6"},Ue={class:"flex justify-end w-full"},Ge={class:"flex items-center"},B=12,De=Q({__name:"index",setup(v){const p=Z(),h=T(),f=W(),u=x(f.query.gender==="male"?"male":"female");V(()=>f.query.gender,l=>{const a=l==="male"?"male":"female";u.value!==a&&(u.value=a)},{immediate:!0});function r(l){u.value!==l&&(u.value=l,h.replace({query:{...f.query,gender:l}}))}function $(l){return["pl-8 py-1 text-sm text-text_color",u.value===l?"font-bold":"bg-background_color"].join(" ")}const b=x([]),w=x(0),g=x(1),s=J(()=>Math.max(1,Math.ceil(w.value/B))),t=x(!1),o=x({categories:[],sizes:[],colors:[]}),n=x({categories:[],sizes:[],colors:[]});function d(){const l=new URLSearchParams;return o.value.categories.forEach(a=>l.append("category",a.toString())),o.value.sizes.forEach(a=>l.append("size",a)),o.value.colors.forEach(a=>l.append("color",a)),l.set("gender",u.value),l.set("page",String(g.value)),l.set("page_size",String(B)),l.toString().replace(/\+/g,"%20")}async function S(){try{const l=await $fetch(`${p.public.apiBase}/public/categories/`,{headers:{"ngrok-skip-browser-warning":"true"}});n.value.categories=Array.isArray(l)?l:[]}catch{n.value.categories=[]}}async function I(){try{const l=await $fetch(`${p.public.apiBase}/public/sizes/`,{headers:{"ngrok-skip-browser-warning":"true"}});n.value.sizes=Array.isArray(l)?l:[]}catch{n.value.sizes=[]}}async function O(){try{const l=await $fetch(`${p.public.apiBase}/public/colors/`,{headers:{"ngrok-skip-browser-warning":"true"}});n.value.colors=Array.isArray(l)?l.map(a=>({name:a.name,image:a.image})):[]}catch{n.value.colors=[]}}async function M(){const l=await $fetch(`${p.public.apiBase}/public/products-all/?${d()}`,{headers:{"ngrok-skip-browser-warning":"true"}});w.value=l.count,b.value=l.results.map(a=>({...a,defaultImage:a.link_image,currentImage:a.link_image}))}return V([o,g,u,f],M),K(async()=>{await Promise.all([S(),O(),I()]),await M()}),(l,a)=>{const P=ye,q=Oe,E=X;return i(),c("section",null,[e("div",Pe,[a[6]||(a[6]=e("div",{class:"w-full md:w-1/2"},[e("div",{class:"image bg-cover bg-center bg-transparent h-40 flex justify-center max-w-[100%]"})],-1)),e("div",qe,[_(oe,{dark:!1}),e("div",Ee,[e("div",Le,[a[5]||(a[5]=e("span",{class:"uppercase text-xs tracking-widest ml-4"},"View",-1)),(i(!0),c(C,null,z(s.value,m=>(i(),c("button",{key:m,class:y([m===g.value?"underline":"opacity-60","text-sm uppercase tracking-widest"]),onClick:Ye=>g.value=m},k(m),11,Ne))),128)),e("button",{class:"text-md uppercase tracking-widest px-4",onClick:a[0]||(a[0]=m=>t.value=!0)},"Filters")])])])]),e("div",Re,[e("div",Ue,[e("div",Ge,[e("button",{class:y($("female")),onClick:a[1]||(a[1]=m=>r("female"))},"WOMAN",2),e("button",{class:y($("male")),onClick:a[2]||(a[2]=m=>r("male"))},"MAN",2)])])]),_(P,{class:"mt-6",products:b.value},null,8,["products"]),_(E,null,{default:j(()=>[_(q,{open:t.value,modelValue:o.value,"onUpdate:modelValue":a[3]||(a[3]=m=>o.value=m),facets:n.value,"onUpdate:open":a[4]||(a[4]=m=>t.value=m)},null,8,["open","modelValue","facets"])]),_:1})])}}}),Ke=ee(De,[["__scopeId","data-v-fca0669f"]]);export{Ke as default};
