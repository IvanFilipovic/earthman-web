import{b as X,c as ee,_ as ue,d as de,e as pe,f as ge}from"#entry";import{Y as fe,G as ve,V as me,_ as ye}from"./a9qNeQMv.js";import H from"./DgM-im28.js";import{u as D,y as i,U as r,I as S,a3 as A,a4 as L,a0 as o,b as k,H as te,v as oe,D as Q,A as q,o as se,a5 as Y,a6 as ne,a7 as _e,G as d,a1 as E,L as z,r as xe,Q as W,V as G,a2 as he,a8 as be,a9 as we,aa as ke,d as Ce}from"./Y--I0j7T.js";import{y as $e}from"./DpJYeJpL.js";/* empty css        */import{h as K,S as ze}from"./m-EGHGAn.js";import{g as U}from"./DKtf60Sy.js";import{S as Z}from"./Duwiz9RP.js";import"./D-AL0EpN.js";const Se={class:"grid grid-cols-2 md:grid-cols-4 overflow-y-auto pt-8 gap-x-4 md:gap-x-8 lg:gap-x-24"},Ae={class:"py-3 text-left space-y-2"},je={class:"mt-1 flex items-center gap-2","aria-label":"Loading color options"},Ve=D({__name:"ShopListingskeleton",props:{count:{default:12},animate:{type:Boolean,default:!0}},setup(h){return(j,f)=>(r(),i("div",Se,[(r(!0),i(S,null,A(h.count,_=>(r(),i("article",{key:_,class:L(["col-span-1 pb-10",{"animate-pulse":h.animate}]),"aria-busy":"true","aria-label":"Loading product"},[f[3]||(f[3]=o("div",{class:"relative w-full overflow-hidden"},[o("div",{class:"w-full aspect-[3/4] bg-project_gray border border-project_gray",role:"img","aria-label":"Loading product image"})],-1)),o("div",Ae,[f[0]||(f[0]=o("div",{class:"h-3 w-20 bg-project_gray rounded",role:"status","aria-label":"Loading category"},null,-1)),f[1]||(f[1]=o("div",{class:"h-4 w-3/4 bg-project_gray rounded",role:"status","aria-label":"Loading product name"},null,-1)),o("div",je,[(r(),i(S,null,A(3,v=>o("div",{key:v,class:"w-7 h-7 md:w-8 md:h-8 bg-project_gray border border-project_gray",role:"status"})),64))]),f[2]||(f[2]=o("div",{class:"h-3 w-16 bg-project_gray rounded",role:"status","aria-label":"Loading price"},null,-1))])],2))),128))]))}}),Fe={class:"grid grid-cols-2 md:grid-cols-4 overflow-y-auto pt-8 gap-x-4 md:gap-x-8 lg:gap-x-24"},Pe={class:"bg-background_color overflow-hidden object-fill"},Le={class:"w-full"},Ee=["onMouseenter"],Ie=["src","alt","onClick"],Me={key:0,class:"block md:hidden"},Be=["src","alt","onClick"],Ne=["onClick"],Ge={class:"py-3 text-left"},Oe={class:"text-xs tracking-wider font-extralight"},Re={class:"uppercase tracking-wider text-[13px] md:text-sm font-normal truncate py-1"},Te={key:0,class:"mt-1 flex items-center gap-2"},qe=["onMouseenter","onMouseleave"],De=["src","alt","onClick"],Ue={class:"mt-1 text-xs font-light"},Qe=D({__name:"ShopListing",props:{products:{}},setup(h){const j=h,f=X(),_=ee(),v=k(null),C=k({}),c=k({}),b=k({}),M=k({}),V=te(()=>{const e=_.query.color;return e?Array.isArray(e)?e.map(s=>m(String(s))):[m(String(e))]:[]});function m(e){return e.toLowerCase().trim().replace(/\s+/g," ")}function $(e){if(V.value.length===0)return!1;const s=m(e.color);return V.value.some(y=>!!(s===y||s.includes(y)||y.includes(s)))}function l(e){if(e.currentImage)return e.currentImage;if(!e.colors||e.colors.length===0)return"";if(V.value.length>0){const s=e.colors.find(y=>$(y));if(s)return s.avatar_image}return e.colors[0].avatar_image}function x(e){if(!(!e.colors||e.colors.length===0)){if(V.value.length>0){const s=e.colors.find(y=>$(y));if(s)return s.variant_slug}return e.colors[0].variant_slug}}function I(e){return parseFloat(e).toFixed(2)}function B(e,s){e&&(c.value[s]=e)}oe(()=>{Q(()=>{R()})}),q(()=>j.products,()=>{Q(()=>{O(),R()})},{deep:!0}),se(()=>{O()});function O(){Object.values(b.value).forEach(e=>{e&&typeof e.destroy=="function"&&e.destroy()}),b.value={}}function R(){j.products.forEach(e=>{if(!e.colors||e.colors.length===0)return;const s=c.value[e.slug];if(!s)return;b.value[e.slug]&&b.value[e.slug].destroy();const y=new $e(s,{loop:!0,initial:0,slideChanged(n){M.value[e.slug]=n.track.details.rel}});b.value[e.slug]=y,M.value[e.slug]=0})}function T(e,s){return C.value[e.slug]===s}function a(e,s,y){v.value=e.slug,e.currentImage=s.avatar_image,C.value[e.slug]=y}function u(e){e.currentImage=void 0,C.value[e.slug]=null,v.value=null}function w(e,s){!e||!s||f.push(`/product/${e}/${s}`)}return(e,s)=>{const y=H;return r(),i("div",Fe,[(r(!0),i(S,null,A(h.products,n=>(r(),i("div",{key:n.slug,class:"col-span-1 cursor-pointer pb-10"},[o("div",Pe,[o("div",Le,[o("div",{class:"relative bg-background_color",onMouseenter:g=>v.value=n.slug,onMouseleave:s[0]||(s[0]=g=>v.value=null)},[o("img",{src:l(n),alt:n.alt_text||n.name,class:"hidden md:block max-w-[100%] h-auto object-cover transition-opacity duration-200 border border-text_color/30",loading:"lazy",onClick:g=>w(n.slug,x(n))},null,8,Ie),n.colors&&n.colors.length>0?(r(),i("div",Me,[o("div",{ref_for:!0,ref:g=>B(g,n.slug),class:"keen-slider"},[(r(!0),i(S,null,A(n.colors,(g,N)=>(r(),i("div",{key:N,class:"keen-slider__slide"},[o("img",{src:g.avatar_image,alt:g.color,class:"w-full h-auto object-cover border border-text_color/30",loading:"lazy",onClick:t=>w(n.slug,g.variant_slug)},null,8,Be)]))),128))],512)])):Y("",!0),ne(o("button",{type:"button",class:L(["absolute top-4 left-4 bg-text_color text-background_color tracking-wider text-xs font-light w-auto px-2 mx-auto opacity-0 transition-opacity duration-200",{"opacity-100":d(v)===n.slug}]),onClick:g=>w(n.slug,x(n))}," VIEW ",10,Ne),[[_e,d(v)===n.slug]])],40,Ee),o("div",Ge,[o("p",Oe,E(n.category),1),o("h3",Re,E(n.name),1),n.colors&&n.colors.length>0?(r(),i("div",Te,[(r(!0),i(S,null,A(n.colors,(g,N)=>(r(),i("div",{key:N,class:"relative group",onMouseenter:t=>a(n,g,N),onMouseleave:t=>u(n)},[o("img",{src:g.avatar_image,alt:g.color,class:"w-7 h-7 md:h-8 md:w-8 object-cover border border-project_black/40 cursor-pointer",loading:"lazy",onClick:t=>w(n.slug,g.variant_slug)},null,8,De),o("div",{class:L(["absolute inset-0 pointer-events-none transition-opacity duration-200 w-8 h-8 bg-text_color",T(n,N)?"opacity-100":"opacity-0"])},[z(y,{name:"lucide:square-arrow-out-up-right",class:"absolute inset-0 w-4 h-4 z-10 text-background_color m-auto"})],2)],40,qe))),128))])):Y("",!0),o("p",Ue,"â‚¬"+E(I(n.price)),1)])])])]))),128))])}}}),We=ue(Qe,[["__scopeId","data-v-53d70bb8"]]),He={class:"fixed inset-0 overflow-hidden pointer-events-none"},Ye={class:"absolute inset-y-0 left-0 flex max-w-full"},Ke={class:"flex items-center justify-between px-6 py-4 border-b border-text_color/30"},Ze={class:"flex-1 overflow-auto px-6 py-6 space-y-8"},Je={class:"pt-2"},Xe={class:"mt-3 flex flex-wrap gap-2 justify-end"},et=["onClick"],tt={class:"pt-2"},ot={class:"mt-3 flex flex-wrap gap-2 justify-end"},st=["onClick"],nt={class:"mt-3 flex flex-wrap gap-2 justify-end"},lt=["onClick"],rt={class:"mt-3 flex flex-wrap gap-2 justify-end"},at=["onClick"],it={class:"mt-3 flex flex-col"},ct=["value"],ut={class:"flex flex-row my-auto justify-end"},dt={class:"my-auto text-sm text-text_color px-8"},pt=["title"],gt=D({__name:"FilterPanel",props:{open:{type:Boolean,default:!1},facets:{default:()=>({collections:[],categories:[],sizes:[],colors:[]})},modelValue:{default:()=>({gender:[],collections:[],categories:[],sizes:[],colors:[]})}},emits:["update:open","update:modelValue"],setup(h,{emit:j}){const f=h,_=j,v=[{label:"WOMAN",value:"female"},{label:"MAN",value:"male"},{label:"KIDS",value:"kids"},{label:"ALL",value:""}];function C(a){return{gender:Array.isArray(a.gender)?[...a.gender]:[],collections:Array.isArray(a.collections)?[...a.collections]:[],categories:Array.isArray(a.categories)?[...a.categories]:[],sizes:Array.isArray(a.sizes)?[...a.sizes]:[],colors:Array.isArray(a.colors)?[...a.colors]:[]}}const c=xe(C(f.modelValue));q(()=>f.modelValue,a=>{Object.assign(c,C(a))},{deep:!0});function b(){_("update:open",!1)}function M(a){c.gender=a?[a]:[]}function V(a){return a?c.gender[0]===a:c.gender.length===0}function m(a,u){const w=c[a],e=w.indexOf(u);e>-1?w.splice(e,1):w.push(u)}function $(a){return["px-3 py-1 text-sm transition-all duration-200",a?"font-bold":"hover:opacity-70"].join(" ")}function l(){c.gender=[]}function x(){c.collections=[]}function I(){c.categories=[]}function B(){c.sizes=[]}function O(){c.colors=[]}function R(){Object.assign(c,{gender:[],collections:[],categories:[],sizes:[],colors:[]}),_("update:modelValue",C(c))}function T(){_("update:modelValue",C(c)),_("update:open",!1)}return(a,u)=>{const w=H;return r(),W(d(ze),{show:h.open,as:"template"},{default:G(()=>[z(d(fe),{class:"relative z-50",onClose:b},{default:G(()=>[z(d(K),{enter:"transition-opacity ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:G(()=>[o("div",{class:"fixed inset-0 bg-text_color/30 cursor-pointer","aria-hidden":"true",onClick:b})]),_:1}),o("div",He,[o("div",Ye,[z(d(K),{enter:"transform transition ease-out duration-300","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transform transition ease-in duration-200","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:G(()=>[z(d(ve),{class:"w-screen max-w-md bg-background_color h-full shadow-xl flex flex-col pointer-events-auto"},{default:G(()=>[o("div",Ke,[z(d(me),{class:"uppercase tracking-wider text-md"},{default:G(()=>[...u[1]||(u[1]=[he(" Filters ",-1)])]),_:1}),o("button",{type:"button",class:"ml-2 p-1 inline-flex items-center justify-center hover:bg-text_color/10 shrink-0 rounded transition-colors duration-200","aria-label":"Close filters",onClick:b},[z(w,{name:"lucide:x",class:"w-4 h-4"})])]),o("div",Ze,[o("section",Je,[o("div",{class:"flex items-center justify-between"},[u[2]||(u[2]=o("h3",{class:"uppercase text-xs tracking-widest"},"Gender",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:l}," Clear ")]),o("div",Xe,[(r(),i(S,null,A(v,e=>o("button",{key:e.value||"all",type:"button",onClick:s=>M(e.value),class:L($(V(e.value)))},E(e.label),11,et)),64))])]),o("section",tt,[o("div",{class:"flex items-center justify-between"},[u[3]||(u[3]=o("h3",{class:"uppercase text-xs tracking-widest"},"Collection",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:x}," Clear ")]),o("div",ot,[(r(!0),i(S,null,A(h.facets.collections,e=>(r(),i("button",{key:`col-${e.slug}`,type:"button",onClick:s=>m("collections",e.slug),class:L($(d(c).collections.includes(e.slug)))},E(e.name),11,st))),128))])]),o("section",null,[o("div",{class:"flex items-center justify-between"},[u[4]||(u[4]=o("h3",{class:"uppercase text-xs tracking-widest"},"Category",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:I}," Clear ")]),o("div",nt,[(r(!0),i(S,null,A(h.facets.categories,e=>(r(),i("button",{key:e.id,type:"button",onClick:s=>m("categories",e.id),class:L($(d(c).categories.includes(e.id)))},E(e.name),11,lt))),128))])]),o("section",null,[o("div",{class:"flex items-center justify-between"},[u[5]||(u[5]=o("h3",{class:"uppercase text-xs tracking-widest"},"Size",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:B}," Clear ")]),o("div",rt,[(r(!0),i(S,null,A(h.facets.sizes,e=>(r(),i("button",{key:e.name,type:"button",onClick:s=>m("sizes",e.name),class:L($(d(c).sizes.includes(e.name)))},E(e.name),11,at))),128))])]),o("section",null,[o("div",{class:"flex items-center justify-between"},[u[6]||(u[6]=o("h3",{class:"uppercase text-xs tracking-widest"},"Colour",-1)),o("button",{type:"button",class:"text-xs underline hover:no-underline transition-all duration-200",onClick:O}," Clear ")]),o("div",it,[(r(!0),i(S,null,A(h.facets.colors,e=>(r(),i("label",{key:e.name,class:"relative cursor-pointer"},[ne(o("input",{type:"checkbox",value:e.name,"onUpdate:modelValue":u[0]||(u[0]=s=>d(c).colors=s),class:"absolute inset-0 opacity-0 cursor-pointer"},null,8,ct),[[be,d(c).colors]]),o("div",ut,[o("p",dt,E(e.name),1),o("div",{class:L(["w-6 h-6 border cursor-pointer transition-all duration-200",d(c).colors.includes(e.name)?"ring-2 ring-text_color":"border-gray-300"]),style:we({backgroundColor:`#${e.image}`}),title:e.name},null,14,pt)])]))),128))])])]),o("div",{class:"px-6 py-4 border-t border-text_color/30 flex items-center justify-between gap-3"},[o("button",{type:"button",class:"text-sm underline hover:no-underline transition-all duration-200",onClick:R}," Clear filters "),o("button",{type:"button",class:"btn btn--secondary",onClick:T},[...u[7]||(u[7]=[o("span",{class:"btn__text"},"View results",-1),o("span",{class:"btn__fill"},null,-1)])])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])}}}),ft={id:"smooth-wrapper"},vt={id:"smooth-content"},mt={class:"flex flex-col md:flex-row items-start md:items-center justify-between px-4 md:px-8 pt-4 gap-6"},yt={class:"flex justify-between w-full"},_t={class:"flex gap-3 justify-start w-full"},xt={class:"flex items-center gap-3"},ht={class:"flex gap-3 justify-end w-full"},bt={class:"flex items-center gap-3"},wt=["onClick"],J=12,Et=D({__name:"index",async setup(h){let j,f,_=null;try{_=([j,f]=ke(()=>de(()=>import("./Duwiz9RP.js").then(t=>t.a),[],import.meta.url)),j=await j,f(),j).ScrollSmoother}catch{}U.registerPlugin(Z),_&&U.registerPlugin(_);const v=ge(),C=ee(),c=X(),b=k(!0),M=k([]),V=k(0),m=k(1),$=k(!1),l=k({gender:[],collections:[],categories:[],sizes:[],colors:[]}),x=k({collections:[],categories:[],sizes:[],colors:[]});let I=null,B=null;const O=te(()=>Math.max(1,Math.ceil(V.value/J)));function R(){const t=C.query;t.page&&(m.value=Number(t.page)||1),t.gender&&(l.value.gender=[String(t.gender)]),t.collection&&(l.value.collections=Array.isArray(t.collection)?t.collection.map(String):[String(t.collection)]),t.category&&(l.value.categories=Array.isArray(t.category)?t.category.map(Number):[Number(t.category)]),t.size&&(l.value.sizes=Array.isArray(t.size)?t.size.map(String):[String(t.size)]),t.color&&(l.value.colors=Array.isArray(t.color)?t.color.map(String):[String(t.color)])}function T(){const t=new URLSearchParams;t.set("page",String(m.value)),t.set("page_size",String(J)),l.value.collections.forEach(F=>t.append("collection",F)),l.value.categories.forEach(F=>t.append("category",String(F))),l.value.sizes.forEach(F=>t.append("size",F)),l.value.colors.forEach(F=>t.append("color",F));const p=l.value.gender[0];return p&&t.set("gender",p),t}function a(){return T().toString().replace(/\+/g,"%20")}function u(){const t={};m.value>1&&(t.page=String(m.value)),l.value.gender.length>0&&(t.gender=l.value.gender[0]),l.value.collections.length>0&&(t.collection=l.value.collections),l.value.categories.length>0&&(t.category=l.value.categories.map(String)),l.value.sizes.length>0&&(t.size=l.value.sizes),l.value.colors.length>0&&(t.color=l.value.colors),c.replace({query:t})}function w(t){m.value=t,u(),I?I.scrollTo(0,!0,"top top"):window.scrollTo({top:0,behavior:"smooth"})}async function e(){try{const t=await $fetch(`${v.public.apiBase}/public/categories/`);x.value.categories=Array.isArray(t)?t:[]}catch(t){console.error("Failed to fetch categories:",t),x.value.categories=[]}}async function s(){try{const t=await $fetch(`${v.public.apiBase}/public/sizes/`);x.value.sizes=Array.isArray(t)?t:[]}catch(t){console.error("Failed to fetch sizes:",t),x.value.sizes=[]}}async function y(){try{const t=await $fetch(`${v.public.apiBase}/public/colors/`);x.value.colors=Array.isArray(t)?t.map(p=>({name:p.name,image:p.image})):[]}catch(t){console.error("Failed to fetch colors:",t),x.value.colors=[]}}async function n(){try{const t=await $fetch(`${v.public.apiBase}/public/collections/`);x.value.collections=Array.isArray(t)?t.map(p=>({name:p.name,slug:p.slug})):[]}catch(t){console.error("Failed to fetch collections:",t),x.value.collections=[]}}async function g(){try{b.value=!0;const t=await $fetch(`${v.public.apiBase}/public/products-all/?${a()}`);V.value=t.count,M.value=t.results}catch(t){console.error("Failed to fetch products:",t)}finally{b.value=!1}}function N(){B=U.context(()=>{_&&(I=_.create({smooth:1.5,effects:!0,normalizeScroll:!0,smoothTouch:.2,wrapper:"#smooth-wrapper",content:"#smooth-content"}))})}return q(l,()=>{m.value!==1&&(m.value=1),u()},{deep:!0}),q(()=>C.query,()=>{g()}),oe(async()=>{R(),await Promise.all([e(),y(),s(),n()]),await g(),Q(()=>{N()})}),se(()=>{B?.revert(),B=null,I?.kill?.(),Z.getAll().forEach(t=>t.kill())}),(t,p)=>{const F=ye,le=H,re=Ve,ae=We,ie=gt,ce=pe;return r(),i("section",null,[z(F,{dark:!1}),o("div",ft,[o("div",vt,[o("div",mt,[o("div",yt,[o("div",_t,[o("div",xt,[o("button",{type:"button",class:"text-md uppercase tracking-widest items-center flex gap-2",onClick:p[0]||(p[0]=P=>$.value=!0)},[z(le,{name:"lucide:sliders-horizontal",class:"w-5 h-5"}),p[3]||(p[3]=o("span",{class:"my-auto"},"Filters",-1))])])]),o("div",ht,[o("div",bt,[p[4]||(p[4]=o("span",{class:"uppercase text-xs tracking-widest ml-4"},"Page",-1)),(r(!0),i(S,null,A(d(O),P=>(r(),i("button",{key:P,type:"button",class:L([P===d(m)?"underline":"opacity-60","text-sm uppercase tracking-widest"]),onClick:kt=>w(P)},E(P),11,wt))),128))])])])]),d(b)?(r(),W(re,{key:0,class:"mt-2 md:mt-6 px-4 md:px-8",count:8})):(r(),W(ae,{key:1,class:"mt-2 md:mt-6 px-4 md:px-8",products:d(M)},null,8,["products"])),z(ce,null,{default:G(()=>[z(ie,{open:d($),modelValue:d(l),"onUpdate:modelValue":p[1]||(p[1]=P=>Ce(l)?l.value=P:null),facets:d(x),"onUpdate:open":p[2]||(p[2]=P=>$.value=P)},null,8,["open","modelValue","facets"])]),_:1})])])])}}});export{Et as default};
